import{r as w,a as es,g as ts,b as V,c as ol}from"./vendor-9bcc248d.js";import{N as Wn,O as ll,u as Ka,L as Ya,a as Xa,R as cl,b as de,c as gr,B as dl}from"./router-2e50f75a.js";import{B as lt,L as ul,F as Wt,K as pl,C as ml,a as ve,U as ct,b as Ce,S as rs,H as fl,c as Hn,X as Qe,d as gl,T as Et,e as yt,f as hl,g as Mr,h as qn,M as Xt,i as Za,E as as,j as Zt,A as vl,k as ns,l as dt,m as bl,n as Qa,o as yl,p as pe,q as Ra,P as xt,r as ut,s as xl,t as wl,u as Nl,v as Sl,D as Dl,w as El,R as Cl,x as is,y as ss,z as os,G as Vn,I as Pl,J as Il,N as Tl,O as Al,Q as Rl,V as Ol}from"./ui-be0b823c.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(i){if(i.ep)return;i.ep=!0;const n=r(i);fetch(i.href,n)}})();var ls={exports:{}},Fr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kl=w,Bl=Symbol.for("react.element"),Ll=Symbol.for("react.fragment"),jl=Object.prototype.hasOwnProperty,Ml=kl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fl={key:!0,ref:!0,__self:!0,__source:!0};function cs(e,t,r){var a,i={},n=null,o=null;r!==void 0&&(n=""+r),t.key!==void 0&&(n=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)jl.call(t,a)&&!Fl.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)i[a]===void 0&&(i[a]=t[a]);return{$$typeof:Bl,type:e,key:n,ref:o,props:i,_owner:Ml.current}}Fr.Fragment=Ll;Fr.jsx=cs;Fr.jsxs=cs;ls.exports=Fr;var en=ls.exports;const Ye=en.Fragment,s=en.jsx,c=en.jsxs;var Oa={},zn=es;Oa.createRoot=zn.createRoot,Oa.hydrateRoot=zn.hydrateRoot;const _n=e=>{let t;const r=new Set,a=(p,m)=>{const f=typeof p=="function"?p(t):p;if(!Object.is(f,t)){const g=t;t=m??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(b=>b(t,g))}},i=()=>t,d={setState:a,getState:i,getInitialState:()=>u,subscribe:p=>(r.add(p),()=>r.delete(p)),destroy:()=>{r.clear()}},u=t=e(a,i,d);return d},$l=e=>e?_n(e):_n;var ds={exports:{}},us={},ps={exports:{}},ms={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt=w;function Ul(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gl=typeof Object.is=="function"?Object.is:Ul,Wl=wt.useState,Hl=wt.useEffect,ql=wt.useLayoutEffect,Vl=wt.useDebugValue;function zl(e,t){var r=t(),a=Wl({inst:{value:r,getSnapshot:t}}),i=a[0].inst,n=a[1];return ql(function(){i.value=r,i.getSnapshot=t,ma(i)&&n({inst:i})},[e,r,t]),Hl(function(){return ma(i)&&n({inst:i}),e(function(){ma(i)&&n({inst:i})})},[e]),Vl(r),r}function ma(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Gl(e,r)}catch{return!0}}function _l(e,t){return t()}var Jl=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_l:zl;ms.useSyncExternalStore=wt.useSyncExternalStore!==void 0?wt.useSyncExternalStore:Jl;ps.exports=ms;var Kl=ps.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $r=w,Yl=Kl;function Xl(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zl=typeof Object.is=="function"?Object.is:Xl,Ql=Yl.useSyncExternalStore,ec=$r.useRef,tc=$r.useEffect,rc=$r.useMemo,ac=$r.useDebugValue;us.useSyncExternalStoreWithSelector=function(e,t,r,a,i){var n=ec(null);if(n.current===null){var o={hasValue:!1,value:null};n.current=o}else o=n.current;n=rc(function(){function d(g){if(!u){if(u=!0,p=g,g=a(g),i!==void 0&&o.hasValue){var b=o.value;if(i(b,g))return m=b}return m=g}if(b=m,Zl(p,g))return b;var h=a(g);return i!==void 0&&i(b,h)?(p=g,b):(p=g,m=h)}var u=!1,p,m,f=r===void 0?null:r;return[function(){return d(t())},f===null?void 0:function(){return d(f())}]},[t,r,a,i]);var l=Ql(e,n[0],n[1]);return tc(function(){o.hasValue=!0,o.value=l},[l]),ac(l),l};ds.exports=us;var nc=ds.exports;const ic=ts(nc),{useDebugValue:sc}=V,{useSyncExternalStoreWithSelector:oc}=ic;const lc=e=>e;function cc(e,t=lc,r){const a=oc(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return sc(a),a}const Jn=e=>{const t=typeof e=="function"?$l(e):e,r=(a,i)=>cc(t,a,i);return Object.assign(r,t),r},tn=e=>e?Jn(e):Jn;function dc(e,t){let r;try{r=e()}catch{return}return{getItem:i=>{var n;const o=d=>d===null?null:JSON.parse(d,t==null?void 0:t.reviver),l=(n=r.getItem(i))!=null?n:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,n)=>r.setItem(i,JSON.stringify(n,t==null?void 0:t.replacer)),removeItem:i=>r.removeItem(i)}}const Ht=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(a){return Ht(a)(r)},catch(a){return this}}}catch(r){return{then(a){return this},catch(a){return Ht(a)(r)}}}},uc=(e,t)=>(r,a,i)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,x)=>({...x,...v}),...t},o=!1;const l=new Set,d=new Set;let u;try{u=n.getStorage()}catch{}if(!u)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),r(...v)},a,i);const p=Ht(n.serialize),m=()=>{const v=n.partialize({...a()});let x;const y=p({state:v,version:n.version}).then(N=>u.setItem(n.name,N)).catch(N=>{x=N});if(x)throw x;return y},f=i.setState;i.setState=(v,x)=>{f(v,x),m()};const g=e((...v)=>{r(...v),m()},a,i);let b;const h=()=>{var v;if(!u)return;o=!1,l.forEach(y=>y(a()));const x=((v=n.onRehydrateStorage)==null?void 0:v.call(n,a()))||void 0;return Ht(u.getItem.bind(u))(n.name).then(y=>{if(y)return n.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==n.version){if(n.migrate)return n.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var N;return b=n.merge(y,(N=a())!=null?N:g),r(b,!0),m()}).then(()=>{x==null||x(b,void 0),o=!0,d.forEach(y=>y(b))}).catch(y=>{x==null||x(void 0,y)})};return i.persist={setOptions:v=>{n={...n,...v},v.getStorage&&(u=v.getStorage())},clearStorage:()=>{u==null||u.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>h(),hasHydrated:()=>o,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(d.add(v),()=>{d.delete(v)})},h(),b||g},pc=(e,t)=>(r,a,i)=>{let n={storage:dc(()=>localStorage),partialize:h=>h,version:0,merge:(h,v)=>({...v,...h}),...t},o=!1;const l=new Set,d=new Set;let u=n.storage;if(!u)return e((...h)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),r(...h)},a,i);const p=()=>{const h=n.partialize({...a()});return u.setItem(n.name,{state:h,version:n.version})},m=i.setState;i.setState=(h,v)=>{m(h,v),p()};const f=e((...h)=>{r(...h),p()},a,i);i.getInitialState=()=>f;let g;const b=()=>{var h,v;if(!u)return;o=!1,l.forEach(y=>{var N;return y((N=a())!=null?N:f)});const x=((v=n.onRehydrateStorage)==null?void 0:v.call(n,(h=a())!=null?h:f))||void 0;return Ht(u.getItem.bind(u))(n.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==n.version){if(n.migrate)return[!0,n.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var N;const[S,E]=y;if(g=n.merge(E,(N=a())!=null?N:f),r(g,!0),S)return p()}).then(()=>{x==null||x(g,void 0),g=a(),o=!0,d.forEach(y=>y(g))}).catch(y=>{x==null||x(void 0,y)})};return i.persist={setOptions:h=>{n={...n,...h},h.storage&&(u=h.storage)},clearStorage:()=>{u==null||u.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:h=>(l.add(h),()=>{l.delete(h)}),onFinishHydration:h=>(d.add(h),()=>{d.delete(h)})},n.skipHydration||b(),g||f},mc=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?uc(e,t):pc(e,t),fc=mc;function fs(e,t){return function(){return e.apply(t,arguments)}}const{toString:gc}=Object.prototype,{getPrototypeOf:rn}=Object,{iterator:Ur,toStringTag:gs}=Symbol,Gr=(e=>t=>{const r=gc.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Pe=e=>(e=e.toLowerCase(),t=>Gr(t)===e),Wr=e=>t=>typeof t===e,{isArray:Ct}=Array,qt=Wr("undefined");function Qt(e){return e!==null&&!qt(e)&&e.constructor!==null&&!qt(e.constructor)&&me(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const hs=Pe("ArrayBuffer");function hc(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&hs(e.buffer),t}const vc=Wr("string"),me=Wr("function"),vs=Wr("number"),er=e=>e!==null&&typeof e=="object",bc=e=>e===!0||e===!1,xr=e=>{if(Gr(e)!=="object")return!1;const t=rn(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(gs in e)&&!(Ur in e)},yc=e=>{if(!er(e)||Qt(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},xc=Pe("Date"),wc=Pe("File"),Nc=Pe("Blob"),Sc=Pe("FileList"),Dc=e=>er(e)&&me(e.pipe),Ec=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||me(e.append)&&((t=Gr(e))==="formdata"||t==="object"&&me(e.toString)&&e.toString()==="[object FormData]"))},Cc=Pe("URLSearchParams"),[Pc,Ic,Tc,Ac]=["ReadableStream","Request","Response","Headers"].map(Pe),Rc=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tr(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,i;if(typeof e!="object"&&(e=[e]),Ct(e))for(a=0,i=e.length;a<i;a++)t.call(null,e[a],a,e);else{if(Qt(e))return;const n=r?Object.getOwnPropertyNames(e):Object.keys(e),o=n.length;let l;for(a=0;a<o;a++)l=n[a],t.call(null,e[l],l,e)}}function bs(e,t){if(Qt(e))return null;t=t.toLowerCase();const r=Object.keys(e);let a=r.length,i;for(;a-- >0;)if(i=r[a],t===i.toLowerCase())return i;return null}const ot=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ys=e=>!qt(e)&&e!==ot;function ka(){const{caseless:e}=ys(this)&&this||{},t={},r=(a,i)=>{const n=e&&bs(t,i)||i;xr(t[n])&&xr(a)?t[n]=ka(t[n],a):xr(a)?t[n]=ka({},a):Ct(a)?t[n]=a.slice():t[n]=a};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&tr(arguments[a],r);return t}const Oc=(e,t,r,{allOwnKeys:a}={})=>(tr(t,(i,n)=>{r&&me(i)?e[n]=fs(i,r):e[n]=i},{allOwnKeys:a}),e),kc=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Bc=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Lc=(e,t,r,a)=>{let i,n,o;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),n=i.length;n-- >0;)o=i[n],(!a||a(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&rn(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},jc=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},Mc=e=>{if(!e)return null;if(Ct(e))return e;let t=e.length;if(!vs(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Fc=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&rn(Uint8Array)),$c=(e,t)=>{const a=(e&&e[Ur]).call(e);let i;for(;(i=a.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},Uc=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},Gc=Pe("HTMLFormElement"),Wc=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,i){return a.toUpperCase()+i}),Kn=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Hc=Pe("RegExp"),xs=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};tr(r,(i,n)=>{let o;(o=t(i,n,e))!==!1&&(a[n]=o||i)}),Object.defineProperties(e,a)},qc=e=>{xs(e,(t,r)=>{if(me(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(me(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Vc=(e,t)=>{const r={},a=i=>{i.forEach(n=>{r[n]=!0})};return Ct(e)?a(e):a(String(e).split(t)),r},zc=()=>{},_c=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Jc(e){return!!(e&&me(e.append)&&e[gs]==="FormData"&&e[Ur])}const Kc=e=>{const t=new Array(10),r=(a,i)=>{if(er(a)){if(t.indexOf(a)>=0)return;if(Qt(a))return a;if(!("toJSON"in a)){t[i]=a;const n=Ct(a)?[]:{};return tr(a,(o,l)=>{const d=r(o,i+1);!qt(d)&&(n[l]=d)}),t[i]=void 0,n}}return a};return r(e,0)},Yc=Pe("AsyncFunction"),Xc=e=>e&&(er(e)||me(e))&&me(e.then)&&me(e.catch),ws=((e,t)=>e?setImmediate:t?((r,a)=>(ot.addEventListener("message",({source:i,data:n})=>{i===ot&&n===r&&a.length&&a.shift()()},!1),i=>{a.push(i),ot.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",me(ot.postMessage)),Zc=typeof queueMicrotask<"u"?queueMicrotask.bind(ot):typeof process<"u"&&process.nextTick||ws,Qc=e=>e!=null&&me(e[Ur]),D={isArray:Ct,isArrayBuffer:hs,isBuffer:Qt,isFormData:Ec,isArrayBufferView:hc,isString:vc,isNumber:vs,isBoolean:bc,isObject:er,isPlainObject:xr,isEmptyObject:yc,isReadableStream:Pc,isRequest:Ic,isResponse:Tc,isHeaders:Ac,isUndefined:qt,isDate:xc,isFile:wc,isBlob:Nc,isRegExp:Hc,isFunction:me,isStream:Dc,isURLSearchParams:Cc,isTypedArray:Fc,isFileList:Sc,forEach:tr,merge:ka,extend:Oc,trim:Rc,stripBOM:kc,inherits:Bc,toFlatObject:Lc,kindOf:Gr,kindOfTest:Pe,endsWith:jc,toArray:Mc,forEachEntry:$c,matchAll:Uc,isHTMLForm:Gc,hasOwnProperty:Kn,hasOwnProp:Kn,reduceDescriptors:xs,freezeMethods:qc,toObjectSet:Vc,toCamelCase:Wc,noop:zc,toFiniteNumber:_c,findKey:bs,global:ot,isContextDefined:ys,isSpecCompliantForm:Jc,toJSONObject:Kc,isAsyncFn:Yc,isThenable:Xc,setImmediate:ws,asap:Zc,isIterable:Qc};function $(e,t,r,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),i&&(this.response=i,this.status=i.status?i.status:null)}D.inherits($,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const Ns=$.prototype,Ss={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ss[e]={value:e}});Object.defineProperties($,Ss);Object.defineProperty(Ns,"isAxiosError",{value:!0});$.from=(e,t,r,a,i,n)=>{const o=Object.create(Ns);return D.toFlatObject(e,o,function(d){return d!==Error.prototype},l=>l!=="isAxiosError"),$.call(o,e.message,t,r,a,i),o.cause=e,o.name=e.name,n&&Object.assign(o,n),o};const ed=null;function Ba(e){return D.isPlainObject(e)||D.isArray(e)}function Ds(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function Yn(e,t,r){return e?e.concat(t).map(function(i,n){return i=Ds(i),!r&&n?"["+i+"]":i}).join(r?".":""):t}function td(e){return D.isArray(e)&&!e.some(Ba)}const rd=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function Hr(e,t,r){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=D.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,v){return!D.isUndefined(v[h])});const a=r.metaTokens,i=r.visitor||p,n=r.dots,o=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(i))throw new TypeError("visitor must be a function");function u(b){if(b===null)return"";if(D.isDate(b))return b.toISOString();if(D.isBoolean(b))return b.toString();if(!d&&D.isBlob(b))throw new $("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(b)||D.isTypedArray(b)?d&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function p(b,h,v){let x=b;if(b&&!v&&typeof b=="object"){if(D.endsWith(h,"{}"))h=a?h:h.slice(0,-2),b=JSON.stringify(b);else if(D.isArray(b)&&td(b)||(D.isFileList(b)||D.endsWith(h,"[]"))&&(x=D.toArray(b)))return h=Ds(h),x.forEach(function(N,S){!(D.isUndefined(N)||N===null)&&t.append(o===!0?Yn([h],S,n):o===null?h:h+"[]",u(N))}),!1}return Ba(b)?!0:(t.append(Yn(v,h,n),u(b)),!1)}const m=[],f=Object.assign(rd,{defaultVisitor:p,convertValue:u,isVisitable:Ba});function g(b,h){if(!D.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+h.join("."));m.push(b),D.forEach(b,function(x,y){(!(D.isUndefined(x)||x===null)&&i.call(t,x,D.isString(y)?y.trim():y,h,f))===!0&&g(x,h?h.concat(y):[y])}),m.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return g(e),t}function Xn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function an(e,t){this._pairs=[],e&&Hr(e,this,t)}const Es=an.prototype;Es.append=function(t,r){this._pairs.push([t,r])};Es.toString=function(t){const r=t?function(a){return t.call(this,a,Xn)}:Xn;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function ad(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Cs(e,t,r){if(!t)return e;const a=r&&r.encode||ad;D.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let n;if(i?n=i(t,r):n=D.isURLSearchParams(t)?t.toString():new an(t,r).toString(a),n){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e}class nd{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(a){a!==null&&t(a)})}}const Zn=nd,Ps={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},id=typeof URLSearchParams<"u"?URLSearchParams:an,sd=typeof FormData<"u"?FormData:null,od=typeof Blob<"u"?Blob:null,ld={isBrowser:!0,classes:{URLSearchParams:id,FormData:sd,Blob:od},protocols:["http","https","file","blob","url","data"]},nn=typeof window<"u"&&typeof document<"u",La=typeof navigator=="object"&&navigator||void 0,cd=nn&&(!La||["ReactNative","NativeScript","NS"].indexOf(La.product)<0),dd=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ud=nn&&window.location.href||"http://localhost",pd=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:nn,hasStandardBrowserEnv:cd,hasStandardBrowserWebWorkerEnv:dd,navigator:La,origin:ud},Symbol.toStringTag,{value:"Module"})),oe={...pd,...ld};function md(e,t){return Hr(e,new oe.classes.URLSearchParams,{visitor:function(r,a,i,n){return oe.isNode&&D.isBuffer(r)?(this.append(a,r.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}function fd(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function gd(e){const t={},r=Object.keys(e);let a;const i=r.length;let n;for(a=0;a<i;a++)n=r[a],t[n]=e[n];return t}function Is(e){function t(r,a,i,n){let o=r[n++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),d=n>=r.length;return o=!o&&D.isArray(i)?i.length:o,d?(D.hasOwnProp(i,o)?i[o]=[i[o],a]:i[o]=a,!l):((!i[o]||!D.isObject(i[o]))&&(i[o]=[]),t(r,a,i[o],n)&&D.isArray(i[o])&&(i[o]=gd(i[o])),!l)}if(D.isFormData(e)&&D.isFunction(e.entries)){const r={};return D.forEachEntry(e,(a,i)=>{t(fd(a),i,r,0)}),r}return null}function hd(e,t,r){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const sn={transitional:Ps,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",i=a.indexOf("application/json")>-1,n=D.isObject(t);if(n&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return i?JSON.stringify(Is(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(n){if(a.indexOf("application/x-www-form-urlencoded")>-1)return md(t,this.formSerializer).toString();if((l=D.isFileList(t))||a.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Hr(l?{"files[]":t}:t,d&&new d,this.formSerializer)}}return n||i?(r.setContentType("application/json",!1),hd(t)):t}],transformResponse:[function(t){const r=this.transitional||sn.transitional,a=r&&r.forcedJSONParsing,i=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(a&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?$.from(l,$.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:oe.classes.FormData,Blob:oe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{sn.headers[e]={}});const on=sn,vd=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bd=e=>{const t={};let r,a,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),a=o.substring(i+1).trim(),!(!r||t[r]&&vd[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},Qn=Symbol("internals");function Bt(e){return e&&String(e).trim().toLowerCase()}function wr(e){return e===!1||e==null?e:D.isArray(e)?e.map(wr):String(e)}function yd(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const xd=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function fa(e,t,r,a,i){if(D.isFunction(a))return a.call(this,t,r);if(i&&(t=r),!!D.isString(t)){if(D.isString(a))return t.indexOf(a)!==-1;if(D.isRegExp(a))return a.test(t)}}function wd(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function Nd(e,t){const r=D.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(i,n,o){return this[a].call(this,t,i,n,o)},configurable:!0})})}class qr{constructor(t){t&&this.set(t)}set(t,r,a){const i=this;function n(l,d,u){const p=Bt(d);if(!p)throw new Error("header name must be a non-empty string");const m=D.findKey(i,p);(!m||i[m]===void 0||u===!0||u===void 0&&i[m]!==!1)&&(i[m||d]=wr(l))}const o=(l,d)=>D.forEach(l,(u,p)=>n(u,p,d));if(D.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(D.isString(t)&&(t=t.trim())&&!xd(t))o(bd(t),r);else if(D.isObject(t)&&D.isIterable(t)){let l={},d,u;for(const p of t){if(!D.isArray(p))throw TypeError("Object iterator must return a key-value pair");l[u=p[0]]=(d=l[u])?D.isArray(d)?[...d,p[1]]:[d,p[1]]:p[1]}o(l,r)}else t!=null&&n(r,t,a);return this}get(t,r){if(t=Bt(t),t){const a=D.findKey(this,t);if(a){const i=this[a];if(!r)return i;if(r===!0)return yd(i);if(D.isFunction(r))return r.call(this,i,a);if(D.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Bt(t),t){const a=D.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||fa(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let i=!1;function n(o){if(o=Bt(o),o){const l=D.findKey(a,o);l&&(!r||fa(a,a[l],l,r))&&(delete a[l],i=!0)}}return D.isArray(t)?t.forEach(n):n(t),i}clear(t){const r=Object.keys(this);let a=r.length,i=!1;for(;a--;){const n=r[a];(!t||fa(this,this[n],n,t,!0))&&(delete this[n],i=!0)}return i}normalize(t){const r=this,a={};return D.forEach(this,(i,n)=>{const o=D.findKey(a,n);if(o){r[o]=wr(i),delete r[n];return}const l=t?wd(n):String(n).trim();l!==n&&delete r[n],r[l]=wr(i),a[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return D.forEach(this,(a,i)=>{a!=null&&a!==!1&&(r[i]=t&&D.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(i=>a.set(i)),a}static accessor(t){const a=(this[Qn]=this[Qn]={accessors:{}}).accessors,i=this.prototype;function n(o){const l=Bt(o);a[l]||(Nd(i,o),a[l]=!0)}return D.isArray(t)?t.forEach(n):n(t),this}}qr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(qr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});D.freezeMethods(qr);const Ee=qr;function ga(e,t){const r=this||on,a=t||r,i=Ee.from(a.headers);let n=a.data;return D.forEach(e,function(l){n=l.call(r,n,i.normalize(),t?t.status:void 0)}),i.normalize(),n}function Ts(e){return!!(e&&e.__CANCEL__)}function Pt(e,t,r){$.call(this,e??"canceled",$.ERR_CANCELED,t,r),this.name="CanceledError"}D.inherits(Pt,$,{__CANCEL__:!0});function As(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new $("Request failed with status code "+r.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Sd(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Dd(e,t){e=e||10;const r=new Array(e),a=new Array(e);let i=0,n=0,o;return t=t!==void 0?t:1e3,function(d){const u=Date.now(),p=a[n];o||(o=u),r[i]=d,a[i]=u;let m=n,f=0;for(;m!==i;)f+=r[m++],m=m%e;if(i=(i+1)%e,i===n&&(n=(n+1)%e),u-o<t)return;const g=p&&u-p;return g?Math.round(f*1e3/g):void 0}}function Ed(e,t){let r=0,a=1e3/t,i,n;const o=(u,p=Date.now())=>{r=p,i=null,n&&(clearTimeout(n),n=null),e(...u)};return[(...u)=>{const p=Date.now(),m=p-r;m>=a?o(u,p):(i=u,n||(n=setTimeout(()=>{n=null,o(i)},a-m)))},()=>i&&o(i)]}const Er=(e,t,r=3)=>{let a=0;const i=Dd(50,250);return Ed(n=>{const o=n.loaded,l=n.lengthComputable?n.total:void 0,d=o-a,u=i(d),p=o<=l;a=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:d,rate:u||void 0,estimated:u&&l&&p?(l-o)/u:void 0,event:n,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(m)},r)},ei=(e,t)=>{const r=e!=null;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},ti=e=>(...t)=>D.asap(()=>e(...t)),Cd=oe.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,oe.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(oe.origin),oe.navigator&&/(msie|trident)/i.test(oe.navigator.userAgent)):()=>!0,Pd=oe.hasStandardBrowserEnv?{write(e,t,r,a,i,n){const o=[e+"="+encodeURIComponent(t)];D.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),D.isString(a)&&o.push("path="+a),D.isString(i)&&o.push("domain="+i),n===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Id(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Td(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Rs(e,t,r){let a=!Id(t);return e&&(a||r==!1)?Td(e,t):t}const ri=e=>e instanceof Ee?{...e}:e;function pt(e,t){t=t||{};const r={};function a(u,p,m,f){return D.isPlainObject(u)&&D.isPlainObject(p)?D.merge.call({caseless:f},u,p):D.isPlainObject(p)?D.merge({},p):D.isArray(p)?p.slice():p}function i(u,p,m,f){if(D.isUndefined(p)){if(!D.isUndefined(u))return a(void 0,u,m,f)}else return a(u,p,m,f)}function n(u,p){if(!D.isUndefined(p))return a(void 0,p)}function o(u,p){if(D.isUndefined(p)){if(!D.isUndefined(u))return a(void 0,u)}else return a(void 0,p)}function l(u,p,m){if(m in t)return a(u,p);if(m in e)return a(void 0,u)}const d={url:n,method:n,data:n,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,p,m)=>i(ri(u),ri(p),m,!0)};return D.forEach(Object.keys({...e,...t}),function(p){const m=d[p]||i,f=m(e[p],t[p],p);D.isUndefined(f)&&m!==l||(r[p]=f)}),r}const Os=e=>{const t=pt({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:i,xsrfCookieName:n,headers:o,auth:l}=t;t.headers=o=Ee.from(o),t.url=Cs(Rs(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let d;if(D.isFormData(r)){if(oe.hasStandardBrowserEnv||oe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((d=o.getContentType())!==!1){const[u,...p]=d?d.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...p].join("; "))}}if(oe.hasStandardBrowserEnv&&(a&&D.isFunction(a)&&(a=a(t)),a||a!==!1&&Cd(t.url))){const u=i&&n&&Pd.read(n);u&&o.set(i,u)}return t},Ad=typeof XMLHttpRequest<"u",Rd=Ad&&function(e){return new Promise(function(r,a){const i=Os(e);let n=i.data;const o=Ee.from(i.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:u}=i,p,m,f,g,b;function h(){g&&g(),b&&b(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function x(){if(!v)return;const N=Ee.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:N,config:e,request:v};As(function(k){r(k),h()},function(k){a(k),h()},E),v=null}"onloadend"in v?v.onloadend=x:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(x)},v.onabort=function(){v&&(a(new $("Request aborted",$.ECONNABORTED,e,v)),v=null)},v.onerror=function(){a(new $("Network Error",$.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const E=i.transitional||Ps;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),a(new $(S,E.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,e,v)),v=null},n===void 0&&o.setContentType(null),"setRequestHeader"in v&&D.forEach(o.toJSON(),function(S,E){v.setRequestHeader(E,S)}),D.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),l&&l!=="json"&&(v.responseType=i.responseType),u&&([f,b]=Er(u,!0),v.addEventListener("progress",f)),d&&v.upload&&([m,g]=Er(d),v.upload.addEventListener("progress",m),v.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(p=N=>{v&&(a(!N||N.type?new Pt(null,e,v):N),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const y=Sd(i.url);if(y&&oe.protocols.indexOf(y)===-1){a(new $("Unsupported protocol "+y+":",$.ERR_BAD_REQUEST,e));return}v.send(n||null)})},Od=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let a=new AbortController,i;const n=function(u){if(!i){i=!0,l();const p=u instanceof Error?u:this.reason;a.abort(p instanceof $?p:new Pt(p instanceof Error?p.message:p))}};let o=t&&setTimeout(()=>{o=null,n(new $(`timeout ${t} of ms exceeded`,$.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(n):u.removeEventListener("abort",n)}),e=null)};e.forEach(u=>u.addEventListener("abort",n));const{signal:d}=a;return d.unsubscribe=()=>D.asap(l),d}},kd=Od,Bd=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let a=0,i;for(;a<r;)i=a+t,yield e.slice(a,i),a=i},Ld=async function*(e,t){for await(const r of jd(e))yield*Bd(r,t)},jd=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},ai=(e,t,r,a)=>{const i=Ld(e,t);let n=0,o,l=d=>{o||(o=!0,a&&a(d))};return new ReadableStream({async pull(d){try{const{done:u,value:p}=await i.next();if(u){l(),d.close();return}let m=p.byteLength;if(r){let f=n+=m;r(f)}d.enqueue(new Uint8Array(p))}catch(u){throw l(u),u}},cancel(d){return l(d),i.return()}},{highWaterMark:2})},Vr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ks=Vr&&typeof ReadableStream=="function",Md=Vr&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Bs=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Fd=ks&&Bs(()=>{let e=!1;const t=new Request(oe.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ni=64*1024,ja=ks&&Bs(()=>D.isReadableStream(new Response("").body)),Cr={stream:ja&&(e=>e.body)};Vr&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Cr[t]&&(Cr[t]=D.isFunction(e[t])?r=>r[t]():(r,a)=>{throw new $(`Response type '${t}' is not supported`,$.ERR_NOT_SUPPORT,a)})})})(new Response);const $d=async e=>{if(e==null)return 0;if(D.isBlob(e))return e.size;if(D.isSpecCompliantForm(e))return(await new Request(oe.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(D.isArrayBufferView(e)||D.isArrayBuffer(e))return e.byteLength;if(D.isURLSearchParams(e)&&(e=e+""),D.isString(e))return(await Md(e)).byteLength},Ud=async(e,t)=>{const r=D.toFiniteNumber(e.getContentLength());return r??$d(t)},Gd=Vr&&(async e=>{let{url:t,method:r,data:a,signal:i,cancelToken:n,timeout:o,onDownloadProgress:l,onUploadProgress:d,responseType:u,headers:p,withCredentials:m="same-origin",fetchOptions:f}=Os(e);u=u?(u+"").toLowerCase():"text";let g=kd([i,n&&n.toAbortSignal()],o),b;const h=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let v;try{if(d&&Fd&&r!=="get"&&r!=="head"&&(v=await Ud(p,a))!==0){let E=new Request(t,{method:"POST",body:a,duplex:"half"}),C;if(D.isFormData(a)&&(C=E.headers.get("content-type"))&&p.setContentType(C),E.body){const[k,B]=ei(v,Er(ti(d)));a=ai(E.body,ni,k,B)}}D.isString(m)||(m=m?"include":"omit");const x="credentials"in Request.prototype;b=new Request(t,{...f,signal:g,method:r.toUpperCase(),headers:p.normalize().toJSON(),body:a,duplex:"half",credentials:x?m:void 0});let y=await fetch(b,f);const N=ja&&(u==="stream"||u==="response");if(ja&&(l||N&&h)){const E={};["status","statusText","headers"].forEach(T=>{E[T]=y[T]});const C=D.toFiniteNumber(y.headers.get("content-length")),[k,B]=l&&ei(C,Er(ti(l),!0))||[];y=new Response(ai(y.body,ni,k,()=>{B&&B(),h&&h()}),E)}u=u||"text";let S=await Cr[D.findKey(Cr,u)||"text"](y,e);return!N&&h&&h(),await new Promise((E,C)=>{As(E,C,{data:S,headers:Ee.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:b})})}catch(x){throw h&&h(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new $("Network Error",$.ERR_NETWORK,e,b),{cause:x.cause||x}):$.from(x,x&&x.code,e,b)}}),Ma={http:ed,xhr:Rd,fetch:Gd};D.forEach(Ma,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ii=e=>`- ${e}`,Wd=e=>D.isFunction(e)||e===null||e===!1,Ls={getAdapter:e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let r,a;const i={};for(let n=0;n<t;n++){r=e[n];let o;if(a=r,!Wd(r)&&(a=Ma[(o=String(r)).toLowerCase()],a===void 0))throw new $(`Unknown adapter '${o}'`);if(a)break;i[o||"#"+n]=a}if(!a){const n=Object.entries(i).map(([l,d])=>`adapter ${l} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=t?n.length>1?`since :
`+n.map(ii).join(`
`):" "+ii(n[0]):"as no adapter specified";throw new $("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a},adapters:Ma};function ha(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pt(null,e)}function si(e){return ha(e),e.headers=Ee.from(e.headers),e.data=ga.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ls.getAdapter(e.adapter||on.adapter)(e).then(function(a){return ha(e),a.data=ga.call(e,e.transformResponse,a),a.headers=Ee.from(a.headers),a},function(a){return Ts(a)||(ha(e),a&&a.response&&(a.response.data=ga.call(e,e.transformResponse,a.response),a.response.headers=Ee.from(a.response.headers))),Promise.reject(a)})}const js="1.11.0",zr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zr[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const oi={};zr.transitional=function(t,r,a){function i(n,o){return"[Axios v"+js+"] Transitional option '"+n+"'"+o+(a?". "+a:"")}return(n,o,l)=>{if(t===!1)throw new $(i(o," has been removed"+(r?" in "+r:"")),$.ERR_DEPRECATED);return r&&!oi[o]&&(oi[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(n,o,l):!0}};zr.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function Hd(e,t,r){if(typeof e!="object")throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let i=a.length;for(;i-- >0;){const n=a[i],o=t[n];if(o){const l=e[n],d=l===void 0||o(l,n,e);if(d!==!0)throw new $("option "+n+" must be "+d,$.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new $("Unknown option "+n,$.ERR_BAD_OPTION)}}const Nr={assertOptions:Hd,validators:zr},ke=Nr.validators;class Pr{constructor(t){this.defaults=t||{},this.interceptors={request:new Zn,response:new Zn}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const n=i.stack?i.stack.replace(/^.+\n/,""):"";try{a.stack?n&&!String(a.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+n):a.stack=n}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=pt(this.defaults,r);const{transitional:a,paramsSerializer:i,headers:n}=r;a!==void 0&&Nr.assertOptions(a,{silentJSONParsing:ke.transitional(ke.boolean),forcedJSONParsing:ke.transitional(ke.boolean),clarifyTimeoutError:ke.transitional(ke.boolean)},!1),i!=null&&(D.isFunction(i)?r.paramsSerializer={serialize:i}:Nr.assertOptions(i,{encode:ke.function,serialize:ke.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Nr.assertOptions(r,{baseUrl:ke.spelling("baseURL"),withXsrfToken:ke.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=n&&D.merge(n.common,n[r.method]);n&&D.forEach(["delete","get","head","post","put","patch","common"],b=>{delete n[b]}),r.headers=Ee.concat(o,n);const l=[];let d=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(d=d&&h.synchronous,l.unshift(h.fulfilled,h.rejected))});const u=[];this.interceptors.response.forEach(function(h){u.push(h.fulfilled,h.rejected)});let p,m=0,f;if(!d){const b=[si.bind(this),void 0];for(b.unshift(...l),b.push(...u),f=b.length,p=Promise.resolve(r);m<f;)p=p.then(b[m++],b[m++]);return p}f=l.length;let g=r;for(m=0;m<f;){const b=l[m++],h=l[m++];try{g=b(g)}catch(v){h.call(this,v);break}}try{p=si.call(this,g)}catch(b){return Promise.reject(b)}for(m=0,f=u.length;m<f;)p=p.then(u[m++],u[m++]);return p}getUri(t){t=pt(this.defaults,t);const r=Rs(t.baseURL,t.url,t.allowAbsoluteUrls);return Cs(r,t.params,t.paramsSerializer)}}D.forEach(["delete","get","head","options"],function(t){Pr.prototype[t]=function(r,a){return this.request(pt(a||{},{method:t,url:r,data:(a||{}).data}))}});D.forEach(["post","put","patch"],function(t){function r(a){return function(n,o,l){return this.request(pt(l||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}Pr.prototype[t]=r(),Pr.prototype[t+"Form"]=r(!0)});const Sr=Pr;class ln{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(n){r=n});const a=this;this.promise.then(i=>{if(!a._listeners)return;let n=a._listeners.length;for(;n-- >0;)a._listeners[n](i);a._listeners=null}),this.promise.then=i=>{let n;const o=new Promise(l=>{a.subscribe(l),n=l}).then(i);return o.cancel=function(){a.unsubscribe(n)},o},t(function(n,o,l){a.reason||(a.reason=new Pt(n,o,l),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new ln(function(i){t=i}),cancel:t}}}const qd=ln;function Vd(e){return function(r){return e.apply(null,r)}}function zd(e){return D.isObject(e)&&e.isAxiosError===!0}const Fa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fa).forEach(([e,t])=>{Fa[t]=e});const _d=Fa;function Ms(e){const t=new Sr(e),r=fs(Sr.prototype.request,t);return D.extend(r,Sr.prototype,t,{allOwnKeys:!0}),D.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return Ms(pt(e,i))},r}const ee=Ms(on);ee.Axios=Sr;ee.CanceledError=Pt;ee.CancelToken=qd;ee.isCancel=Ts;ee.VERSION=js;ee.toFormData=Hr;ee.AxiosError=$;ee.Cancel=ee.CanceledError;ee.all=function(t){return Promise.all(t)};ee.spread=Vd;ee.isAxiosError=zd;ee.mergeConfig=pt;ee.AxiosHeaders=Ee;ee.formToJSON=e=>Is(D.isHTMLForm(e)?new FormData(e):e);ee.getAdapter=Ls.getAdapter;ee.HttpStatusCode=_d;ee.default=ee;const q=ee,Jd={}.VITE_API_URL||"/api",He=q.create({baseURL:Jd,headers:{"Content-Type":"application/json"}});He.interceptors.request.use(e=>{var r;const t=localStorage.getItem("auth-storage");if(t)try{const a=JSON.parse(t);(r=a.state)!=null&&r.token&&(e.headers.Authorization=`Bearer ${a.state.token}`)}catch(a){console.error("Error parsing auth token:",a)}return e},e=>Promise.reject(e));He.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("auth-storage"),window.location.href="/login"),Promise.reject(e)});const vt={login:async(e,t)=>(await He.post("/auth/login",{email:e,password:t})).data,register:async(e,t,r)=>(await He.post("/auth/register",{name:e,email:t,password:r})).data,logout:async()=>(await He.post("/auth/logout")).data,getCurrentUser:async()=>(await He.get("/auth/me")).data,updateProfile:async e=>(await He.put("/auth/profile",e)).data,changePassword:async(e,t)=>(await He.put("/auth/change-password",{currentPassword:e,newPassword:t})).data},Ne=tn()(fc((e,t)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,login:async(r,a)=>{var i,n;try{e({isLoading:!0,error:null});const o=await vt.login(r,a);e({user:o.data.user,token:o.data.token,isAuthenticated:!0,isLoading:!1,error:null})}catch(o){throw e({isLoading:!1,error:((n=(i=o.response)==null?void 0:i.data)==null?void 0:n.message)||"Login failed"}),o}},register:async(r,a,i)=>{var n,o;try{e({isLoading:!0,error:null});const l=await vt.register(r,a,i);e({user:l.data.user,token:l.data.token,isAuthenticated:!0,isLoading:!1,error:null})}catch(l){throw e({isLoading:!1,error:((o=(n=l.response)==null?void 0:n.data)==null?void 0:o.message)||"Registration failed"}),l}},logout:async()=>{try{await vt.logout()}catch(r){console.error("Logout error:",r)}finally{e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null})}},getCurrentUser:async()=>{try{e({isLoading:!0,error:null});const r=await vt.getCurrentUser();e({user:r.data.user,isAuthenticated:!0,isLoading:!1,error:null})}catch{e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null})}},updateProfile:async r=>{var a,i;try{e({isLoading:!0,error:null});const n=await vt.updateProfile(r);e({user:n.data.user,isLoading:!1,error:null})}catch(n){throw e({isLoading:!1,error:((i=(a=n.response)==null?void 0:a.data)==null?void 0:i.message)||"Profile update failed"}),n}},changePassword:async(r,a)=>{var i,n;try{e({isLoading:!0,error:null}),await vt.changePassword(r,a),e({isLoading:!1,error:null})}catch(o){throw e({isLoading:!1,error:((n=(i=o.response)==null?void 0:i.data)==null?void 0:n.message)||"Password change failed"}),o}},clearError:()=>{e({error:null})},setLoading:r=>{e({isLoading:r})}}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})})),Kd=()=>{var o;const{user:e}=Ne(),t=(e==null?void 0:e.role)==="ADMIN",[r,a]=w.useState(!1),i=[{path:"/dashboard",label:"Dashboard",icon:ul,description:"Overview & Analytics"},{path:"/projects",label:"Projects",icon:Wt,description:"Manage Projects"},{path:"/projects/kanban",label:"Kanban Board",icon:pl,description:"Visual Task Management"},{path:"/tasks",label:"Tasks",icon:ml,description:"Task Management"},{path:"/time-tracking",label:"Time Tracking",icon:ve,description:"Track Work Hours"},...t?[{path:"/users",label:"Users",icon:ct,description:"User Management"}]:[],{path:"/profile",label:"Profile",icon:Ce,description:"Your Profile"}],n=[{path:"/settings",label:"Settings",icon:rs},{path:"/help",label:"Help",icon:fl}];return c("div",{className:`${r?"w-16":"w-64"} bg-white/80 backdrop-blur-xl border-r border-white/20 min-h-screen transition-all duration-300 ease-in-out`,children:[s("nav",{className:"flex-1 px-3 py-6",children:s("div",{className:"space-y-2",children:i.map(l=>c(Wn,{to:l.path,className:({isActive:d})=>`nav-link group relative ${d?"active":""}`,title:r?l.label:void 0,children:[s(l.icon,{className:`w-5 h-5 ${r?"mx-auto":"mr-3"}`}),!r&&c("div",{className:"flex-1",children:[s("span",{className:"block",children:l.label}),s("span",{className:"text-xs text-gray-400 group-hover:text-gray-500",children:l.description})]})]},l.path))})}),s("div",{className:"px-3 pb-6 border-t border-gray-100/50 pt-6",children:s("div",{className:"space-y-2",children:n.map(l=>c(Wn,{to:l.path,className:({isActive:d})=>`nav-link group relative ${d?"active":""}`,title:r?l.label:void 0,children:[s(l.icon,{className:`w-5 h-5 ${r?"mx-auto":"mr-3"}`}),!r&&s("span",{children:l.label})]},l.path))})}),s("div",{className:"px-3 pb-6",children:c("button",{onClick:()=>a(!r),className:"w-full nav-link justify-center",title:r?"Expand Sidebar":"Collapse Sidebar",children:[s(lt,{className:"w-5 h-5"}),!r&&s("span",{children:"Toggle"})]})}),!r&&s("div",{className:"px-3 pb-6",children:s("div",{className:"card p-4",children:c("div",{className:"flex items-center space-x-3",children:[c("div",{className:"relative",children:[s("img",{src:(e==null?void 0:e.avatar)||`https://ui-avatars.com/api/?name=${e==null?void 0:e.name}&background=0ea5e9&color=fff&size=128`,alt:e==null?void 0:e.name,className:"h-10 w-10 rounded-lg object-cover ring-2 ring-white/50"}),s("div",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full bg-success-500 border-2 border-white"})]}),c("div",{className:"flex-1 min-w-0",children:[s("p",{className:"text-sm font-medium text-gray-900 truncate",children:e==null?void 0:e.name}),s("p",{className:"text-xs text-gray-500 capitalize",children:(o=e==null?void 0:e.role)==null?void 0:o.toLowerCase()})]})]})})})]})};let Yd={data:""},Xd=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Yd,Zd=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Qd=/\/\*[^]*?\*\/|  +/g,li=/\n+/g,ze=(e,t)=>{let r="",a="",i="";for(let n in e){let o=e[n];n[0]=="@"?n[1]=="i"?r=n+" "+o+";":a+=n[1]=="f"?ze(o,n):n+"{"+ze(o,n[1]=="k"?"":t)+"}":typeof o=="object"?a+=ze(o,t?t.replace(/([^,])+/g,l=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,l):l?l+" "+d:d)):n):o!=null&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=ze.p?ze.p(n,o):n+":"+o+";")}return r+(t&&i?t+"{"+i+"}":i)+a},Me={},Fs=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+Fs(e[r]);return t}return e},eu=(e,t,r,a,i)=>{let n=Fs(e),o=Me[n]||(Me[n]=(d=>{let u=0,p=11;for(;u<d.length;)p=101*p+d.charCodeAt(u++)>>>0;return"go"+p})(n));if(!Me[o]){let d=n!==e?e:(u=>{let p,m,f=[{}];for(;p=Zd.exec(u.replace(Qd,""));)p[4]?f.shift():p[3]?(m=p[3].replace(li," ").trim(),f.unshift(f[0][m]=f[0][m]||{})):f[0][p[1]]=p[2].replace(li," ").trim();return f[0]})(e);Me[o]=ze(i?{["@keyframes "+o]:d}:d,r?"":"."+o)}let l=r&&Me.g?Me.g:null;return r&&(Me.g=Me[o]),((d,u,p,m)=>{m?u.data=u.data.replace(m,d):u.data.indexOf(d)===-1&&(u.data=p?d+u.data:u.data+d)})(Me[o],t,a,l),o},tu=(e,t,r)=>e.reduce((a,i,n)=>{let o=t[n];if(o&&o.call){let l=o(r),d=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=d?"."+d:l&&typeof l=="object"?l.props?"":ze(l,""):l===!1?"":l}return a+i+(o??"")},"");function _r(e){let t=this||{},r=e.call?e(t.p):e;return eu(r.unshift?r.raw?tu(r,[].slice.call(arguments,1),t.p):r.reduce((a,i)=>Object.assign(a,i&&i.call?i(t.p):i),{}):r,Xd(t.target),t.g,t.o,t.k)}let $s,$a,Ua;_r.bind({g:1});let $e=_r.bind({k:1});function ru(e,t,r,a){ze.p=t,$s=e,$a=r,Ua=a}function et(e,t){let r=this||{};return function(){let a=arguments;function i(n,o){let l=Object.assign({},n),d=l.className||i.className;r.p=Object.assign({theme:$a&&$a()},l),r.o=/ *go\d+/.test(d),l.className=_r.apply(r,a)+(d?" "+d:""),t&&(l.ref=o);let u=e;return e[0]&&(u=l.as||e,delete l.as),Ua&&u[0]&&Ua(l),$s(u,l)}return t?t(i):i}}var au=e=>typeof e=="function",Ga=(e,t)=>au(e)?e(t):e,nu=(()=>{let e=0;return()=>(++e).toString()})(),iu=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),su=20,Us=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,su)};case 1:return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case 2:let{toast:r}=t;return Us(e,{type:e.toasts.find(n=>n.id===r.id)?1:0,toast:r});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(n=>n.id===a||a===void 0?{...n,dismissed:!0,visible:!1}:n)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(n=>({...n,pauseDuration:n.pauseDuration+i}))}}},ou=[],va={toasts:[],pausedAt:void 0},cn=e=>{va=Us(va,e),ou.forEach(t=>{t(va)})},lu=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||nu()}),rr=e=>(t,r)=>{let a=lu(t,e,r);return cn({type:2,toast:a}),a.id},O=(e,t)=>rr("blank")(e,t);O.error=rr("error");O.success=rr("success");O.loading=rr("loading");O.custom=rr("custom");O.dismiss=e=>{cn({type:3,toastId:e})};O.remove=e=>cn({type:4,toastId:e});O.promise=(e,t,r)=>{let a=O.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let n=t.success?Ga(t.success,i):void 0;return n?O.success(n,{id:a,...r,...r==null?void 0:r.success}):O.dismiss(a),i}).catch(i=>{let n=t.error?Ga(t.error,i):void 0;n?O.error(n,{id:a,...r,...r==null?void 0:r.error}):O.dismiss(a)}),e};var cu=$e`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,du=$e`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,uu=$e`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,pu=et("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${cu} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${du} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${uu} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,mu=$e`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,fu=et("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${mu} 1s linear infinite;
`,gu=$e`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,hu=$e`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,vu=et("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gu} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${hu} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,bu=et("div")`
  position: absolute;
`,yu=et("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,xu=$e`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,wu=et("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${xu} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Nu=({toast:e})=>{let{icon:t,type:r,iconTheme:a}=e;return t!==void 0?typeof t=="string"?w.createElement(wu,null,t):t:r==="blank"?null:w.createElement(yu,null,w.createElement(fu,{...a}),r!=="loading"&&w.createElement(bu,null,r==="error"?w.createElement(pu,{...a}):w.createElement(vu,{...a})))},Su=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Du=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Eu="0%{opacity:0;} 100%{opacity:1;}",Cu="0%{opacity:1;} 100%{opacity:0;}",Pu=et("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Iu=et("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Tu=(e,t)=>{let r=e.includes("top")?1:-1,[a,i]=iu()?[Eu,Cu]:[Su(r),Du(r)];return{animation:t?`${$e(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${$e(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};w.memo(({toast:e,position:t,style:r,children:a})=>{let i=e.height?Tu(e.position||t||"top-center",e.visible):{opacity:0},n=w.createElement(Nu,{toast:e}),o=w.createElement(Iu,{...e.ariaProps},Ga(e.message,e));return w.createElement(Pu,{className:e.className,style:{...i,...r,...e.style}},typeof a=="function"?a({icon:n,message:o}):w.createElement(w.Fragment,null,n,o))});ru(w.createElement);_r`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Xe=O;const Au=async(e=!1,t=50)=>{try{const r=new URLSearchParams;return e&&r.append("unreadOnly","true"),t&&r.append("limit",t.toString()),(await q.get(`/api/notifications?${r.toString()}`)).data.data.notifications}catch(r){throw console.error("Failed to fetch notifications:",r),r}},Ru=async()=>{try{return(await q.get("/api/notifications/count")).data.data.count}catch(e){throw console.error("Failed to fetch notification count:",e),e}},Ou=async e=>{try{await q.put(`/api/notifications/${e}/read`)}catch(t){throw console.error("Failed to mark notification as read:",t),t}},ku=async()=>{try{await q.put("/api/notifications/read-all")}catch(e){throw console.error("Failed to mark all notifications as read:",e),e}},Bu=async e=>{try{await q.delete(`/api/notifications/${e}`)}catch(t){throw console.error("Failed to delete notification:",t),t}},Lu=e=>{const t=new Date(e),a=new Date().getTime()-t.getTime(),i=Math.floor(a/(1e3*60*60*24)),n=Math.floor(a/(1e3*60*60)),o=Math.floor(a/(1e3*60));return i>0?`${i} day${i>1?"s":""} ago`:n>0?`${n} hour${n>1?"s":""} ago`:o>0?`${o} minute${o>1?"s":""} ago`:"Just now"},ju=e=>{switch(e){case"COMMENT":return"";case"TASK_ASSIGNED":return"";case"TASK_UPDATED":return"";case"PROJECT_INVITE":return"";case"MENTION":return"";default:return""}},Mu=e=>{switch(e){case"COMMENT":return"text-blue-600";case"TASK_ASSIGNED":return"text-green-600";case"TASK_UPDATED":return"text-yellow-600";case"PROJECT_INVITE":return"text-purple-600";case"MENTION":return"text-orange-600";default:return"text-gray-600"}},Fu=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(0),[i,n]=w.useState(!1),[o,l]=w.useState(!1);w.useEffect(()=>{d(),i&&u()},[i]);const d=async()=>{try{const h=await Ru();a(h)}catch(h){console.error("Failed to load notification count:",h)}},u=async()=>{try{l(!0);const h=await Au(!1,20);t(h)}catch(h){console.error("Failed to load notifications:",h),O.error("Failed to load notifications")}finally{l(!1)}},p=async h=>{try{await Ou(h),await d(),t(v=>v.map(x=>x.id===h?{...x,readAt:new Date().toISOString()}:x))}catch(v){console.error("Failed to mark notification as read:",v),O.error("Failed to mark notification as read")}},m=async()=>{try{await ku(),await d(),t(h=>h.map(v=>({...v,readAt:new Date().toISOString()}))),O.success("All notifications marked as read")}catch(h){console.error("Failed to mark all notifications as read:",h),O.error("Failed to mark all notifications as read")}},f=async h=>{try{await Bu(h),t(v=>v.filter(x=>x.id!==h)),await d(),O.success("Notification deleted")}catch(v){console.error("Failed to delete notification:",v),O.error("Failed to delete notification")}},g=h=>{var v,x,y;switch(h.readAt||p(h.id),h.type){case"TASK_ASSIGNED":case"TASK_UPDATED":(v=h.data)!=null&&v.taskId&&(window.location.href=`/tasks/${h.data.taskId}`);break;case"PROJECT_INVITE":(x=h.data)!=null&&x.projectId&&(window.location.href=`/projects/${h.data.projectId}`);break;case"MENTION":if((y=h.data)!=null&&y.commentId)break;break}},b=e.filter(h=>!h.readAt);return c("div",{className:"relative",children:[c("button",{onClick:()=>n(!i),className:"relative p-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s(Hn,{className:"w-6 h-6"}),r>0&&s("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:r>99?"99+":r})]}),i&&c("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[c("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),c("div",{className:"flex items-center space-x-2",children:[b.length>0&&s("button",{onClick:m,className:"text-sm text-primary-600 hover:text-primary-700",children:"Mark all read"}),s("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:s(Qe,{className:"w-4 h-4"})})]})]}),s("div",{className:"max-h-96 overflow-y-auto",children:o?s("div",{className:"flex items-center justify-center py-8",children:s("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"})}):e.length===0?c("div",{className:"text-center py-8 text-gray-500",children:[s(Hn,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s("p",{children:"No notifications"})]}):s("div",{className:"divide-y divide-gray-200",children:e.map(h=>s("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${h.readAt?"":"bg-blue-50"}`,onClick:()=>g(h),children:c("div",{className:"flex items-start space-x-3",children:[s("div",{className:"flex-shrink-0 mt-1",children:s("span",{className:"text-lg",children:ju(h.type)})}),c("div",{className:"flex-1 min-w-0",children:[c("div",{className:"flex items-center justify-between",children:[s("p",{className:`text-sm font-medium ${Mu(h.type)}`,children:h.title}),c("div",{className:"flex items-center space-x-1",children:[!h.readAt&&s("button",{onClick:v=>{v.stopPropagation(),p(h.id)},className:"text-gray-400 hover:text-gray-600",children:s(gl,{className:"w-4 h-4"})}),s("button",{onClick:v=>{v.stopPropagation(),f(h.id)},className:"text-gray-400 hover:text-red-600",children:s(Et,{className:"w-4 h-4"})})]})]}),s("p",{className:"text-sm text-gray-600 mt-1",children:h.message}),s("p",{className:"text-xs text-gray-400 mt-2",children:Lu(h.createdAt)})]})]})},h.id))})}),e.length>0&&s("div",{className:"p-4 border-t border-gray-200",children:s("button",{onClick:()=>{window.location.href="/notifications"},className:"w-full text-sm text-primary-600 hover:text-primary-700 text-center",children:"View all notifications"})})]}),i&&s("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)})]})},$u=()=>{const{user:e,logout:t}=Ne(),[r,a]=w.useState(!1),i=async()=>{await t()};return c("header",{className:"sticky top-0 z-40 w-full border-b border-white/20 bg-white/80 backdrop-blur-xl",children:[c("div",{className:"flex h-16 items-center justify-between px-6",children:[c("div",{className:"flex items-center space-x-6",children:[c("div",{className:"flex items-center space-x-3",children:[s("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-r from-primary-600 to-purple-600 shadow-lg",children:s("span",{className:"text-lg font-bold text-white",children:"PM"})}),c("div",{className:"hidden sm:block",children:[s("h1",{className:"text-xl font-bold text-gradient-primary",children:"Project Management"}),s("p",{className:"text-xs text-gray-500",children:"Dashboard"})]})]}),s("div",{className:"hidden md:flex items-center space-x-2",children:c("div",{className:"relative",children:[s(yt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),s("input",{type:"text",placeholder:"Search projects, tasks...",className:"h-10 w-64 rounded-xl border border-gray-200 bg-white/80 px-10 py-2 text-sm placeholder:text-gray-400 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500/20 transition-all duration-200"})]})})]}),c("div",{className:"flex items-center space-x-4",children:[s("button",{onClick:()=>a(!r),className:"md:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/80 rounded-xl transition-all duration-200",children:s(yt,{className:"h-5 w-5"})}),s("div",{className:"relative",children:s(Fu,{})}),c("div",{className:"flex items-center space-x-3",children:[c("div",{className:"flex items-center space-x-3 rounded-xl bg-white/60 px-3 py-2 backdrop-blur-sm border border-white/20",children:[c("div",{className:"relative",children:[s("img",{src:(e==null?void 0:e.avatar)||`https://ui-avatars.com/api/?name=${e==null?void 0:e.name}&background=0ea5e9&color=fff&size=128`,alt:e==null?void 0:e.name,className:"h-8 w-8 rounded-lg object-cover ring-2 ring-white/50"}),s("div",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full bg-success-500 border-2 border-white"})]}),c("div",{className:"hidden sm:block",children:[s("p",{className:"text-sm font-medium text-gray-900",children:e==null?void 0:e.name}),s("p",{className:"text-xs text-gray-500",children:e==null?void 0:e.role})]})]}),c("div",{className:"flex items-center space-x-1",children:[s("button",{className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/80 rounded-xl transition-all duration-200 focus-ring",children:s(Ce,{className:"h-5 w-5"})}),s("button",{className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/80 rounded-xl transition-all duration-200 focus-ring",children:s(rs,{className:"h-5 w-5"})}),s("button",{onClick:i,className:"p-2 text-gray-600 hover:text-danger-600 hover:bg-danger-50/80 rounded-xl transition-all duration-200 focus-ring",title:"Logout",children:s(hl,{className:"h-5 w-5"})})]})]})]})]}),r&&s("div",{className:"border-t border-gray-100/50 bg-white/90 backdrop-blur-sm px-6 py-3 md:hidden",children:c("div",{className:"relative",children:[s(yt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),s("input",{type:"text",placeholder:"Search projects, tasks...",className:"h-10 w-full rounded-xl border border-gray-200 bg-white/80 px-10 py-2 text-sm placeholder:text-gray-400 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500/20 transition-all duration-200",autoFocus:!0})]})})]})},Uu=()=>c("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[s($u,{}),c("div",{className:"flex h-[calc(100vh-4rem)]",children:[s(Kd,{}),s("main",{className:"flex-1 overflow-auto",children:s("div",{className:"p-6",children:s(ll,{})})})]})]}),Gu=()=>{const e=Ka(),{login:t,isLoading:r,error:a,clearError:i}=Ne(),[n,o]=w.useState(!1),[l,d]=w.useState({email:"",password:""}),u=async m=>{var f,g;m.preventDefault(),i();try{await t(l.email,l.password),Xe.success("Login successful!"),e("/dashboard")}catch(b){Xe.error(((g=(f=b.response)==null?void 0:f.data)==null?void 0:g.message)||"Login failed")}},p=m=>{d({...l,[m.target.name]:m.target.value})};return c("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[c("div",{className:"absolute inset-0 overflow-hidden",children:[s("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary-400/20 to-purple-400/20 rounded-full blur-3xl"}),s("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-indigo-400/20 to-blue-400/20 rounded-full blur-3xl"}),s("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-purple-400/10 to-pink-400/10 rounded-full blur-3xl"})]}),c("div",{className:"max-w-md w-full space-y-8 relative z-10",children:[c("div",{className:"text-center",children:[s("div",{className:"flex justify-center mb-6",children:s("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-r from-primary-600 to-purple-600 shadow-xl",children:s(Mr,{className:"h-8 w-8 text-white"})})}),s("h2",{className:"text-4xl font-bold text-gradient-primary mb-2",children:"Welcome Back"}),s("p",{className:"text-lg text-gray-600 mb-6",children:"Sign in to your project management dashboard"}),c("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:[s(qn,{className:"h-4 w-4 text-primary-500"}),s("span",{children:"Secure & Fast"}),s(qn,{className:"h-4 w-4 text-purple-500"})]})]}),s("div",{className:"card p-8",children:c("form",{className:"space-y-6",onSubmit:u,children:[c("div",{className:"space-y-4",children:[c("div",{children:[s("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),c("div",{className:"relative",children:[s("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:s(Xt,{className:"h-5 w-5 text-gray-400"})}),s("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l.email,onChange:p,className:"input pl-12",placeholder:"Enter your email"})]})]}),c("div",{children:[s("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),c("div",{className:"relative",children:[s("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:s(Za,{className:"h-5 w-5 text-gray-400"})}),s("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:l.password,onChange:p,className:"input pl-12 pr-12",placeholder:"Enter your password"}),s("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:text-gray-600 transition-colors",onClick:()=>o(!n),children:n?s(as,{className:"h-5 w-5 text-gray-400"}):s(Zt,{className:"h-5 w-5 text-gray-400"})})]})]})]}),a&&s("div",{className:"p-4 rounded-xl bg-danger-50 border border-danger-200",children:s("p",{className:"text-danger-600 text-sm text-center",children:a})}),s("div",{children:s("button",{type:"submit",disabled:r,className:"btn-primary w-full h-12 text-base font-semibold group",children:r?c("div",{className:"flex items-center justify-center",children:[s("div",{className:"spinner w-5 h-5 mr-2"}),"Signing in..."]}):c("div",{className:"flex items-center justify-center",children:["Sign in",s(vl,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]})})}),s("div",{className:"text-center",children:c("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",s(Ya,{to:"/register",className:"font-semibold text-gradient-primary hover:underline transition-all duration-200",children:"Create one now"})]})})]})}),c("div",{className:"card p-4",children:[s("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Demo Credentials"}),c("div",{className:"space-y-2 text-xs text-gray-600",children:[c("div",{className:"flex justify-between",children:[s("span",{children:"Admin:"}),s("span",{className:"font-mono",children:"admin@projectmanagement.com / admin123"})]}),c("div",{className:"flex justify-between",children:[s("span",{children:"Manager:"}),s("span",{className:"font-mono",children:"pm@projectmanagement.com / pm123"})]}),c("div",{className:"flex justify-between",children:[s("span",{children:"User:"}),s("span",{className:"font-mono",children:"user@projectmanagement.com / user123"})]})]})]})]})]})},Wu=()=>{const e=Ka(),{register:t,isLoading:r,error:a,clearError:i}=Ne(),[n,o]=w.useState(!1),[l,d]=w.useState({name:"",email:"",password:""}),u=async m=>{var f,g;m.preventDefault(),i();try{await t(l.name,l.email,l.password),Xe.success("Registration successful!"),e("/dashboard")}catch(b){Xe.error(((g=(f=b.response)==null?void 0:f.data)==null?void 0:g.message)||"Registration failed")}},p=m=>{d({...l,[m.target.name]:m.target.value})};return s("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 py-12 px-4 sm:px-6 lg:px-8",children:c("div",{className:"max-w-md w-full space-y-8",children:[c("div",{children:[s("h2",{className:"mt-6 text-center text-3xl font-extrabold text-secondary-900",children:"Create your account"}),c("p",{className:"mt-2 text-center text-sm text-secondary-600",children:["Or"," ",s(Ya,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"sign in to your existing account"})]})]}),c("form",{className:"mt-8 space-y-6",onSubmit:u,children:[c("div",{className:"space-y-4",children:[c("div",{children:[s("label",{htmlFor:"name",className:"block text-sm font-medium text-secondary-700",children:"Full name"}),c("div",{className:"mt-1 relative",children:[s("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s(Ce,{className:"h-5 w-5 text-secondary-400"})}),s("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:l.name,onChange:p,className:"input pl-10",placeholder:"Enter your full name"})]})]}),c("div",{children:[s("label",{htmlFor:"email",className:"block text-sm font-medium text-secondary-700",children:"Email address"}),c("div",{className:"mt-1 relative",children:[s("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s(Xt,{className:"h-5 w-5 text-secondary-400"})}),s("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l.email,onChange:p,className:"input pl-10",placeholder:"Enter your email"})]})]}),c("div",{children:[s("label",{htmlFor:"password",className:"block text-sm font-medium text-secondary-700",children:"Password"}),c("div",{className:"mt-1 relative",children:[s("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s(Za,{className:"h-5 w-5 text-secondary-400"})}),s("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"new-password",required:!0,value:l.password,onChange:p,className:"input pl-10 pr-10",placeholder:"Enter your password"}),s("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>o(!n),children:n?s(as,{className:"h-5 w-5 text-secondary-400"}):s(Zt,{className:"h-5 w-5 text-secondary-400"})})]})]})]}),a&&s("div",{className:"text-danger-600 text-sm text-center",children:a}),s("div",{children:s("button",{type:"submit",disabled:r,className:"btn-primary w-full",children:r?"Creating account...":"Create account"})})]})]})})},Hu=({projectStats:e,loading:t=!1})=>{if(t)return s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(8)].map((a,i)=>s("div",{className:"card p-6 animate-pulse",children:c("div",{className:"flex items-center justify-between",children:[c("div",{className:"space-y-2 flex-1",children:[s("div",{className:"h-4 bg-gray-200 rounded-full w-3/4"}),s("div",{className:"h-8 bg-gray-200 rounded-full w-1/2"})]}),s("div",{className:"h-12 w-12 bg-gray-200 rounded-xl"})]})},i))});const r=[{title:"Total Projects",value:e.totalProjects,icon:Wt,gradient:"from-blue-500 to-blue-600",bgGradient:"from-blue-50 to-blue-100",description:"All projects"},{title:"Active Projects",value:e.activeProjects,icon:ns,gradient:"from-green-500 to-green-600",bgGradient:"from-green-50 to-green-100",description:"In progress"},{title:"Total Tasks",value:e.totalTasks,icon:dt,gradient:"from-purple-500 to-purple-600",bgGradient:"from-purple-50 to-purple-100",description:"All tasks"},{title:"Completed Tasks",value:e.completedTasks,icon:bl,gradient:"from-emerald-500 to-emerald-600",bgGradient:"from-emerald-50 to-emerald-100",description:"Finished"},{title:"Overdue Tasks",value:e.overdueTasks,icon:Qa,gradient:"from-red-500 to-red-600",bgGradient:"from-red-50 to-red-100",description:"Past deadline"},{title:"Total Users",value:e.totalUsers,icon:ct,gradient:"from-indigo-500 to-indigo-600",bgGradient:"from-indigo-50 to-indigo-100",description:"Team members"},{title:"Completion Rate",value:`${e.completionRate}%`,icon:yl,gradient:"from-orange-500 to-orange-600",bgGradient:"from-orange-50 to-orange-100",description:"Success rate"},{title:"Completed Projects",value:e.completedProjects,icon:dt,gradient:"from-teal-500 to-teal-600",bgGradient:"from-teal-50 to-teal-100",description:"Finished projects"}];return s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:r.map((a,i)=>{const n=a.icon;return c("div",{className:"card p-6 hover-lift group cursor-pointer",style:{animationDelay:`${i*100}ms`},children:[c("div",{className:"flex items-center justify-between",children:[c("div",{className:"flex-1",children:[s("p",{className:"text-sm font-medium text-gray-600 mb-1 group-hover:text-gray-700 transition-colors",children:a.title}),s("p",{className:"text-3xl font-bold text-gradient-primary mb-1",children:a.value}),s("p",{className:"text-xs text-gray-500",children:a.description})]}),s("div",{className:`p-4 rounded-xl bg-gradient-to-br ${a.bgGradient} border border-white/50 shadow-soft group-hover:shadow-medium transition-all duration-300`,children:s("div",{className:`p-2 rounded-lg bg-gradient-to-r ${a.gradient} shadow-lg`,children:s(n,{className:"w-6 h-6 text-white"})})})]}),a.title==="Completion Rate"&&c("div",{className:"mt-4",children:[s("div",{className:"progress-bar",children:s("div",{className:"progress-fill",style:{width:`${e.completionRate}%`}})}),s("p",{className:"text-xs text-gray-500 mt-1",children:e.completionRate>=80?"Excellent":e.completionRate>=60?"Good":e.completionRate>=40?"Fair":"Needs Improvement"})]})]},i)})})},qu=({projects:e,loading:t=!1})=>{if(t)return c("div",{className:"bg-white rounded-lg shadow p-6",children:[c("div",{className:"flex items-center justify-between mb-4",children:[s("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Progress"}),s("div",{className:"h-4 w-20 bg-gray-200 rounded animate-pulse"})]}),s("div",{className:"space-y-4",children:[...Array(3)].map((o,l)=>c("div",{className:"animate-pulse",children:[c("div",{className:"flex justify-between items-center mb-2",children:[s("div",{className:"h-4 bg-gray-200 rounded w-32"}),s("div",{className:"h-4 bg-gray-200 rounded w-16"})]}),s("div",{className:"w-full bg-gray-200 rounded-full h-2"})]},l))})]});const r=o=>{switch(o){case"ACTIVE":return"text-green-600 bg-green-50 border-green-200";case"COMPLETED":return"text-blue-600 bg-blue-50 border-blue-200";case"ARCHIVED":return"text-gray-600 bg-gray-50 border-gray-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},a=o=>{switch(o){case"ACTIVE":return ve;case"COMPLETED":return dt;case"ARCHIVED":return Wt;default:return ve}},i=o=>o?new Date(o)<new Date:!1,n=o=>o>=80?"bg-green-500":o>=60?"bg-yellow-500":o>=40?"bg-orange-500":"bg-red-500";return c("div",{className:"bg-white rounded-lg shadow p-6",children:[c("div",{className:"flex items-center justify-between mb-6",children:[s("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Progress"}),c("span",{className:"text-sm text-gray-500",children:[e.length," projects"]})]}),s("div",{className:"space-y-4",children:e.length===0?c("div",{className:"text-center py-8",children:[s(Wt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s("p",{className:"text-gray-500",children:"No projects found"})]}):e.map(o=>{const l=a(o.status),d=i(o.dueDate);return c("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:[c("div",{className:"flex items-center justify-between mb-3",children:[c("div",{className:"flex items-center space-x-3",children:[s("div",{className:`p-2 rounded-full border ${r(o.status)}`,children:s(l,{className:"w-4 h-4"})}),c("div",{children:[s("h4",{className:"font-medium text-gray-900",children:o.name}),c("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[c("span",{children:[o.completedTasks,"/",o.totalTasks," tasks"]}),d&&c("div",{className:"flex items-center text-red-600",children:[s(Qa,{className:"w-3 h-3 mr-1"}),s("span",{children:"Overdue"})]})]})]})]}),c("div",{className:"text-right",children:[c("span",{className:"text-lg font-semibold text-gray-900",children:[o.progress,"%"]}),s("div",{className:"text-xs text-gray-500 capitalize",children:o.status.toLowerCase()})]})]}),s("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s("div",{className:`h-2 rounded-full transition-all duration-300 ${n(o.progress)}`,style:{width:`${o.progress}%`}})}),o.dueDate&&c("div",{className:"mt-2 text-xs text-gray-500",children:["Due: ",new Date(o.dueDate).toLocaleDateString()]})]},o.id)})})]})},Vu=({activities:e,loading:t=!1})=>{const r=n=>{switch(n){case"project_created":return s(ut,{className:"w-4 h-4 text-green-600"});case"project_updated":return s(xt,{className:"w-4 h-4 text-blue-600"});case"project_deleted":return s(Et,{className:"w-4 h-4 text-red-600"});case"task_created":return s(ut,{className:"w-4 h-4 text-purple-600"});case"task_updated":return s(xt,{className:"w-4 h-4 text-orange-600"});case"task_completed":return s(dt,{className:"w-4 h-4 text-green-600"});case"user_joined":return s(Ce,{className:"w-4 h-4 text-indigo-600"});case"comment_added":return s(Ra,{className:"w-4 h-4 text-gray-600"});default:return s(ve,{className:"w-4 h-4 text-gray-600"})}},a=n=>{switch(n){case"project_created":case"task_completed":return"bg-green-50 border-green-200";case"project_updated":case"task_updated":return"bg-blue-50 border-blue-200";case"project_deleted":return"bg-red-50 border-red-200";case"task_created":return"bg-purple-50 border-purple-200";case"user_joined":return"bg-indigo-50 border-indigo-200";case"comment_added":return"bg-gray-50 border-gray-200";default:return"bg-gray-50 border-gray-200"}},i=n=>{const o=new Date(n),d=Math.floor((new Date().getTime()-o.getTime())/(1e3*60));return d<1?"Just now":d<60?`${d} minutes ago`:d<1440?`${Math.floor(d/60)} hours ago`:o.toLocaleDateString()};return t?c("div",{className:"bg-white rounded-lg shadow p-6",children:[s("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),s("div",{className:"space-y-4",children:[...Array(5)].map((n,o)=>c("div",{className:"flex items-start space-x-3 animate-pulse",children:[s("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),c("div",{className:"flex-1",children:[s("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},o))})]}):c("div",{className:"bg-white rounded-lg shadow p-6",children:[c("div",{className:"flex items-center justify-between mb-6",children:[s("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),c("span",{className:"text-sm text-gray-500",children:[e.length," activities"]})]}),s("div",{className:"space-y-4",children:e.length===0?c("div",{className:"text-center py-8",children:[s(ve,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s("p",{className:"text-gray-500",children:"No recent activity"})]}):e.map(n=>c("div",{className:`flex items-start space-x-3 p-3 rounded-lg border ${a(n.type)}`,children:[s("div",{className:"flex-shrink-0 mt-1",children:r(n.type)}),c("div",{className:"flex-1 min-w-0",children:[s("p",{className:"text-sm font-medium text-gray-900 mb-1",children:n.title}),s("p",{className:"text-sm text-gray-600 mb-2",children:n.description}),c("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[c("div",{className:"flex items-center space-x-2",children:[s(Ce,{className:"w-3 h-3"}),s("span",{children:n.user.name}),n.project&&c(Ye,{children:[s("span",{children:""}),s(Wt,{className:"w-3 h-3"}),s("span",{children:n.project.name})]}),n.task&&c(Ye,{children:[s("span",{children:""}),s(dt,{className:"w-3 h-3"}),s("span",{children:n.task.name})]})]}),c("div",{className:"flex items-center space-x-1",children:[s(pe,{className:"w-3 h-3"}),s("span",{children:i(n.timestamp)})]})]})]})]},n.id))})]})},tt=({size:e="md",color:t="primary",text:r})=>{const a={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},i={primary:"border-primary-600",white:"border-white",gray:"border-gray-600"};return c("div",{className:"flex flex-col items-center justify-center space-y-3",children:[s("div",{className:`spinner ${a[e]} ${i[t]}`}),r&&s("p",{className:"text-sm text-gray-600 font-medium",children:r})]})},zu=()=>{const[e,t]=w.useState(null),[r,a]=w.useState(!0),[i,n]=w.useState(null);w.useEffect(()=>{o()},[]);const o=async()=>{var l,d,u;try{a(!0),n(null);const p=await fetch("/api/projects/stats",{headers:{Authorization:`Bearer ${(l=JSON.parse(localStorage.getItem("auth-storage")||"{}").state)==null?void 0:l.token}`}}),m=await fetch("/api/tasks/stats",{headers:{Authorization:`Bearer ${(d=JSON.parse(localStorage.getItem("auth-storage")||"{}").state)==null?void 0:d.token}`}}),f=await fetch("/api/projects",{headers:{Authorization:`Bearer ${(u=JSON.parse(localStorage.getItem("auth-storage")||"{}").state)==null?void 0:u.token}`}});if(!p.ok||!m.ok||!f.ok)throw new Error("Failed to load dashboard data");const g=await p.json(),b=await m.json(),h=await f.json(),v={totalProjects:g.data.stats.totalProjects||0,activeProjects:g.data.stats.activeProjects||0,completedProjects:g.data.stats.completedProjects||0,totalTasks:b.data.stats.totalTasks||0,completedTasks:b.data.stats.doneTasks||0,overdueTasks:b.data.stats.overdueTasks||0,totalUsers:g.data.stats.totalUsers||0,completionRate:b.data.stats.completionRate||0},x=h.data.projects.map(N=>({id:N.id,name:N.name,status:N.status,progress:N.progress||0,totalTasks:N.totalTasks||0,completedTasks:N.completedTasks||0,dueDate:N.endDate})),y=[{id:"1",type:"project_created",title:"New project created",description:'Project "Website Redesign" was created',timestamp:new Date(Date.now()-1e3*60*30).toISOString(),user:{name:"Admin User",email:"admin@projectmanagement.com"},project:{name:"Website Redesign",id:"1"}},{id:"2",type:"task_completed",title:"Task completed",description:'Task "Design Homepage" was marked as completed',timestamp:new Date(Date.now()-1e3*60*60*2).toISOString(),user:{name:"Admin User",email:"admin@projectmanagement.com"},task:{name:"Design Homepage",id:"1"}}];t({projectStats:v,projects:x,activities:y})}catch(p){console.error("Failed to load dashboard data:",p),n(p.message||"Failed to load dashboard data"),O.error("Failed to load dashboard data")}finally{a(!1)}};return r?s(tt,{}):i?c("div",{className:"text-center py-12",children:[c("div",{className:"text-red-600 mb-4",children:[s("h3",{className:"text-lg font-semibold",children:"Error loading dashboard"}),s("p",{className:"text-sm",children:i})]}),s("button",{onClick:o,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Retry"})]}):e?c("div",{className:"space-y-6",children:[c("div",{children:[s("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s("p",{className:"text-gray-600",children:"Welcome to your project management dashboard"})]}),s(Hu,{projectStats:e.projectStats,loading:r}),s("div",{children:s(qu,{projects:e.projects,loading:r})}),c("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s(Vu,{activities:e.activities,loading:r}),c("div",{className:"bg-white rounded-lg shadow p-6",children:[s("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Task Summary"}),c("div",{className:"space-y-4",children:[c("div",{className:"flex justify-between items-center",children:[s("span",{className:"text-sm text-gray-600",children:"Total Tasks"}),s("span",{className:"font-semibold",children:e.projectStats.totalTasks})]}),c("div",{className:"flex justify-between items-center",children:[s("span",{className:"text-sm text-gray-600",children:"Completed"}),s("span",{className:"font-semibold text-green-600",children:e.projectStats.completedTasks})]}),c("div",{className:"flex justify-between items-center",children:[s("span",{className:"text-sm text-gray-600",children:"Overdue"}),s("span",{className:"font-semibold text-red-600",children:e.projectStats.overdueTasks})]}),c("div",{className:"flex justify-between items-center",children:[s("span",{className:"text-sm text-gray-600",children:"Completion Rate"}),c("span",{className:"font-semibold text-blue-600",children:[e.projectStats.completionRate,"%"]})]})]})]})]})]}):s("div",{className:"text-center py-12",children:s("p",{className:"text-gray-500",children:"No dashboard data available"})})},_u={}.VITE_API_URL||"/api",qe=q.create({baseURL:_u,headers:{"Content-Type":"application/json"}});qe.interceptors.request.use(e=>{var r;const t=localStorage.getItem("auth-storage");if(t)try{const a=JSON.parse(t);(r=a.state)!=null&&r.token&&(e.headers.Authorization=`Bearer ${a.state.token}`)}catch(a){console.error("Error parsing auth token:",a)}return e},e=>Promise.reject(e));qe.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("auth-storage"),window.location.href="/login"),Promise.reject(e)});const nt={async getProjects(e={}){const t=new URLSearchParams;return e.search&&t.append("search",e.search),e.status&&t.append("status",e.status),e.page&&t.append("page",e.page.toString()),e.limit&&t.append("limit",e.limit.toString()),(await qe.get(`/projects?${t.toString()}`)).data.data},async getProjectById(e){return(await qe.get(`/projects/${e}`)).data.data.project},async createProject(e){return(await qe.post("/projects",e)).data.data.project},async updateProject(e,t){return(await qe.put(`/projects/${e}`,t)).data.data.project},async deleteProject(e){await qe.delete(`/projects/${e}`)},async getProjectStats(){return(await qe.get("/projects/stats")).data.data}},Ju=tn((e,t)=>({projects:[],selectedProject:null,stats:null,pagination:{page:1,limit:10,total:0,totalPages:0},filters:{},isLoading:!1,error:null,fetchProjects:async(r={})=>{var a,i;try{e({isLoading:!0,error:null});const n=await nt.getProjects({...t().filters,...r});e({projects:n.projects,pagination:n.pagination,isLoading:!1})}catch(n){e({error:((i=(a=n.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to fetch projects",isLoading:!1})}},fetchProjectById:async r=>{var a,i;try{e({isLoading:!0,error:null});const n=await nt.getProjectById(r);e({selectedProject:n,isLoading:!1})}catch(n){e({error:((i=(a=n.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to fetch project",isLoading:!1})}},createProject:async r=>{var a,i;try{e({isLoading:!0,error:null});const n=await nt.createProject(r);e(o=>({projects:[n,...o.projects],isLoading:!1}))}catch(n){throw e({error:((i=(a=n.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to create project",isLoading:!1}),n}},updateProject:async(r,a)=>{var i,n;try{e({isLoading:!0,error:null});const o=await nt.updateProject(r,a);e(l=>{var d;return{projects:l.projects.map(u=>u.id===r?o:u),selectedProject:((d=l.selectedProject)==null?void 0:d.id)===r?o:l.selectedProject,isLoading:!1}})}catch(o){throw e({error:((n=(i=o.response)==null?void 0:i.data)==null?void 0:n.message)||"Failed to update project",isLoading:!1}),o}},deleteProject:async r=>{var a,i;try{e({isLoading:!0,error:null}),await nt.deleteProject(r),e(n=>{var o;return{projects:n.projects.filter(l=>l.id!==r),selectedProject:((o=n.selectedProject)==null?void 0:o.id)===r?null:n.selectedProject,isLoading:!1}})}catch(n){throw e({error:((i=(a=n.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to delete project",isLoading:!1}),n}},fetchProjectStats:async()=>{var r,a;try{e({isLoading:!0,error:null});const i=await nt.getProjectStats();e({stats:i.stats,isLoading:!1})}catch(i){e({error:((a=(r=i.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch project statistics",isLoading:!1})}},setSelectedProject:r=>{e({selectedProject:r})},updateFilters:r=>{e(a=>({filters:{...a.filters,...r}}))},clearError:()=>{e({error:null})},setLoading:r=>{e({isLoading:r})}})),ci=({isOpen:e,onClose:t,project:r,onSubmit:a,isLoading:i=!1})=>{const[n,o]=w.useState({name:"",description:"",status:"ACTIVE",startDate:"",endDate:""});w.useEffect(()=>{o(r?{name:r.name,description:r.description||"",status:r.status,startDate:r.startDate?r.startDate.split("T")[0]:"",endDate:r.endDate?r.endDate.split("T")[0]:""}:{name:"",description:"",status:"ACTIVE",startDate:"",endDate:""})},[r]);const l=async d=>{d.preventDefault();try{await a(n),t()}catch{}};return e?c("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:t}),c("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[c("div",{className:"flex items-center justify-between p-6 border-b",children:[s("h2",{className:"text-xl font-semibold text-gray-900",children:r?"Edit Project":"Create New Project"}),s("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s(Qe,{size:24})})]}),c("form",{onSubmit:l,className:"p-6 space-y-6",children:[c("div",{children:[s("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name *"}),s("input",{type:"text",id:"name",required:!0,value:n.name,onChange:d=>o(u=>({...u,name:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter project name"})]}),c("div",{children:[s("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s("textarea",{id:"description",rows:3,value:n.description,onChange:d=>o(u=>({...u,description:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter project description"})]}),c("div",{children:[s("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),c("select",{id:"status",value:n.status,onChange:d=>o(u=>({...u,status:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s("option",{value:"ACTIVE",children:"Active"}),s("option",{value:"ARCHIVED",children:"Archived"}),s("option",{value:"COMPLETED",children:"Completed"})]})]}),c("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c("div",{children:[s("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s("input",{type:"date",id:"startDate",value:n.startDate,onChange:d=>o(u=>({...u,startDate:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),c("div",{children:[s("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s("input",{type:"date",id:"endDate",value:n.endDate,onChange:d=>o(u=>({...u,endDate:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),c("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",disabled:i,children:"Cancel"}),c("button",{type:"submit",disabled:i||!n.name.trim(),className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i?s(xl,{className:"w-4 h-4 mr-2 animate-spin"}):s(wl,{className:"w-4 h-4 mr-2"}),r?"Update Project":"Create Project"]})]})]})]})]}):null},Ku=({isOpen:e,onClose:t,project:r})=>{if(!e||!r)return null;const a=n=>{switch(n){case"ACTIVE":return"bg-green-100 text-green-800";case"ARCHIVED":return"bg-gray-100 text-gray-800";case"COMPLETED":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},i=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return c("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:t}),c("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[c("div",{className:"flex items-center justify-between p-6 border-b",children:[s("h2",{className:"text-xl font-semibold text-gray-900",children:"Project Details"}),s("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s(Qe,{size:24})})]}),c("div",{className:"p-6 space-y-6",children:[c("div",{className:"border-b pb-4",children:[s("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.name}),s("div",{className:"flex items-center gap-4 mb-4",children:s("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a(r.status)}`,children:r.status.replace("_"," ")})}),r.description&&s("p",{className:"text-gray-600",children:r.description})]}),c("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s("div",{className:"bg-blue-50 p-4 rounded-lg",children:c("div",{className:"flex items-center",children:[s(lt,{className:"w-5 h-5 text-blue-600 mr-2"}),c("div",{children:[s("p",{className:"text-sm text-blue-600 font-medium",children:"Progress"}),c("p",{className:"text-2xl font-bold text-blue-900",children:[r.progress,"%"]})]})]})}),s("div",{className:"bg-green-50 p-4 rounded-lg",children:c("div",{className:"flex items-center",children:[s(ct,{className:"w-5 h-5 text-green-600 mr-2"}),c("div",{children:[s("p",{className:"text-sm text-green-600 font-medium",children:"Tasks"}),s("p",{className:"text-2xl font-bold text-green-900",children:r.taskCount})]})]})}),s("div",{className:"bg-yellow-50 p-4 rounded-lg",children:c("div",{className:"flex items-center",children:[s(pe,{className:"w-5 h-5 text-yellow-600 mr-2"}),c("div",{children:[s("p",{className:"text-sm text-yellow-600 font-medium",children:"Completed"}),s("p",{className:"text-2xl font-bold text-yellow-900",children:r.completedTasks})]})]})})]}),c("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s("div",{className:"space-y-4",children:c("div",{children:[s("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Timeline"}),c("div",{className:"space-y-2",children:[r.startDate&&c("div",{className:"flex items-center text-sm",children:[s(pe,{className:"w-4 h-4 text-gray-500 mr-2"}),s("span",{className:"text-gray-600",children:"Start Date:"}),s("span",{className:"ml-2 font-medium",children:i(r.startDate)})]}),r.endDate&&c("div",{className:"flex items-center text-sm",children:[s(pe,{className:"w-4 h-4 text-gray-500 mr-2"}),s("span",{className:"text-gray-600",children:"End Date:"}),s("span",{className:"ml-2 font-medium",children:i(r.endDate)})]}),c("div",{className:"flex items-center text-sm",children:[s(pe,{className:"w-4 h-4 text-gray-500 mr-2"}),s("span",{className:"text-gray-600",children:"Created:"}),s("span",{className:"ml-2 font-medium",children:i(r.createdAt)})]})]})]})}),c("div",{className:"space-y-4",children:[c("div",{children:[s("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Task Breakdown"}),c("div",{className:"space-y-2",children:[c("div",{className:"flex justify-between items-center",children:[s("span",{className:"text-sm text-gray-600",children:"Completed"}),s("span",{className:"font-medium text-green-600",children:r.completedTasks})]}),c("div",{className:"flex justify-between items-center",children:[s("span",{className:"text-sm text-gray-600",children:"In Progress"}),s("span",{className:"font-medium text-yellow-600",children:r.inProgressTasks})]}),c("div",{className:"flex justify-between items-center",children:[s("span",{className:"text-sm text-gray-600",children:"To Do"}),s("span",{className:"font-medium text-gray-600",children:r.todoTasks})]})]})]}),c("div",{children:[s("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Progress"}),s("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${r.progress}%`}})}),c("p",{className:"text-sm text-gray-600 mt-1",children:[r.progress,"% complete"]})]})]})]}),r.members&&r.members.length>0&&c("div",{children:[s("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Team Members"}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:r.members.map(n=>c("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[s("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white font-medium mr-3",children:n.name.charAt(0).toUpperCase()}),c("div",{children:[s("p",{className:"font-medium text-gray-900",children:n.name}),s("p",{className:"text-sm text-gray-600",children:n.role})]})]},n.id))})]}),r.activities&&r.activities.length>0&&c("div",{children:[s("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Recent Activities"}),s("div",{className:"space-y-2",children:r.activities.slice(0,5).map((n,o)=>c("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[s("div",{className:"w-2 h-2 bg-primary-600 rounded-full mr-3"}),c("div",{className:"flex-1",children:[c("p",{className:"text-sm text-gray-900",children:[s("span",{className:"font-medium",children:n.userName})," ",n.type==="task"?"created":"updated",' task "',n.title,'"']}),s("p",{className:"text-xs text-gray-500",children:i(n.createdAt)})]})]},o))})]})]})]})]})},dn=({isOpen:e,onClose:t,onConfirm:r,title:a,message:i,confirmText:n="Confirm",cancelText:o="Cancel",variant:l="warning"})=>{if(!e)return null;const u=(()=>{switch(l){case"danger":return{icon:"text-red-600",button:"bg-red-600 hover:bg-red-700 focus:ring-red-500",iconBg:"bg-red-100"};case"warning":return{icon:"text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",iconBg:"bg-yellow-100"};case"info":return{icon:"text-blue-600",button:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",iconBg:"bg-blue-100"};default:return{icon:"text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",iconBg:"bg-yellow-100"}}})();return s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[c("div",{className:"flex items-center justify-between p-6 border-b",children:[c("div",{className:"flex items-center",children:[s("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${u.iconBg}`,children:s(Qa,{className:`w-5 h-5 ${u.icon}`})}),s("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:a})]}),s("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s(Qe,{className:"w-5 h-5"})})]}),s("div",{className:"p-6",children:s("p",{className:"text-sm text-gray-600",children:i})}),c("div",{className:"flex justify-end space-x-3 p-6 border-t",children:[s("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:o}),s("button",{onClick:r,className:`px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${u.button}`,children:n})]})]})})},un=({currentPage:e,totalPages:t,onPageChange:r})=>c("div",{className:"flex items-center justify-between",children:[c("div",{className:"flex items-center space-x-2",children:[s("button",{onClick:()=>r(e-1),disabled:e===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:s(Nl,{className:"w-4 h-4"})}),(()=>{const i=[];if(t<=5)for(let o=1;o<=t;o++)i.push(o);else if(e<=3){for(let o=1;o<=4;o++)i.push(o);i.push("..."),i.push(t)}else if(e>=t-2){i.push(1),i.push("...");for(let o=t-3;o<=t;o++)i.push(o)}else{i.push(1),i.push("...");for(let o=e-1;o<=e+1;o++)i.push(o);i.push("..."),i.push(t)}return i})().map((i,n)=>s("button",{onClick:()=>typeof i=="number"&&r(i),disabled:i==="...",className:`px-3 py-2 text-sm font-medium rounded-md ${i===e?"text-white bg-primary-600 border border-primary-600":i==="..."?"text-gray-400 cursor-default":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:i},n)),s("button",{onClick:()=>r(e+1),disabled:e===t,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:s(Sl,{className:"w-4 h-4"})})]}),c("div",{className:"text-sm text-gray-700",children:["Page ",e," of ",t]})]}),Yu=()=>{const{projects:e,stats:t,pagination:r,filters:a,isLoading:i,error:n,fetchProjects:o,fetchProjectStats:l,createProject:d,updateProject:u,deleteProject:p,setSelectedProject:m,updateFilters:f,clearError:g}=Ju();Ne();const[b,h]=w.useState(!1),[v,x]=w.useState(!1),[y,N]=w.useState(!1),[S,E]=w.useState(!1),[C,k]=w.useState(null),[B,T]=w.useState("");w.useEffect(()=>{o(),l()},[o,l]),w.useEffect(()=>{const P=setTimeout(()=>{f({search:B,page:1}),o({search:B,page:1})},500);return()=>clearTimeout(P)},[B,f,o]);const M=async P=>{try{await d(P),h(!1)}catch{}},j=async P=>{if(C)try{await u(C.id,P),x(!1),k(null)}catch{}},_=async()=>{if(C)try{await p(C.id),E(!1),k(null)}catch{}},Y=P=>{k(P),N(!0)},R=P=>{k(P),x(!0)},W=P=>{k(P),E(!0)},X=P=>{f({page:P}),o({page:P})},ce=P=>{switch(P){case"ACTIVE":return"bg-green-100 text-green-800";case"ARCHIVED":return"bg-gray-100 text-gray-800";case"COMPLETED":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},G=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return n?s("div",{className:"flex items-center justify-center min-h-[400px]",children:c("div",{className:"text-center",children:[s("p",{className:"text-red-600 mb-4",children:n}),s("button",{onClick:()=>{g(),o()},className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Try Again"})]})}):c("div",{className:"p-6",children:[c("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[c("div",{children:[s("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),s("p",{className:"text-gray-600",children:"Manage your projects and track progress"})]}),c("button",{onClick:()=>h(!0),className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors mt-4 sm:mt-0",children:[s(ut,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),t&&c("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s("div",{className:"bg-white p-4 rounded-lg shadow border",children:c("div",{className:"flex items-center",children:[s(lt,{className:"w-8 h-8 text-blue-600 mr-3"}),c("div",{children:[s("p",{className:"text-sm text-gray-600",children:"Total Projects"}),s("p",{className:"text-2xl font-bold text-gray-900",children:t.totalProjects})]})]})}),s("div",{className:"bg-white p-4 rounded-lg shadow border",children:c("div",{className:"flex items-center",children:[s(ct,{className:"w-8 h-8 text-green-600 mr-3"}),c("div",{children:[s("p",{className:"text-sm text-gray-600",children:"Active"}),s("p",{className:"text-2xl font-bold text-gray-900",children:t.activeProjects})]})]})}),s("div",{className:"bg-white p-4 rounded-lg shadow border",children:c("div",{className:"flex items-center",children:[s(pe,{className:"w-8 h-8 text-yellow-600 mr-3"}),c("div",{children:[s("p",{className:"text-sm text-gray-600",children:"Completed"}),s("p",{className:"text-2xl font-bold text-gray-900",children:t.completedProjects})]})]})}),s("div",{className:"bg-white p-4 rounded-lg shadow border",children:c("div",{className:"flex items-center",children:[s(Dl,{className:"w-8 h-8 text-purple-600 mr-3"}),c("div",{children:[s("p",{className:"text-sm text-gray-600",children:"Completion Rate"}),c("p",{className:"text-2xl font-bold text-gray-900",children:[t.avgCompletionRate,"%"]})]})]})})]}),s("div",{className:"bg-white p-4 rounded-lg shadow border mb-6",children:c("div",{className:"flex flex-col sm:flex-row gap-4",children:[s("div",{className:"flex-1",children:c("div",{className:"relative",children:[s(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s("input",{type:"text",placeholder:"Search projects...",value:B,onChange:P=>T(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),s("div",{className:"flex gap-2",children:c("select",{value:a.status||"",onChange:P=>{f({status:P.target.value||void 0,page:1}),o({status:P.target.value||void 0,page:1})},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s("option",{value:"",children:"All Status"}),s("option",{value:"ACTIVE",children:"Active"}),s("option",{value:"ARCHIVED",children:"Archived"}),s("option",{value:"COMPLETED",children:"Completed"})]})})]})}),i?s(tt,{}):s("div",{className:"bg-white rounded-lg shadow border",children:e.length===0?c("div",{className:"p-8 text-center",children:[s("p",{className:"text-gray-500 mb-4",children:"No projects found"}),s("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Create Your First Project"})]}):s("div",{className:"overflow-x-auto",children:c("table",{className:"w-full",children:[s("thead",{className:"bg-gray-50",children:c("tr",{children:[s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),s("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(P=>c("tr",{className:"hover:bg-gray-50",children:[s("td",{className:"px-6 py-4",children:c("div",{children:[s("div",{className:"text-sm font-medium text-gray-900",children:P.name}),P.description&&s("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:P.description})]})}),s("td",{className:"px-6 py-4",children:s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ce(P.status)}`,children:P.status.replace("_"," ")})}),s("td",{className:"px-6 py-4",children:c("div",{className:"flex items-center",children:[s("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:s("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${P.progress}%`}})}),c("span",{className:"text-sm text-gray-600",children:[P.progress,"%"]})]})}),s("td",{className:"px-6 py-4 text-sm text-gray-500",children:G(P.createdAt)}),s("td",{className:"px-6 py-4 text-right text-sm font-medium",children:c("div",{className:"flex items-center justify-end gap-2",children:[s("button",{onClick:()=>Y(P),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:s(Zt,{className:"w-4 h-4"})}),s("button",{onClick:()=>R(P),className:"text-green-600 hover:text-green-900",title:"Edit Project",children:s(xt,{className:"w-4 h-4"})}),s("button",{onClick:()=>W(P),className:"text-red-600 hover:text-red-900",title:"Delete Project",children:s(Et,{className:"w-4 h-4"})})]})})]},P.id))})]})})}),r.totalPages>1&&s("div",{className:"mt-6",children:s(un,{currentPage:r.page,totalPages:r.totalPages,onPageChange:X})}),s(ci,{isOpen:b,onClose:()=>h(!1),onSubmit:M,isLoading:i}),s(ci,{isOpen:v,onClose:()=>{x(!1),k(null)},project:C,onSubmit:j,isLoading:i}),s(Ku,{isOpen:y,onClose:()=>{N(!1),k(null)},project:C}),s(dn,{isOpen:S,onClose:()=>{E(!1),k(null)},onConfirm:_,title:"Delete Project",message:`Are you sure you want to delete "${C==null?void 0:C.name}"? This action cannot be undone.`,confirmText:"Delete",confirmColor:"red"})]})},Xu={}.VITE_API_URL||"/api",st=q.create({baseURL:Xu,headers:{"Content-Type":"application/json"}});st.interceptors.request.use(e=>{var r;const t=localStorage.getItem("auth-storage");if(t)try{const a=JSON.parse(t);(r=a.state)!=null&&r.token&&(e.headers.Authorization=`Bearer ${a.state.token}`)}catch(a){console.error("Error parsing auth token:",a)}return e},e=>Promise.reject(e));st.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("auth-storage"),window.location.href="/login"),Promise.reject(e)});const Ft={async updateUserRole(e,t){return(await st.put(`/roles/users/${e}`,t)).data.data},async getProjectMembers(e){return(await st.get(`/roles/projects/${e}/members`)).data.data.members},async addProjectMember(e,t){return(await st.post(`/roles/projects/${e}/members`,t)).data.data},async updateProjectMemberRole(e,t,r){return(await st.put(`/roles/projects/${e}/members/${t}`,r)).data.data},async removeProjectMember(e,t){await st.delete(`/roles/projects/${e}/members/${t}`)}},Zu=({projectId:e,onMemberUpdate:t})=>{const{user:r}=Ne(),[a,i]=w.useState([]),[n,o]=w.useState(!1),[l,d]=w.useState(!1),[u,p]=w.useState({userId:"",role:"MEMBER"});w.useEffect(()=>{m()},[e]);const m=async()=>{var y,N;try{o(!0);const S=await Ft.getProjectMembers(e);i(S)}catch(S){O.error(((N=(y=S.response)==null?void 0:y.data)==null?void 0:N.message)||"Failed to load project members")}finally{o(!1)}},f=async()=>{var y,N;try{o(!0),await Ft.addProjectMember(e,u),O.success("Member added successfully"),p({userId:"",role:"MEMBER"}),d(!1),m(),t==null||t()}catch(S){O.error(((N=(y=S.response)==null?void 0:y.data)==null?void 0:N.message)||"Failed to add member")}finally{o(!1)}},g=async(y,N)=>{var S,E;try{o(!0),await Ft.updateProjectMemberRole(e,y,{role:N}),O.success("Member role updated successfully"),m(),t==null||t()}catch(C){O.error(((E=(S=C.response)==null?void 0:S.data)==null?void 0:E.message)||"Failed to update member role")}finally{o(!1)}},b=async(y,N)=>{var S,E;if(confirm(`Are you sure you want to remove ${N} from this project?`))try{o(!0),await Ft.removeProjectMember(e,y),O.success("Member removed successfully"),m(),t==null||t()}catch(C){O.error(((E=(S=C.response)==null?void 0:S.data)==null?void 0:E.message)||"Failed to remove member")}finally{o(!1)}},h=()=>{const y=a.find(N=>N.id===(r==null?void 0:r.id));return(y==null?void 0:y.role)==="OWNER"||(y==null?void 0:y.role)==="ADMIN"},v=()=>{const y=a.find(N=>N.id===(r==null?void 0:r.id));return(y==null?void 0:y.role)==="OWNER"},x=y=>{switch(y){case"OWNER":return"bg-red-100 text-red-800";case"ADMIN":return"bg-orange-100 text-orange-800";case"MEMBER":return"bg-blue-100 text-blue-800";case"VIEWER":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return n?s("div",{className:"flex justify-center items-center p-4",children:s("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):c("div",{className:"space-y-4",children:[c("div",{className:"flex justify-between items-center",children:[s("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Members"}),h()&&s("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:"Add Member"})]}),l&&s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s("h3",{className:"text-lg font-semibold mb-4",children:"Add Project Member"}),c("div",{className:"space-y-4",children:[c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User ID"}),s("input",{type:"text",value:u.userId,onChange:y=>p({...u,userId:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter user ID"})]}),c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),c("select",{value:u.role,onChange:y=>p({...u,role:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s("option",{value:"MEMBER",children:"Member"}),s("option",{value:"ADMIN",children:"Admin"}),s("option",{value:"VIEWER",children:"Viewer"})]})]}),c("div",{className:"flex justify-end space-x-2",children:[s("button",{onClick:()=>d(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),s("button",{onClick:f,disabled:!u.userId,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",children:"Add Member"})]})]})]})}),s("div",{className:"bg-white rounded-lg shadow",children:s("div",{className:"overflow-x-auto",children:c("table",{className:"min-w-full divide-y divide-gray-200",children:[s("thead",{className:"bg-gray-50",children:c("tr",{children:[s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(y=>c("tr",{children:[s("td",{className:"px-6 py-4 whitespace-nowrap",children:c("div",{className:"flex items-center",children:[s("div",{className:"flex-shrink-0 h-10 w-10",children:s("img",{className:"h-10 w-10 rounded-full",src:y.avatar||`https://ui-avatars.com/api/?name=${y.name}`,alt:y.name})}),c("div",{className:"ml-4",children:[s("div",{className:"text-sm font-medium text-gray-900",children:y.name}),s("div",{className:"text-sm text-gray-500",children:y.email})]})]})}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x(y.role)}`,children:y.role})}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(y.joinedAt).toLocaleDateString()}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c("div",{className:"flex space-x-2",children:[v()&&y.role!=="OWNER"&&c("select",{value:y.role,onChange:N=>g(y.id,N.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[s("option",{value:"ADMIN",children:"Admin"}),s("option",{value:"MEMBER",children:"Member"}),s("option",{value:"VIEWER",children:"Viewer"})]}),h()&&y.id!==(r==null?void 0:r.id)&&y.role!=="OWNER"&&s("button",{onClick:()=>b(y.id,y.name),className:"text-red-600 hover:text-red-900 text-xs",children:"Remove"})]})})]},y.id))})]})})}),a.length===0&&s("div",{className:"text-center py-8 text-gray-500",children:"No members found for this project."})]})},Qu=()=>{const{projectId:e}=Xa(),[t,r]=w.useState(null),[a,i]=w.useState(!0),[n,o]=w.useState("overview");w.useEffect(()=>{e&&l()},[e]);const l=async()=>{var u,p;try{i(!0);const m=await nt.getProjectById(e);r(m)}catch(m){O.error(((p=(u=m.response)==null?void 0:u.data)==null?void 0:p.message)||"Failed to load project details")}finally{i(!1)}};if(a)return s("div",{className:"flex justify-center items-center min-h-screen",children:s("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})});if(!t)return c("div",{className:"text-center py-8",children:[s("h2",{className:"text-xl font-semibold text-gray-900",children:"Project not found"}),s("p",{className:"text-gray-500 mt-2",children:"The project you're looking for doesn't exist or you don't have access to it."})]});const d=u=>{switch(u){case"ACTIVE":return"bg-green-100 text-green-800";case"ARCHIVED":return"bg-gray-100 text-gray-800";case"COMPLETED":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return c("div",{className:"space-y-6",children:[c("div",{children:[s("h1",{className:"text-2xl font-bold text-secondary-900",children:t.name}),s("p",{className:"text-secondary-600",children:t.description})]}),c("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c("div",{className:"bg-white rounded-lg shadow p-4",children:[s("div",{className:"text-sm font-medium text-gray-500",children:"Total Tasks"}),s("div",{className:"text-2xl font-bold text-gray-900",children:t.taskCount})]}),c("div",{className:"bg-white rounded-lg shadow p-4",children:[s("div",{className:"text-sm font-medium text-gray-500",children:"Completed"}),s("div",{className:"text-2xl font-bold text-green-600",children:t.completedTasks})]}),c("div",{className:"bg-white rounded-lg shadow p-4",children:[s("div",{className:"text-sm font-medium text-gray-500",children:"In Progress"}),s("div",{className:"text-2xl font-bold text-blue-600",children:t.inProgressTasks})]}),c("div",{className:"bg-white rounded-lg shadow p-4",children:[s("div",{className:"text-sm font-medium text-gray-500",children:"Progress"}),c("div",{className:"text-2xl font-bold text-primary-600",children:[t.progress,"%"]})]})]}),s("div",{className:"border-b border-gray-200",children:c("nav",{className:"-mb-px flex space-x-8",children:[s("button",{onClick:()=>o("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="overview"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),s("button",{onClick:()=>o("members"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="members"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Members"})]})}),n==="overview"&&c("div",{className:"space-y-6",children:[c("div",{className:"bg-white rounded-lg shadow",children:[s("div",{className:"px-6 py-4 border-b border-gray-200",children:s("h3",{className:"text-lg font-medium text-gray-900",children:"Project Information"})}),s("div",{className:"px-6 py-4 space-y-4",children:c("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d(t.status)}`,children:t.status})]}),c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Created"}),s("p",{className:"text-sm text-gray-900",children:new Date(t.createdAt).toLocaleDateString()})]}),t.startDate&&c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),s("p",{className:"text-sm text-gray-900",children:new Date(t.startDate).toLocaleDateString()})]}),t.endDate&&c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),s("p",{className:"text-sm text-gray-900",children:new Date(t.endDate).toLocaleDateString()})]})]})})]}),c("div",{className:"bg-white rounded-lg shadow",children:[s("div",{className:"px-6 py-4 border-b border-gray-200",children:s("h3",{className:"text-lg font-medium text-gray-900",children:"Project Progress"})}),c("div",{className:"px-6 py-4",children:[s("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:`${t.progress}%`}})}),c("p",{className:"text-sm text-gray-600 mt-2",children:[t.progress,"% complete"]})]})]})]}),n==="members"&&s("div",{children:s(Zu,{projectId:e,onMemberUpdate:l})})]})},ep={}.VITE_API_URL||"/api",Ve=q.create({baseURL:ep,headers:{"Content-Type":"application/json"}});Ve.interceptors.request.use(e=>{var r;const t=localStorage.getItem("auth-storage");if(t)try{const a=JSON.parse(t);(r=a.state)!=null&&r.token&&(e.headers.Authorization=`Bearer ${a.state.token}`)}catch(a){console.error("Error parsing auth token:",a)}return e},e=>Promise.reject(e));Ve.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("auth-storage"),window.location.href="/login"),Promise.reject(e)});const $t={async getTasks(e={}){const t=new URLSearchParams;return e.search&&t.append("search",e.search),e.status&&t.append("status",e.status),e.priority&&t.append("priority",e.priority),e.type&&t.append("type",e.type),e.assigneeId&&t.append("assigneeId",e.assigneeId),e.projectId&&t.append("projectId",e.projectId),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.page&&t.append("page",e.page.toString()),e.limit&&t.append("limit",e.limit.toString()),(await Ve.get(`/tasks?${t.toString()}`)).data.data},async getTaskById(e){return(await Ve.get(`/tasks/${e}`)).data.data.task},async createTask(e,t){return(await Ve.post(`/tasks/projects/${e}`,t)).data.data.task},async updateTask(e,t){return(await Ve.put(`/tasks/${e}`,t)).data.data.task},async deleteTask(e){await Ve.delete(`/tasks/${e}`)},async getTaskStats(e){const t=new URLSearchParams;return e&&t.append("projectId",e),(await Ve.get(`/tasks/stats?${t.toString()}`)).data.data}},Fe="/api/time-tracking";class tp{async getTimeEntriesForTask(t){try{return(await q.get(`${Fe}/task/${t}`)).data.data.timeEntries}catch(r){throw console.error("Error fetching time entries for task:",r),r}}async getMyTimeEntries(t){try{const r=new URLSearchParams;return t!=null&&t.startDate&&r.append("startDate",t.startDate),t!=null&&t.endDate&&r.append("endDate",t.endDate),t!=null&&t.taskId&&r.append("taskId",t.taskId),t!=null&&t.projectId&&r.append("projectId",t.projectId),(await q.get(`${Fe}/my-entries?${r}`)).data.data.timeEntries}catch(r){throw console.error("Error fetching my time entries:",r),r}}async getActiveTimeEntry(){try{return(await q.get(`${Fe}/active`)).data.data.activeEntry}catch(t){throw console.error("Error fetching active time entry:",t),t}}async getTimeAnalytics(t){try{const r=new URLSearchParams;return t!=null&&t.startDate&&r.append("startDate",t.startDate),t!=null&&t.endDate&&r.append("endDate",t.endDate),t!=null&&t.projectId&&r.append("projectId",t.projectId),(await q.get(`${Fe}/analytics?${r}`)).data.data}catch(r){throw console.error("Error fetching time analytics:",r),r}}async startTimeTracking(t){try{return(await q.post(`${Fe}/start`,t)).data.data.timeEntry}catch(r){throw console.error("Error starting time tracking:",r),r}}async stopTimeTracking(t){try{return(await q.post(`${Fe}/stop`,t)).data.data.timeEntry}catch(r){throw console.error("Error stopping time tracking:",r),r}}async addTimeEntry(t){try{return(await q.post(`${Fe}`,t)).data.data.timeEntry}catch(r){throw console.error("Error adding time entry:",r),r}}async updateTimeEntry(t,r){try{return(await q.put(`${Fe}/${t}`,r)).data.data.timeEntry}catch(a){throw console.error("Error updating time entry:",a),a}}async deleteTimeEntry(t){try{await q.delete(`${Fe}/${t}`)}catch(r){throw console.error("Error deleting time entry:",r),r}}formatDuration(t){const r=t*60,a=Math.floor(r/3600),i=Math.floor(r%3600/60),n=r%60;return a>0?`${a}h ${i}m ${n}s`:i>0?`${i}m ${n}s`:`${n}s`}formatDurationShort(t){const r=t*60,a=Math.floor(r/3600),i=Math.floor(r%3600/60);return a>0?`${a}h ${i}m`:`${i}m`}calculateElapsedTime(t){const r=new Date(t).getTime(),a=new Date().getTime();return Math.floor((a-r)/1e3)}}const Q=new tp,rp=async(e,t)=>{try{const r=new URLSearchParams;return e&&r.append("taskId",e),t&&r.append("projectId",t),(await q.get(`/api/comments?${r.toString()}`)).data.data.comments}catch(r){throw console.error("Failed to fetch comments:",r),r}},di=async e=>{try{return(await q.post("/api/comments",e)).data.data.comment}catch(t){throw console.error("Failed to create comment:",t),t}},ap=async(e,t)=>{try{return(await q.put(`/api/comments/${e}`,t)).data.data.comment}catch(r){throw console.error("Failed to update comment:",r),r}},np=async e=>{try{await q.delete(`/api/comments/${e}`)}catch(t){throw console.error("Failed to delete comment:",t),t}},ip=e=>{const t=new Date(e),a=new Date().getTime()-t.getTime(),i=Math.floor(a/(1e3*60*60*24)),n=Math.floor(a/(1e3*60*60)),o=Math.floor(a/(1e3*60));return i>0?`${i} day${i>1?"s":""} ago`:n>0?`${n} hour${n>1?"s":""} ago`:o>0?`${o} minute${o>1?"s":""} ago`:"Just now"},sp=e=>{const t=/@(\w+)/g,r=[];let a;for(;(a=t.exec(e))!==null;)r.push(a[1]);return r},op=({taskId:e,projectId:t,onCommentAdded:r})=>{const[a,i]=w.useState([]),[n,o]=w.useState(!0),[l,d]=w.useState(""),[u,p]=w.useState(null),[m,f]=w.useState(""),[g,b]=w.useState(null),[h,v]=w.useState(""),[x,y]=w.useState(!1),{user:N}=Ne();w.useEffect(()=>{S()},[e,t]);const S=async()=>{try{o(!0);const R=await rp(e,t);i(R)}catch(R){console.error("Failed to load comments:",R),O.error("Failed to load comments")}finally{o(!1)}},E=async R=>{if(R.preventDefault(),!!l.trim())try{y(!0),await di({content:l,taskId:e,projectId:t}),d(""),await S(),r==null||r(),O.success("Comment added successfully")}catch(W){console.error("Failed to create comment:",W),O.error("Failed to create comment")}finally{y(!1)}},C=async R=>{if(R.preventDefault(),!(!h.trim()||!g))try{y(!0),await di({content:h,taskId:e,projectId:t,parentId:g}),v(""),b(null),await S(),r==null||r(),O.success("Reply added successfully")}catch(W){console.error("Failed to create reply:",W),O.error("Failed to create reply")}finally{y(!1)}},k=async R=>{if(m.trim())try{y(!0),await ap(R,{content:m}),p(null),f(""),await S(),O.success("Comment updated successfully")}catch(W){console.error("Failed to update comment:",W),O.error("Failed to update comment")}finally{y(!1)}},B=async R=>{if(confirm("Are you sure you want to delete this comment?"))try{await np(R),await S(),O.success("Comment deleted successfully")}catch(W){console.error("Failed to delete comment:",W),O.error("Failed to delete comment")}},T=R=>{p(R.id),f(R.content)},M=()=>{p(null),f("")},j=R=>{b(R),v("")},_=()=>{b(null),v("")},Y=(R,W=0)=>{const X=R.user.id===(N==null?void 0:N.id),ce=sp(R.content);return c("div",{className:`${W>0?"ml-6 border-l-2 border-gray-200 pl-4":""}`,children:[c("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4",children:[c("div",{className:"flex items-center justify-between mb-3",children:[c("div",{className:"flex items-center space-x-2",children:[s("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:s(Ce,{className:"w-4 h-4 text-white"})}),c("div",{children:[s("div",{className:"font-medium text-gray-900",children:R.user.name}),s("div",{className:"text-sm text-gray-500",children:ip(R.createdAt)})]})]}),X&&c("div",{className:"flex items-center space-x-2",children:[s("button",{onClick:()=>T(R),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s(xt,{className:"w-4 h-4"})}),s("button",{onClick:()=>B(R.id),className:"text-red-400 hover:text-red-600 transition-colors",children:s(Et,{className:"w-4 h-4"})})]})]}),u===R.id?c("div",{className:"space-y-3",children:[s("textarea",{value:m,onChange:G=>f(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,placeholder:"Edit your comment..."}),c("div",{className:"flex items-center space-x-2",children:[s("button",{onClick:()=>k(R.id),disabled:x,className:"px-3 py-1 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",children:x?"Updating...":"Update"}),s("button",{onClick:M,className:"px-3 py-1 text-gray-600 hover:text-gray-800",children:"Cancel"})]})]}):s("div",{className:"text-gray-700 whitespace-pre-wrap",children:R.content.split(" ").map((G,P)=>G.startsWith("@")&&ce.includes(G.substring(1))?c("span",{className:"text-primary-600 font-medium",children:[G," "]},P):G+" ")}),u!==R.id&&s("div",{className:"mt-3 flex items-center space-x-4",children:c("button",{onClick:()=>j(R.id),className:"flex items-center space-x-1 text-gray-500 hover:text-gray-700 transition-colors",children:[s(Cl,{className:"w-4 h-4"}),s("span",{className:"text-sm",children:"Reply"})]})}),g===R.id&&c("div",{className:"mt-4 space-y-3",children:[s("textarea",{value:h,onChange:G=>v(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:2,placeholder:"Write a reply..."}),c("div",{className:"flex items-center space-x-2",children:[s("button",{onClick:C,disabled:x,className:"px-3 py-1 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",children:x?"Posting...":"Post Reply"}),s("button",{onClick:_,className:"px-3 py-1 text-gray-600 hover:text-gray-800",children:"Cancel"})]})]})]}),R.replies.length>0&&s("div",{className:"space-y-2",children:R.replies.map(G=>Y(G,W+1))})]},R.id)};return n?s("div",{className:"flex items-center justify-center py-8",children:s("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):c("div",{className:"space-y-6",children:[c("div",{className:"flex items-center space-x-2",children:[s(Ra,{className:"w-5 h-5 text-gray-600"}),c("h3",{className:"text-lg font-semibold text-gray-900",children:["Comments (",a.length,")"]})]}),c("form",{onSubmit:E,className:"space-y-3",children:[s("textarea",{value:l,onChange:R=>d(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,placeholder:"Write a comment... Use @username to mention someone"}),c("div",{className:"flex items-center justify-between",children:[s("div",{className:"text-sm text-gray-500",children:"Press Enter to submit, Shift+Enter for new line"}),c("button",{type:"submit",disabled:!l.trim()||x,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[s(El,{className:"w-4 h-4"}),s("span",{children:x?"Posting...":"Post Comment"})]})]})]}),s("div",{className:"space-y-4",children:a.length===0?c("div",{className:"text-center py-8 text-gray-500",children:[s(Ra,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s("p",{children:"No comments yet. Be the first to comment!"})]}):a.map(R=>Y(R))})]})},pn=({isOpen:e,onClose:t,projectId:r,task:a,onTaskCreated:i,onTaskUpdated:n})=>{const[o,l]=w.useState(!1),[d,u]=w.useState([]),[p,m]=w.useState([]),[f,g]=w.useState(null),[b,h]=w.useState(!1),[v,x]=w.useState({title:"",description:"",status:"TODO",priority:"MEDIUM",type:"TASK",storyPoints:void 0,dueDate:"",assigneeId:void 0,parentTaskId:void 0});w.useEffect(()=>{e&&(console.log("Loading project members for projectId:",r),C(),a?(x({title:a.title,description:a.description||"",status:a.status,priority:a.priority,type:a.type,storyPoints:a.storyPoints,dueDate:a.dueDate?new Date(a.dueDate).toISOString().split("T")[0]:"",assigneeId:a.assigneeId||void 0,parentTaskId:a.parentTaskId||void 0}),y(),N()):x({title:"",description:"",status:"TODO",priority:"MEDIUM",type:"TASK",storyPoints:void 0,dueDate:"",assigneeId:void 0,parentTaskId:void 0}))},[e,a,r]);const y=async()=>{if(a!=null&&a.id)try{const T=await Q.getTimeEntriesForTask(a.id);m(T)}catch(T){console.error("Failed to load time entries:",T)}},N=async()=>{try{const T=await Q.getActiveTimeEntry();g(T),h((T==null?void 0:T.taskId)===(a==null?void 0:a.id))}catch(T){console.error("Failed to check active time entry:",T)}},S=async()=>{var T,M;if(a!=null&&a.id)try{const j=await Q.startTimeTracking({taskId:a.id,description:`Working on: ${a.title}`});g(j),h(!0),O.success("Time tracking started")}catch(j){((M=(T=j.response)==null?void 0:T.data)==null?void 0:M.error)==="ACTIVE_TIMER_EXISTS"?O.error("You already have an active timer. Please stop it first."):O.error("Failed to start time tracking")}},E=async()=>{if(f)try{await Q.stopTimeTracking({timeEntryId:f.id}),g(null),h(!1),y(),O.success("Time tracking stopped")}catch{O.error("Failed to stop time tracking")}},C=async()=>{var T;try{if(console.log("Fetching project members for projectId:",r),!r){console.log("No projectId provided, skipping member loading"),u([]);return}const M=await fetch(`/api/roles/projects/${r}/members`,{headers:{Authorization:`Bearer ${(T=JSON.parse(localStorage.getItem("auth-storage")||"{}").state)==null?void 0:T.token}`}});if(console.log("Response status:",M.status),M.ok){const j=await M.json();console.log("Project members data:",j),u(j.data.members||[])}else{const j=await M.json().catch(()=>({}));console.error("Failed to load project members:",j),u([])}}catch(M){console.error("Failed to load project members:",M),u([])}},k=async T=>{var M,j,_,Y;if(T.preventDefault(),console.log("Form submitted"),console.log("Project ID:",r),console.log("Form data:",v),console.log("Task exists:",!!a),!r){console.error("No project ID provided"),O.error("No project selected. Please select a project first.");return}l(!0);try{if(a){const R=await $t.updateTask(a.id,v);n==null||n(R),O.success("Task updated successfully")}else{console.log("Creating new task..."),console.log("Calling taskService.createTask with:",{projectId:r,formData:v});const R=await $t.createTask(r,v);console.log("Task created successfully:",R),i==null||i(R),O.success("Task created successfully")}t()}catch(R){console.error("Task operation failed:",R),console.error("Error details:",{message:R.message,response:(M=R.response)==null?void 0:M.data,status:(j=R.response)==null?void 0:j.status}),O.error(((Y=(_=R.response)==null?void 0:_.data)==null?void 0:Y.message)||"Failed to save task")}finally{l(!1)}},B=T=>{const{name:M,value:j}=T.target;x(_=>({..._,[M]:j===""?void 0:j}))};return e?s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[c("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s("h2",{className:"text-xl font-semibold text-gray-900",children:a?"Edit Task":"Create New Task"}),s("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s(Qe,{className:"w-6 h-6"})})]}),c("form",{onSubmit:k,className:"p-6 space-y-6",children:[!r&&s("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:c("div",{className:"flex",children:[s("div",{className:"flex-shrink-0",children:s("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),c("div",{className:"ml-3",children:[s("h3",{className:"text-sm font-medium text-red-800",children:"No Project Selected"}),s("div",{className:"mt-2 text-sm text-red-700",children:s("p",{children:"Please select a project first before creating a task."})})]})]})}),c("div",{children:[s("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),s("input",{type:"text",id:"title",name:"title",value:v.title,onChange:B,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter task title"})]}),c("div",{children:[s("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s("textarea",{id:"description",name:"description",value:v.description,onChange:B,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter task description"})]}),c("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c("div",{children:[s("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),c("select",{id:"status",name:"status",value:v.status,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s("option",{value:"TODO",children:"To Do"}),s("option",{value:"IN_PROGRESS",children:"In Progress"}),s("option",{value:"REVIEW",children:"Review"}),s("option",{value:"DONE",children:"Done"})]})]}),c("div",{children:[s("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),c("select",{id:"priority",name:"priority",value:v.priority,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s("option",{value:"LOW",children:"Low"}),s("option",{value:"MEDIUM",children:"Medium"}),s("option",{value:"HIGH",children:"High"}),s("option",{value:"URGENT",children:"Urgent"})]})]}),c("div",{children:[s("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),c("select",{id:"type",name:"type",value:v.type,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s("option",{value:"TASK",children:"Task"}),s("option",{value:"BUG",children:"Bug"}),s("option",{value:"STORY",children:"Story"}),s("option",{value:"EPIC",children:"Epic"})]})]})]}),c("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c("div",{children:[s("label",{htmlFor:"storyPoints",className:"block text-sm font-medium text-gray-700 mb-2",children:"Story Points"}),s("input",{type:"number",id:"storyPoints",name:"storyPoints",value:v.storyPoints||"",onChange:B,min:"1",max:"21",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"1-21"})]}),c("div",{children:[s("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),c("div",{className:"relative",children:[s("input",{type:"date",id:"dueDate",name:"dueDate",value:v.dueDate,onChange:B,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:new Date().toISOString().split("T")[0]}),s(pe,{className:"absolute right-3 top-2.5 w-5 h-5 text-gray-400 pointer-events-none"})]})]})]}),c("div",{children:[s("label",{htmlFor:"assigneeId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignee"}),c("div",{className:"relative",children:[c("select",{id:"assigneeId",name:"assigneeId",value:v.assigneeId||"",onChange:B,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s("option",{value:"",children:"Unassigned"}),d.length>0?d.map(T=>c("option",{value:T.id,children:[T.name," (",T.email,")"]},T.id)):s("option",{value:"",disabled:!0,children:"Loading members..."})]}),s(Ce,{className:"absolute right-3 top-2.5 w-5 h-5 text-gray-400 pointer-events-none"})]}),d.length===0&&s("p",{className:"text-sm text-gray-500 mt-1",children:r?"No project members found":"Please select a project first"})]}),c("div",{children:[s("label",{htmlFor:"parentTaskId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Parent Task (Optional)"}),s("select",{id:"parentTaskId",name:"parentTaskId",value:v.parentTaskId,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:s("option",{value:"",children:"No Parent Task"})})]}),a&&c("div",{className:"border-t border-gray-200 pt-6",children:[c("div",{className:"flex items-center justify-between mb-4",children:[s("h3",{className:"text-lg font-medium text-gray-900",children:"Time Tracking"}),s("div",{className:"flex items-center space-x-2",children:b?c("button",{type:"button",onClick:E,className:"px-3 py-1 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center space-x-1",children:[s(ss,{className:"w-4 h-4"}),s("span",{children:"Stop Timer"})]}):c("button",{type:"button",onClick:S,className:"px-3 py-1 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center space-x-1",children:[s(is,{className:"w-4 h-4"}),s("span",{children:"Start Timer"})]})})]}),c("div",{className:"bg-gray-50 rounded-lg p-4",children:[c("div",{className:"flex items-center justify-between mb-3",children:[c("div",{className:"flex items-center space-x-2",children:[s(ve,{className:"w-5 h-5 text-gray-500"}),s("span",{className:"text-sm font-medium text-gray-700",children:"Time Entries"})]}),c("span",{className:"text-sm text-gray-500",children:[p.length," entries"]})]}),p.length>0?c("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[p.slice(0,3).map(T=>c("div",{className:"flex items-center justify-between text-sm",children:[c("div",{children:[s("span",{className:"text-gray-600",children:new Date(T.startTime).toLocaleDateString()}),T.description&&c("span",{className:"text-gray-500 ml-2",children:["- ",T.description]})]}),s("span",{className:"text-gray-700 font-medium",children:Q.formatDuration(T.duration||0)})]},T.id)),p.length>3&&c("div",{className:"text-xs text-gray-500 text-center",children:["+",p.length-3," more entries"]})]}):s("div",{className:"text-center text-gray-500 py-2",children:"No time entries recorded"})]})]}),a&&s("div",{className:"border-t border-gray-200 pt-6",children:s(op,{taskId:a.id,onCommentAdded:()=>{}})}),c("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[s("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),s("button",{type:"submit",disabled:o||!v.title.trim()||!r,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",onClick:()=>{console.log("Submit button clicked"),console.log("Loading:",o),console.log("Title:",v.title),console.log("Title trimmed:",v.title.trim()),console.log("Project ID:",r),console.log("Form data:",v)},children:o?c(Ye,{children:[s(tt,{size:"sm"}),s("span",{children:"Saving..."})]}):s("span",{children:a?"Update Task":"Create Task"})})]})]})]})}):null},lp=({isOpen:e,onClose:t,projectId:r,projectName:a,onMemberAdded:i})=>{const[n,o]=w.useState(!1),[l,d]=w.useState([]),[u,p]=w.useState(""),[m,f]=w.useState("MEMBER");w.useEffect(()=>{e&&g()},[e]);const g=async()=>{var h;try{const v=await fetch("/api/users",{headers:{Authorization:`Bearer ${(h=JSON.parse(localStorage.getItem("auth-storage")||"{}").state)==null?void 0:h.token}`}});if(v.ok){const x=await v.json();d(x.data.users||[])}else O.error("Failed to load users")}catch(v){console.error("Failed to load users:",v),O.error("Failed to load users")}},b=async h=>{var v;if(h.preventDefault(),!u){O.error("Please select a user");return}o(!0);try{const x=await fetch(`/api/roles/projects/${r}/members`,{method:"POST",headers:{Authorization:`Bearer ${(v=JSON.parse(localStorage.getItem("auth-storage")||"{}").state)==null?void 0:v.token}`,"Content-Type":"application/json"},body:JSON.stringify({userId:u,role:m})});if(x.ok)O.success("Member added successfully"),i==null||i(),t(),p(""),f("MEMBER");else{const y=await x.json();O.error(y.message||"Failed to add member")}}catch(x){console.error("Failed to add member:",x),O.error("Failed to add member")}finally{o(!1)}};return e?s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[c("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c("h2",{className:"text-xl font-semibold text-gray-900",children:["Add Member to ",a]}),s("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s(Qe,{className:"w-6 h-6"})})]}),c("form",{onSubmit:b,className:"p-6 space-y-6",children:[c("div",{children:[s("label",{htmlFor:"userId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select User"}),c("select",{id:"userId",value:u,onChange:h=>p(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[s("option",{value:"",children:"Choose a user..."}),l.map(h=>c("option",{value:h.id,children:[h.name," (",h.email,") - ",h.role]},h.id))]})]}),c("div",{children:[s("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),c("select",{id:"role",value:m,onChange:h=>f(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s("option",{value:"MEMBER",children:"Member"}),s("option",{value:"ADMIN",children:"Admin"}),s("option",{value:"VIEWER",children:"Viewer"})]})]}),c("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[s("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),s("button",{type:"submit",disabled:n||!u,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:n?c(Ye,{children:[s("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s("span",{children:"Adding..."})]}):c(Ye,{children:[s(ut,{className:"w-4 h-4"}),s("span",{children:"Add Member"})]})})]})]})]})}):null},cp=()=>{const[e,t]=w.useState([]),[r,a]=w.useState(null),[i,n]=w.useState(!0),[o,l]=w.useState(null),[d,u]=w.useState({page:1,limit:10,sortBy:"created_at",sortOrder:"DESC"}),[p,m]=w.useState({page:1,limit:10,total:0,totalPages:0}),[f,g]=w.useState(!1),[b,h]=w.useState(null),[v,x]=w.useState(!1),[y,N]=w.useState(null),[S,E]=w.useState(!1),[C,k]=w.useState(null),[B,T]=w.useState(""),[M,j]=w.useState(""),[_,Y]=w.useState(""),[R,W]=w.useState("");w.useState("");const[X,ce]=w.useState(""),[G,P]=w.useState([]),{user:K}=Ne();w.useEffect(()=>{console.log("TasksPage useEffect triggered"),Te(),te(),Be()},[d]),w.useEffect(()=>{console.log("TasksPage component mounted, loading projects..."),Be()},[]);const Te=async()=>{var I,J,Z,Le;n(!0),l(null);try{const Se=await $t.getTasks(d);t(Se.tasks),m(Se.pagination)}catch(Se){console.error("Failed to fetch tasks:",Se),l(((J=(I=Se.response)==null?void 0:I.data)==null?void 0:J.message)||"Failed to load tasks"),O.error(((Le=(Z=Se.response)==null?void 0:Z.data)==null?void 0:Le.message)||"Failed to load tasks")}finally{n(!1)}},te=async()=>{try{const I=await $t.getTaskStats();a(I.stats)}catch(I){console.error("Failed to fetch task stats:",I)}},Be=async()=>{var I,J;try{console.log("Loading projects...");const Z=localStorage.getItem("auth-storage"),Se=(I=JSON.parse(Z||"{}").state)==null?void 0:I.token;console.log("Auth token exists:",!!Se);const Oe=await fetch("/api/projects",{headers:{Authorization:`Bearer ${Se}`,"Content-Type":"application/json"}});if(console.log("Projects response status:",Oe.status),Oe.ok){const je=await Oe.json();console.log("Projects data:",je),console.log("Number of projects:",((J=je.data.projects)==null?void 0:J.length)||0),P(je.data.projects||[])}else{const je=await Oe.json().catch(()=>({}));console.error("Failed to load projects:",je),O.error("Failed to load projects. Please try again."),P([])}}catch(Z){console.error("Failed to load projects:",Z),O.error("Failed to load projects. Please check your connection."),P([])}},ft=async I=>{t(J=>[I,...J]),await te()},Ae=async I=>{t(J=>J.map(Z=>Z.id===I.id?I:Z)),await te()},gt=async()=>{var I,J;if(y)try{await $t.deleteTask(y.id),t(Z=>Z.filter(Le=>Le.id!==y.id)),await te(),O.success("Task deleted successfully")}catch(Z){console.error("Failed to delete task:",Z),O.error(((J=(I=Z.response)==null?void 0:I.data)==null?void 0:J.message)||"Failed to delete task")}finally{x(!1),N(null)}},Re=I=>{u(J=>({...J,...I,page:1}))},ht=I=>{u(J=>({...J,page:I}))},Rt=I=>{switch(I){case"TODO":return"bg-gray-100 text-gray-800";case"IN_PROGRESS":return"bg-blue-100 text-blue-800";case"REVIEW":return"bg-yellow-100 text-yellow-800";case"DONE":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Ue=I=>{switch(I){case"LOW":return"bg-gray-100 text-gray-800";case"MEDIUM":return"bg-blue-100 text-blue-800";case"HIGH":return"bg-orange-100 text-orange-800";case"URGENT":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Ot=I=>{switch(I){case"TASK":return"bg-blue-100 text-blue-800";case"BUG":return"bg-red-100 text-red-800";case"STORY":return"bg-green-100 text-green-800";case"EPIC":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},fr=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),kt=(I,J)=>!I||J==="DONE"?!1:new Date(I)<new Date;return i&&e.length===0?s(tt,{}):c("div",{className:"p-6",children:[c("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[c("div",{children:[s("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Tasks"}),s("p",{className:"text-gray-600",children:"Manage and track your project tasks"})]}),c("div",{className:"mt-4 sm:mt-0 flex items-center space-x-2",children:[c("select",{value:X,onChange:I=>ce(I.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Select Project",children:[s("option",{value:"",children:"Select a project to create tasks"}),G.length>0?G.map(I=>s("option",{value:I.id,children:I.name},I.id)):c("option",{value:"",disabled:!0,children:["Loading projects... (",G.length," found)"]})]}),G.length===0&&c("div",{className:"text-sm text-gray-500 mt-1",children:[s("p",{children:"No projects found. Please create a project first."}),(K==null?void 0:K.role)==="MANAGER"&&c("button",{onClick:()=>{O.info("Please create a project first, then you can add members to it.")},className:"mt-2 px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-1",children:[s(ct,{className:"w-3 h-3"}),s("span",{children:"Add Members to Project"})]}),(K==null?void 0:K.role)==="USER"&&s("p",{className:"text-xs text-orange-600 mt-1",children:"You don't have access to any projects. Please ask a Project Manager to add you to a project."})]}),G.length>0&&!X&&c("div",{className:"text-sm text-blue-600 mt-1",children:[s("p",{children:"Please select a project above to create tasks"}),(K==null?void 0:K.role)==="MANAGER"&&s("div",{className:"mt-2 space-y-2",children:c("select",{onChange:I=>{const J=G.find(Z=>Z.id===I.target.value);J&&(k(J),E(!0))},className:"px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[s("option",{value:"",children:"Select project to add members..."}),G.map(I=>s("option",{value:I.id,children:I.name},I.id))]})})]}),c("div",{className:"text-xs text-gray-400 mt-1",children:["Debug: ",G.length," projects loaded"]}),c("button",{onClick:()=>{if(!X){O.error("Please select a project first to create a task");return}h(null),g(!0)},disabled:!X,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[s(ut,{className:"w-4 h-4"}),s("span",{children:"Create Task"})]})]})]}),r&&c("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s("div",{className:"bg-white rounded-lg shadow p-4",children:c("div",{className:"flex items-center",children:[s(dt,{className:"w-5 h-5 text-green-600 mr-2"}),c("div",{children:[s("p",{className:"text-sm text-green-600 font-medium",children:"Completed"}),s("p",{className:"text-2xl font-bold text-green-900",children:r.doneTasks})]})]})}),s("div",{className:"bg-white rounded-lg shadow p-4",children:c("div",{className:"flex items-center",children:[s(ve,{className:"w-5 h-5 text-blue-600 mr-2"}),c("div",{children:[s("p",{className:"text-sm text-blue-600 font-medium",children:"In Progress"}),s("p",{className:"text-2xl font-bold text-blue-900",children:r.inProgressTasks})]})]})}),s("div",{className:"bg-white rounded-lg shadow p-4",children:c("div",{className:"flex items-center",children:[s(os,{className:"w-5 h-5 text-orange-600 mr-2"}),c("div",{children:[s("p",{className:"text-sm text-orange-600 font-medium",children:"High Priority"}),s("p",{className:"text-2xl font-bold text-orange-900",children:r.highPriorityTasks})]})]})}),s("div",{className:"bg-white rounded-lg shadow p-4",children:c("div",{className:"flex items-center",children:[s(Zt,{className:"w-5 h-5 text-purple-600 mr-2"}),c("div",{children:[s("p",{className:"text-sm text-purple-600 font-medium",children:"Completion Rate"}),c("p",{className:"text-2xl font-bold text-purple-900",children:[r.completionRate,"%"]})]})]})})]}),c("div",{className:"bg-white rounded-lg shadow mb-6",children:[s("div",{className:"p-4 border-b border-gray-200",children:s("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"})}),s("div",{className:"p-4 space-y-4",children:c("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c("div",{className:"relative",children:[s(yt,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),s("input",{type:"text",placeholder:"Search tasks...",value:B,onChange:I=>{T(I.target.value),Re({search:I.target.value})},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),c("select",{value:M,onChange:I=>{j(I.target.value),Re({status:I.target.value||void 0})},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s("option",{value:"",children:"All Status"}),s("option",{value:"TODO",children:"To Do"}),s("option",{value:"IN_PROGRESS",children:"In Progress"}),s("option",{value:"REVIEW",children:"Review"}),s("option",{value:"DONE",children:"Done"})]}),c("select",{value:_,onChange:I=>{Y(I.target.value),Re({priority:I.target.value||void 0})},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s("option",{value:"",children:"All Priority"}),s("option",{value:"LOW",children:"Low"}),s("option",{value:"MEDIUM",children:"Medium"}),s("option",{value:"HIGH",children:"High"}),s("option",{value:"URGENT",children:"Urgent"})]}),c("select",{value:R,onChange:I=>{W(I.target.value),Re({type:I.target.value||void 0})},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s("option",{value:"",children:"All Types"}),s("option",{value:"TASK",children:"Task"}),s("option",{value:"BUG",children:"Bug"}),s("option",{value:"STORY",children:"Story"}),s("option",{value:"EPIC",children:"Epic"})]}),c("select",{value:`${d.sortBy}-${d.sortOrder}`,onChange:I=>{const[J,Z]=I.target.value.split("-");Re({sortBy:J,sortOrder:Z})},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s("option",{value:"created_at-DESC",children:"Newest First"}),s("option",{value:"created_at-ASC",children:"Oldest First"}),s("option",{value:"title-ASC",children:"Title A-Z"}),s("option",{value:"title-DESC",children:"Title Z-A"}),s("option",{value:"due_date-ASC",children:"Due Date"}),s("option",{value:"priority-DESC",children:"Priority"})]})]})})]}),c("div",{className:"bg-white rounded-lg shadow",children:[s("div",{className:"px-6 py-4 border-b border-gray-200",children:c("h3",{className:"text-lg font-medium text-gray-900",children:["Tasks (",p.total,")"]})}),o?c("div",{className:"p-6 text-center",children:[s("p",{className:"text-red-600",children:o}),s("button",{onClick:Te,className:"mt-2 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Try Again"})]}):e.length===0?s("div",{className:"p-6 text-center",children:s("p",{className:"text-gray-500",children:"No tasks found."})}):s("div",{className:"divide-y divide-gray-200",children:e.map(I=>s("div",{className:"p-6 hover:bg-gray-50",children:c("div",{className:"flex items-start justify-between",children:[c("div",{className:"flex-1",children:[c("div",{className:"flex items-center space-x-2 mb-2",children:[s("h4",{className:"text-lg font-medium text-gray-900",children:I.title}),kt(I.dueDate,I.status)&&s("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Overdue"})]}),I.description&&s("p",{className:"text-gray-600 mb-3 line-clamp-2",children:I.description}),c("div",{className:"flex items-center space-x-4 mb-3",children:[s("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Rt(I.status)}`,children:I.status.replace("_"," ")}),s("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Ue(I.priority)}`,children:I.priority}),s("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Ot(I.type)}`,children:I.type}),I.storyPoints&&c("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[I.storyPoints," SP"]})]}),c("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[I.projectName&&c("span",{className:"flex items-center",children:[s("span",{className:"mr-1",children:"Project:"}),I.projectName]}),I.assigneeName&&c("span",{className:"flex items-center",children:[s(Ce,{className:"w-4 h-4 mr-1"}),I.assigneeName]}),I.dueDate&&c("span",{className:"flex items-center",children:[s(pe,{className:"w-4 h-4 mr-1"}),fr(I.dueDate)]}),I.subtaskCount>0&&c("span",{className:"flex items-center",children:[s("span",{className:"mr-1",children:"Subtasks:"}),I.completedSubtasks,"/",I.subtaskCount]})]})]}),c("div",{className:"flex items-center space-x-2 ml-4",children:[s("button",{onClick:()=>{h(I),g(!0)},className:"px-3 py-1 text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Edit"}),s("button",{onClick:()=>{N(I),x(!0)},className:"px-3 py-1 text-sm text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})]})},I.id))}),p.totalPages>1&&s("div",{className:"px-6 py-4 border-t border-gray-200",children:s(un,{currentPage:p.page,totalPages:p.totalPages,onPageChange:ht})})]}),s(pn,{isOpen:f,onClose:()=>{g(!1),h(null)},projectId:(b==null?void 0:b.projectId)||X,task:b,onTaskCreated:ft,onTaskUpdated:Ae}),s(dn,{isOpen:v,onClose:()=>{x(!1),N(null)},onConfirm:gt,title:"Delete Task",message:`Are you sure you want to delete "${y==null?void 0:y.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",confirmButtonClass:"bg-red-600 hover:bg-red-700"}),C&&s(lp,{isOpen:S,onClose:()=>{E(!1),k(null)},projectId:C.id,projectName:C.name,onMemberAdded:()=>{Be()}})]})},dp=()=>{const{taskId:e}=Xa();return c("div",{className:"space-y-6",children:[c("div",{children:[s("h1",{className:"text-2xl font-bold text-secondary-900",children:"Task Details"}),c("p",{className:"text-secondary-600",children:["Task ID: ",e]})]}),s("div",{className:"card",children:s("div",{className:"card-content",children:s("p",{className:"text-secondary-600",children:"Task details will be displayed here."})})})]})},up=({taskId:e,taskTitle:t,projectName:r,onTimeEntryCreated:a,onTimeEntryStopped:i})=>{const[n,o]=w.useState(null),[l,d]=w.useState(!1),[u,p]=w.useState(0),[m,f]=w.useState("");w.useEffect(()=>{g()},[e]),w.useEffect(()=>{let x;return n&&(x=setInterval(()=>{p(Q.calculateElapsedTime(n.startTime))},1e3)),()=>{x&&clearInterval(x)}},[n]);const g=async()=>{try{const x=await Q.getActiveTimeEntry();o(x),x&&(p(Q.calculateElapsedTime(x.startTime)),f(x.description||""))}catch(x){console.error("Error checking active entry:",x)}},b=async()=>{var x,y,N,S;if(e){d(!0);try{const E=await Q.startTimeTracking({taskId:e,description:m.trim()||void 0});o(E),p(0),a==null||a(E)}catch(E){((y=(x=E.response)==null?void 0:x.data)==null?void 0:y.error)==="ACTIVE_TIMER_EXISTS"?alert("You already have an active time entry. Please stop it first."):alert("Error starting time tracking: "+(((S=(N=E.response)==null?void 0:N.data)==null?void 0:S.message)||E.message))}finally{d(!1)}}},h=async()=>{var x,y;if(n){d(!0);try{const N=await Q.stopTimeTracking({timeEntryId:n.id});o(null),p(0),f(""),i==null||i(N)}catch(N){alert("Error stopping time tracking: "+(((y=(x=N.response)==null?void 0:x.data)==null?void 0:y.message)||N.message))}finally{d(!1)}}},v=(n==null?void 0:n.taskId)===e;return c("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[c("div",{className:"flex items-center justify-between mb-4",children:[c("div",{className:"flex items-center space-x-2",children:[s(ve,{className:"h-5 w-5 text-gray-500"}),s("h3",{className:"text-lg font-medium text-gray-900",children:"Time Tracking"})]}),n&&c("span",{className:"text-sm text-gray-500",children:[n.taskTitle," - ",n.projectName]})]}),n&&v?c("div",{className:"space-y-4",children:[c("div",{className:"text-center",children:[s("div",{className:"text-3xl font-mono text-blue-600 mb-2",children:Q.formatDuration(u)}),s("p",{className:"text-sm text-gray-500",children:"Currently tracking"})]}),m&&s("div",{className:"bg-gray-50 rounded p-3",children:s("p",{className:"text-sm text-gray-700",children:m})}),c("button",{onClick:h,disabled:l,className:"w-full flex items-center justify-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s(ss,{className:"h-5 w-5"}),s("span",{children:"Stop Tracking"})]})]}):n?c("div",{className:"text-center py-4",children:[s("p",{className:"text-gray-600 mb-4",children:"You're currently tracking time for another task:"}),c("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:[s("p",{className:"text-sm font-medium text-yellow-800",children:n.taskTitle}),s("p",{className:"text-xs text-yellow-600",children:n.projectName})]}),s("button",{onClick:h,disabled:l,className:"w-full bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Stop Current Timer"})]}):c("div",{className:"space-y-4",children:[c("div",{children:[s("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),s("textarea",{id:"description",value:m,onChange:x=>f(x.target.value),placeholder:"What are you working on?",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),c("button",{onClick:b,disabled:l,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s(is,{className:"h-5 w-5"}),s("span",{children:l?"Starting...":"Start Tracking"})]})]})]})},pp=({taskId:e,onTimeEntryUpdated:t})=>{const[r,a]=w.useState([]),[i,n]=w.useState(!0),[o,l]=w.useState(null),[d,u]=w.useState({description:"",startTime:"",endTime:""});w.useEffect(()=>{p()},[e]);const p=async()=>{n(!0);try{const h=await Q.getTimeEntriesForTask(e);a(h)}catch(h){console.error("Error loading time entries:",h)}finally{n(!1)}},m=async h=>{var v,x;if(confirm("Are you sure you want to delete this time entry?"))try{await Q.deleteTimeEntry(h),a(y=>y.filter(N=>N.id!==h)),t==null||t()}catch(y){alert("Error deleting time entry: "+(((x=(v=y.response)==null?void 0:v.data)==null?void 0:x.message)||y.message))}},f=h=>{l(h.id),u({description:h.description||"",startTime:new Date(h.startTime).toISOString().slice(0,16),endTime:h.endTime?new Date(h.endTime).toISOString().slice(0,16):""})},g=async h=>{var v,x;try{const y=await Q.updateTimeEntry(h,{taskId:e,description:d.description,startTime:new Date(d.startTime).toISOString(),endTime:d.endTime?new Date(d.endTime).toISOString():void 0});a(N=>N.map(S=>S.id===h?{...S,...y}:S)),l(null),t==null||t()}catch(y){alert("Error updating time entry: "+(((x=(v=y.response)==null?void 0:v.data)==null?void 0:x.message)||y.message))}},b=()=>{l(null),u({description:"",startTime:"",endTime:""})};return i?s("div",{className:"flex items-center justify-center py-8",children:s("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r.length===0?c("div",{className:"text-center py-8 text-gray-500",children:[s(ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("p",{children:"No time entries yet"}),s("p",{className:"text-sm",children:"Start tracking time to see entries here"})]}):c("div",{className:"space-y-4",children:[c("h3",{className:"text-lg font-medium text-gray-900 flex items-center space-x-2",children:[s(ClockIcon,{className:"h-5 w-5"}),c("span",{children:["Time Entries (",r.length,")"]})]}),s("div",{className:"space-y-3",children:r.map(h=>s("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:o===h.id?c("div",{className:"space-y-3",children:[c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s("textarea",{value:d.description,onChange:v=>u({...d,description:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]}),c("div",{className:"grid grid-cols-2 gap-3",children:[c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),s("input",{type:"datetime-local",value:d.startTime,onChange:v=>u({...d,startTime:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),s("input",{type:"datetime-local",value:d.endTime,onChange:v=>u({...d,endTime:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),c("div",{className:"flex space-x-2",children:[s("button",{onClick:()=>g(h.id),className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Save"}),s("button",{onClick:b,className:"px-3 py-1 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 text-sm",children:"Cancel"})]})]}):c("div",{className:"flex items-start justify-between",children:[c("div",{className:"flex-1",children:[h.description&&s("p",{className:"text-gray-700 mb-2",children:h.description}),c("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[s("span",{children:new Date(h.startTime).toLocaleString()}),h.endTime&&c(Ye,{children:[s("span",{children:""}),s("span",{children:new Date(h.endTime).toLocaleString()})]}),h.duration&&s("span",{className:"font-medium text-blue-600",children:Q.formatDuration(h.duration)})]}),h.userName&&c("div",{className:"flex items-center space-x-2 mt-2",children:[h.userAvatar&&s("img",{src:h.userAvatar,alt:h.userName,className:"h-6 w-6 rounded-full"}),s("span",{className:"text-sm text-gray-500",children:h.userName})]})]}),c("div",{className:"flex space-x-2",children:[s("button",{onClick:()=>f(h),className:"p-1 text-gray-400 hover:text-gray-600",title:"Edit",children:s(xt,{className:"h-4 w-4"})}),s("button",{onClick:()=>m(h.id),className:"p-1 text-gray-400 hover:text-red-600",title:"Delete",children:s(Et,{className:"h-4 w-4"})})]})]})},h.id))})]})},mp=({filters:e})=>{const[t,r]=w.useState(null),[a,i]=w.useState(!0);w.useEffect(()=>{n()},[e]);const n=async()=>{i(!0);try{const u=await Q.getTimeAnalytics(e);r(u)}catch(u){console.error("Error loading analytics:",u)}finally{i(!1)}};if(a)return s("div",{className:"flex items-center justify-center py-8",children:s("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(!t)return c("div",{className:"text-center py-8 text-gray-500",children:[s(lt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("p",{children:"No analytics data available"})]});const{summary:o,projectStats:l,taskStats:d}=t;return c("div",{className:"space-y-6",children:[c("div",{className:"flex items-center space-x-2",children:[s(lt,{className:"h-6 w-6 text-gray-500"}),s("h3",{className:"text-lg font-medium text-gray-900",children:"Time Tracking Analytics"})]}),c("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c("div",{className:"flex items-center space-x-2",children:[s(ve,{className:"h-5 w-5 text-blue-600"}),s("span",{className:"text-sm font-medium text-gray-500",children:"Total Time"})]}),s("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:Q.formatDurationShort(o.totalDuration)})]}),c("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c("div",{className:"flex items-center space-x-2",children:[s(pe,{className:"h-5 w-5 text-green-600"}),s("span",{className:"text-sm font-medium text-gray-500",children:"Entries"})]}),s("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:o.totalEntries})]}),c("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c("div",{className:"flex items-center space-x-2",children:[s(ChartBarIcon,{className:"h-5 w-5 text-purple-600"}),s("span",{className:"text-sm font-medium text-gray-500",children:"Tasks"})]}),s("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:o.totalTasks})]}),c("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c("div",{className:"flex items-center space-x-2",children:[s(ChartBarIcon,{className:"h-5 w-5 text-orange-600"}),s("span",{className:"text-sm font-medium text-gray-500",children:"Projects"})]}),s("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:o.totalProjects})]})]}),l.length>0&&c("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[s("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Time by Project"}),s("div",{className:"space-y-3",children:l.map(u=>c("div",{className:"flex items-center justify-between",children:[c("div",{className:"flex-1",children:[s("p",{className:"font-medium text-gray-900",children:u.projectName}),c("p",{className:"text-sm text-gray-500",children:[u.taskCount," tasks"]})]}),c("div",{className:"text-right",children:[s("p",{className:"font-medium text-blue-600",children:Q.formatDurationShort(u.totalDuration)}),s("div",{className:"w-32 bg-gray-200 rounded-full h-2 mt-1",children:s("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(u.totalDuration/o.totalDuration*100,100)}%`}})})]})]},u.projectId))})]}),d.length>0&&c("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[s("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Tasks"}),s("div",{className:"space-y-3",children:d.slice(0,10).map(u=>c("div",{className:"flex items-center justify-between",children:[c("div",{className:"flex-1",children:[s("p",{className:"font-medium text-gray-900",children:u.taskTitle}),s("p",{className:"text-sm text-gray-500",children:u.projectName}),c("p",{className:"text-xs text-gray-400",children:[u.entryCount," entries"]})]}),c("div",{className:"text-right",children:[s("p",{className:"font-medium text-blue-600",children:Q.formatDurationShort(u.totalDuration)}),c("p",{className:"text-xs text-gray-500",children:["Avg: ",Q.formatDurationShort(u.avgDuration)]})]})]},u.taskId))})]}),l.length===0&&d.length===0&&c("div",{className:"text-center py-8 text-gray-500",children:[s(ChartBarIcon,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("p",{children:"No time tracking data available"}),s("p",{className:"text-sm",children:"Start tracking time to see analytics"})]})]})},fp=()=>{const[e,t]=w.useState("timer"),[r,a]=w.useState(null),[i,n]=w.useState([]),[o,l]=w.useState(!0);w.useEffect(()=>{d()},[]);const d=async()=>{var f;l(!0);try{const b=await(await fetch("/api/tasks",{headers:{Authorization:`Bearer ${(f=JSON.parse(localStorage.getItem("auth-storage")||"{}").state)==null?void 0:f.token}`}})).json();b.success&&n(b.data.tasks)}catch(g){console.error("Error loading tasks:",g)}finally{l(!1)}},u=f=>{},p=f=>{},m=[{id:"timer",name:"Timer",icon:ve},{id:"entries",name:"Entries",icon:Vn},{id:"analytics",name:"Analytics",icon:lt}];return o?s("div",{className:"flex items-center justify-center py-8",children:s("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c("div",{className:"mb-8",children:[s("h1",{className:"text-3xl font-bold text-gray-900",children:"Time Tracking"}),s("p",{className:"text-gray-600 mt-2",children:"Track your time and view analytics"})]}),c("div",{className:"mb-6",children:[s("label",{htmlFor:"task-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Task to Track"}),c("select",{id:"task-select",value:(r==null?void 0:r.id)||"",onChange:f=>{const g=i.find(b=>b.id===f.target.value);a(g?{id:g.id,title:g.title,projectName:g.projectName}:null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s("option",{value:"",children:"Select a task..."}),i.map(f=>c("option",{value:f.id,children:[f.title," - ",f.projectName]},f.id))]})]}),s("div",{className:"border-b border-gray-200 mb-6",children:s("nav",{className:"-mb-px flex space-x-8",children:m.map(f=>{const g=f.icon;return c("button",{onClick:()=>t(f.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${e===f.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s(g,{className:"h-5 w-5"}),s("span",{children:f.name})]},f.id)})})}),c("div",{className:"mt-6",children:[e==="timer"&&s("div",{className:"max-w-2xl",children:r?s(up,{taskId:r.id,taskTitle:r.title,projectName:r.projectName,onTimeEntryCreated:u,onTimeEntryStopped:p}):c("div",{className:"text-center py-12",children:[s(ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Task"}),s("p",{className:"text-gray-500",children:"Choose a task from the dropdown above to start tracking time"})]})}),e==="entries"&&s("div",{children:r?s(pp,{taskId:r.id,onTimeEntryUpdated:()=>{}}):c("div",{className:"text-center py-12",children:[s(Vn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Task"}),s("p",{className:"text-gray-500",children:"Choose a task to view its time entries"})]})}),e==="analytics"&&s("div",{children:s(mp,{})})]})]})},gp={}.VITE_API_URL||"/api",Ge=q.create({baseURL:gp,headers:{"Content-Type":"application/json"}});Ge.interceptors.request.use(e=>{var r;const t=localStorage.getItem("auth-storage");if(t)try{const a=JSON.parse(t);(r=a.state)!=null&&r.token&&(e.headers.Authorization=`Bearer ${a.state.token}`)}catch(a){console.error("Error parsing auth token:",a)}return e},e=>Promise.reject(e));const We={getUsers:async e=>(await Ge.get("/users",{params:e})).data,getUserById:async e=>(await Ge.get(`/users/${e}`)).data,createUser:async e=>(await Ge.post("/users",e)).data,updateUser:async(e,t)=>(await Ge.put(`/users/${e}`,t)).data,changeUserPassword:async(e,t)=>(await Ge.patch(`/users/${e}/password`,{newPassword:t})).data,deleteUser:async e=>(await Ge.delete(`/users/${e}`)).data,getUserStats:async()=>(await Ge.get("/users/stats")).data},Gs=tn((e,t)=>({users:[],selectedUser:null,stats:null,pagination:{page:1,limit:10,total:0,totalPages:0},filters:{search:"",role:"",isActive:null},isLoading:!1,error:null,fetchUsers:async(r={})=>{var a,i;try{e({isLoading:!0,error:null});const n=await We.getUsers({page:t().pagination.page,limit:t().pagination.limit,search:t().filters.search,role:t().filters.role,isActive:t().filters.isActive,...r});e({users:n.data.users,pagination:n.data.pagination,isLoading:!1,error:null})}catch(n){throw e({isLoading:!1,error:((i=(a=n.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to fetch users"}),n}},fetchUserById:async r=>{var a,i;try{e({isLoading:!0,error:null});const n=await We.getUserById(r);e({selectedUser:n.data.user,isLoading:!1,error:null})}catch(n){throw e({isLoading:!1,error:((i=(a=n.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to fetch user"}),n}},createUser:async r=>{var a,i;try{e({isLoading:!0,error:null}),await We.createUser(r),await t().fetchUsers()}catch(n){throw e({isLoading:!1,error:((i=(a=n.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to create user"}),n}},updateUser:async(r,a)=>{var i,n,o;try{e({isLoading:!0,error:null}),await We.updateUser(r,a),await t().fetchUsers(),((i=t().selectedUser)==null?void 0:i.id)===r&&await t().fetchUserById(r)}catch(l){throw e({isLoading:!1,error:((o=(n=l.response)==null?void 0:n.data)==null?void 0:o.message)||"Failed to update user"}),l}},changeUserPassword:async(r,a)=>{var i,n;try{e({isLoading:!0,error:null}),await We.changeUserPassword(r,a),e({isLoading:!1,error:null})}catch(o){throw e({isLoading:!1,error:((n=(i=o.response)==null?void 0:i.data)==null?void 0:n.message)||"Failed to change password"}),o}},deleteUser:async r=>{var a,i,n;try{e({isLoading:!0,error:null}),await We.deleteUser(r),await t().fetchUsers(),((a=t().selectedUser)==null?void 0:a.id)===r&&e({selectedUser:null})}catch(o){throw e({isLoading:!1,error:((n=(i=o.response)==null?void 0:i.data)==null?void 0:n.message)||"Failed to delete user"}),o}},fetchUserStats:async()=>{var r,a;try{e({isLoading:!0,error:null});const i=await We.getUserStats();e({stats:i.data.stats,isLoading:!1,error:null})}catch(i){throw e({isLoading:!1,error:((a=(r=i.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch user stats"}),i}},setSelectedUser:r=>{e({selectedUser:r})},updateFilters:r=>{e(a=>({filters:{...a.filters,...r},pagination:{...a.pagination,page:1}}))},clearError:()=>{e({error:null})},setLoading:r=>{e({isLoading:r})}})),hp=()=>{const{user:e}=Ne(),[t,r]=w.useState([]),[a,i]=w.useState(!1);w.useEffect(()=>{n()},[]);const n=async()=>{var d,u;try{i(!0);const p=await We.getUsers();r(p.data.users)}catch(p){O.error(((u=(d=p.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to load users")}finally{i(!1)}},o=async(d,u)=>{var p,m;try{i(!0),await Ft.updateUserRole(d,{role:u}),O.success("User role updated successfully"),n()}catch(f){O.error(((m=(p=f.response)==null?void 0:p.data)==null?void 0:m.message)||"Failed to update user role")}finally{i(!1)}},l=d=>{switch(d){case"ADMIN":return"bg-red-100 text-red-800";case"USER":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return(e==null?void 0:e.role)!=="ADMIN"?s("div",{className:"text-center py-8 text-gray-500",children:"You don't have permission to access this page."}):a?s("div",{className:"flex justify-center items-center p-4",children:s("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):c("div",{className:"space-y-4",children:[c("div",{className:"flex justify-between items-center",children:[s("h3",{className:"text-lg font-semibold text-gray-900",children:"User Role Management"}),s("p",{className:"text-sm text-gray-500",children:"Manage user roles across the system"})]}),s("div",{className:"bg-white rounded-lg shadow",children:s("div",{className:"overflow-x-auto",children:c("table",{className:"min-w-full divide-y divide-gray-200",children:[s("thead",{className:"bg-gray-50",children:c("tr",{children:[s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Role"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(d=>c("tr",{children:[s("td",{className:"px-6 py-4 whitespace-nowrap",children:c("div",{className:"flex items-center",children:[s("div",{className:"flex-shrink-0 h-10 w-10",children:s("img",{className:"h-10 w-10 rounded-full",src:d.avatar||`https://ui-avatars.com/api/?name=${d.name}`,alt:d.name})}),c("div",{className:"ml-4",children:[s("div",{className:"text-sm font-medium text-gray-900",children:d.name}),s("div",{className:"text-sm text-gray-500",children:d.email})]})]})}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l(d.role)}`,children:d.role})}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.isActive?"Active":"Inactive"})}),c("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[d.id!==(e==null?void 0:e.id)&&c("select",{value:d.role,onChange:u=>o(d.id,u.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[s("option",{value:"USER",children:"User"}),s("option",{value:"ADMIN",children:"Admin"})]}),d.id===(e==null?void 0:e.id)&&s("span",{className:"text-gray-400 text-xs",children:"Current User"})]})]},d.id))})]})})}),t.length===0&&s("div",{className:"text-center py-8 text-gray-500",children:"No users found."})]})},ui=({isOpen:e,onClose:t,mode:r,user:a})=>{const{createUser:i,updateUser:n,isLoading:o}=Gs(),[l,d]=w.useState({name:"",email:"",password:"",role:"USER",avatar:"",isActive:!0}),[u,p]=w.useState({});w.useEffect(()=>{d(r==="edit"&&a?{name:a.name,email:a.email,password:"",role:a.role,avatar:a.avatar||"",isActive:a.isActive}:{name:"",email:"",password:"",role:"USER",avatar:"",isActive:!0}),p({})},[r,a]);const m=()=>{const b={};return l.name.trim()||(b.name="Name is required"),l.email.trim()?/\S+@\S+\.\S+/.test(l.email)||(b.email="Email is invalid"):b.email="Email is required",r==="create"&&!l.password?b.password="Password is required":l.password&&l.password.length<6&&(b.password="Password must be at least 6 characters"),p(b),Object.keys(b).length===0},f=async b=>{if(b.preventDefault(),!!m())try{r==="create"?(await i({name:l.name,email:l.email,password:l.password,role:l.role,avatar:l.avatar||void 0}),Xe.success("User created successfully")):(await n(a.id,{name:l.name,email:l.email,role:l.role,avatar:l.avatar||void 0,isActive:l.isActive}),Xe.success("User updated successfully")),t()}catch{}},g=(b,h)=>{d(v=>({...v,[b]:h})),u[b]&&p(v=>({...v,[b]:""}))};return e?s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[c("div",{className:"flex items-center justify-between p-6 border-b",children:[s("h2",{className:"text-xl font-semibold text-gray-900",children:r==="create"?"Create New User":"Edit User"}),s("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s(Qe,{className:"w-5 h-5"})})]}),c("form",{onSubmit:f,className:"p-6 space-y-4",children:[c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),c("div",{className:"relative",children:[s(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s("input",{type:"text",value:l.name,onChange:b=>g("name",b.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-md focus:ring-primary-500 focus:border-primary-500 ${u.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter full name"})]}),u.name&&s("p",{className:"mt-1 text-sm text-red-600",children:u.name})]}),c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),c("div",{className:"relative",children:[s(Xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s("input",{type:"email",value:l.email,onChange:b=>g("email",b.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-md focus:ring-primary-500 focus:border-primary-500 ${u.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"})]}),u.email&&s("p",{className:"mt-1 text-sm text-red-600",children:u.email})]}),c("div",{children:[c("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",r==="edit"&&"(leave blank to keep current)"]}),c("div",{className:"relative",children:[s(Za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s("input",{type:"password",value:l.password,onChange:b=>g("password",b.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-md focus:ring-primary-500 focus:border-primary-500 ${u.password?"border-red-500":"border-gray-300"}`,placeholder:r==="create"?"Enter password":"Enter new password"})]}),u.password&&s("p",{className:"mt-1 text-sm text-red-600",children:u.password})]}),c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),c("div",{className:"relative",children:[s(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),c("select",{value:l.role,onChange:b=>g("role",b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",children:[s("option",{value:"USER",children:"User"}),s("option",{value:"MANAGER",children:"Manager"}),s("option",{value:"ADMIN",children:"Admin"})]})]})]}),c("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Avatar URL (optional)"}),c("div",{className:"relative",children:[s(Pl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s("input",{type:"url",value:l.avatar,onChange:b=>g("avatar",b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",placeholder:"https://example.com/avatar.jpg"})]})]}),r==="edit"&&s("div",{children:c("label",{className:"flex items-center",children:[s("input",{type:"checkbox",checked:l.isActive,onChange:b=>g("isActive",b.target.checked),className:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50"}),s("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]})}),c("div",{className:"flex justify-end space-x-3 pt-4",children:[s("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),s("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Saving...":r==="create"?"Create User":"Update User"})]})]})]})}):null},vp=({isOpen:e,onClose:t,user:r})=>{if(!e)return null;const a=n=>{switch(n){case"ADMIN":return"bg-red-100 text-red-800";case"MANAGER":return"bg-blue-100 text-blue-800";case"USER":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},i=n=>n?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return s("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[c("div",{className:"flex items-center justify-between p-6 border-b",children:[s("h2",{className:"text-xl font-semibold text-gray-900",children:"User Details"}),s("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s(Qe,{className:"w-5 h-5"})})]}),c("div",{className:"p-6 space-y-4",children:[c("div",{className:"flex items-center space-x-4",children:[s("div",{className:"flex-shrink-0",children:r.avatar?s("img",{className:"h-16 w-16 rounded-full",src:r.avatar,alt:r.name}):s("div",{className:"h-16 w-16 rounded-full bg-gray-300 flex items-center justify-center",children:s("span",{className:"text-xl font-medium text-gray-700",children:r.name.charAt(0).toUpperCase()})})}),c("div",{children:[s("h3",{className:"text-lg font-medium text-gray-900",children:r.name}),s("p",{className:"text-sm text-gray-500",children:r.email})]})]}),c("div",{className:"space-y-3",children:[c("div",{className:"flex items-center space-x-3",children:[s(Xt,{className:"w-4 h-4 text-gray-400"}),s("span",{className:"text-sm text-gray-600",children:r.email})]}),c("div",{className:"flex items-center space-x-3",children:[s(Mr,{className:"w-4 h-4 text-gray-400"}),s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a(r.role)}`,children:r.role})]}),c("div",{className:"flex items-center space-x-3",children:[s(Ce,{className:"w-4 h-4 text-gray-400"}),s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${i(r.isActive)}`,children:r.isActive?"Active":"Inactive"})]}),c("div",{className:"flex items-center space-x-3",children:[s(pe,{className:"w-4 h-4 text-gray-400"}),c("span",{className:"text-sm text-gray-600",children:["Joined: ",new Date(r.createdAt).toLocaleDateString()]})]}),r.lastLoginAt&&c("div",{className:"flex items-center space-x-3",children:[s(pe,{className:"w-4 h-4 text-gray-400"}),c("span",{className:"text-sm text-gray-600",children:["Last login: ",new Date(r.lastLoginAt).toLocaleDateString()]})]})]})]}),s("div",{className:"flex justify-end p-6 border-t",children:s("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Close"})})]})})},bp=()=>{const{user:e}=Ne(),{users:t,stats:r,pagination:a,filters:i,isLoading:n,error:o,fetchUsers:l,fetchUserStats:d,deleteUser:u,updateFilters:p,clearError:m}=Gs(),[f,g]=w.useState(!1),[b,h]=w.useState(!1),[v,x]=w.useState(!1),[y,N]=w.useState(!1),[S,E]=w.useState(null),[C,k]=w.useState(""),[B,T]=w.useState("users"),M=(e==null?void 0:e.role)==="ADMIN";w.useEffect(()=>{l(),M&&d()},[l,d,M]),w.useEffect(()=>{o&&(Xe.error(o),m())},[o,m]);const j=P=>{k(P),p({search:P})},_=(P,K)=>{p({[P]:K})},Y=P=>{l({page:P})},R=async()=>{if(S)try{await u(S.id),Xe.success("User deleted successfully"),N(!1),E(null)}catch{}},W=P=>{E(P),h(!0)},X=P=>{E(P),x(!0)},ce=P=>{switch(P){case"ADMIN":return"bg-red-100 text-red-800";case"USER":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},G=P=>P?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return n&&t.length===0?s(tt,{}):c("div",{className:"space-y-6",children:[c("div",{className:"flex justify-between items-center",children:[c("div",{children:[s("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),s("p",{className:"text-gray-600",children:"Manage users and their permissions"})]}),M&&c("button",{onClick:()=>g(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[s(ut,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),s("div",{className:"border-b border-gray-200",children:c("nav",{className:"-mb-px flex space-x-8",children:[s("button",{onClick:()=>T("users"),className:`py-2 px-1 border-b-2 font-medium text-sm ${B==="users"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Users"}),M&&s("button",{onClick:()=>T("roles"),className:`py-2 px-1 border-b-2 font-medium text-sm ${B==="roles"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Role Management"})]})}),B==="users"&&c(Ye,{children:[M&&r&&c("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[s("div",{className:"bg-white p-4 rounded-lg shadow",children:c("div",{className:"flex items-center",children:[s(ct,{className:"w-8 h-8 text-blue-600"}),c("div",{className:"ml-3",children:[s("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),s("p",{className:"text-2xl font-bold text-gray-900",children:r.totalUsers})]})]})}),s("div",{className:"bg-white p-4 rounded-lg shadow",children:c("div",{className:"flex items-center",children:[s(Il,{className:"w-8 h-8 text-green-600"}),c("div",{className:"ml-3",children:[s("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),s("p",{className:"text-2xl font-bold text-gray-900",children:r.activeUsers})]})]})}),s("div",{className:"bg-white p-4 rounded-lg shadow",children:c("div",{className:"flex items-center",children:[s(Tl,{className:"w-8 h-8 text-red-600"}),c("div",{className:"ml-3",children:[s("p",{className:"text-sm font-medium text-gray-500",children:"Inactive Users"}),s("p",{className:"text-2xl font-bold text-gray-900",children:r.inactiveUsers})]})]})}),s("div",{className:"bg-white p-4 rounded-lg shadow",children:c("div",{className:"flex items-center",children:[s(pe,{className:"w-8 h-8 text-purple-600"}),c("div",{className:"ml-3",children:[s("p",{className:"text-sm font-medium text-gray-500",children:"Recent Registrations"}),s("p",{className:"text-2xl font-bold text-gray-900",children:r.recentRegistrations})]})]})}),s("div",{className:"bg-white p-4 rounded-lg shadow",children:c("div",{className:"flex items-center",children:[s(Mr,{className:"w-8 h-8 text-orange-600"}),c("div",{className:"ml-3",children:[s("p",{className:"text-sm font-medium text-gray-500",children:"Admins"}),s("p",{className:"text-2xl font-bold text-gray-900",children:r.usersByRole.ADMIN||0})]})]})})]}),s("div",{className:"bg-white p-4 rounded-lg shadow",children:c("div",{className:"flex flex-col md:flex-row gap-4",children:[s("div",{className:"flex-1",children:c("div",{className:"relative",children:[s(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s("input",{type:"text",placeholder:"Search users...",value:C,onChange:P=>j(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500"})]})}),c("div",{className:"flex gap-2",children:[c("select",{value:i.role,onChange:P=>_("role",P.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",children:[s("option",{value:"",children:"All Roles"}),s("option",{value:"ADMIN",children:"Admin"}),s("option",{value:"USER",children:"User"})]}),c("select",{value:i.isActive===null?"":i.isActive?"true":"false",onChange:P=>_("isActive",P.target.value===""?null:P.target.value==="true"),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",children:[s("option",{value:"",children:"All Status"}),s("option",{value:"true",children:"Active"}),s("option",{value:"false",children:"Inactive"})]})]})]})}),c("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s("div",{className:"overflow-x-auto",children:c("table",{className:"min-w-full divide-y divide-gray-200",children:[s("thead",{className:"bg-gray-50",children:c("tr",{children:[s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),s("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(P=>c("tr",{className:"hover:bg-gray-50",children:[s("td",{className:"px-6 py-4 whitespace-nowrap",children:c("div",{className:"flex items-center",children:[s("div",{className:"flex-shrink-0 h-10 w-10",children:P.avatar?s("img",{className:"h-10 w-10 rounded-full",src:P.avatar,alt:P.name}):s("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:s("span",{className:"text-sm font-medium text-gray-700",children:P.name.charAt(0).toUpperCase()})})}),c("div",{className:"ml-4",children:[s("div",{className:"text-sm font-medium text-gray-900",children:P.name}),c("div",{className:"text-sm text-gray-500 flex items-center",children:[s(Xt,{className:"w-3 h-3 mr-1"}),P.email]})]})]})}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ce(P.role)}`,children:P.role})}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:s("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G(P.isActive)}`,children:P.isActive?"Active":"Inactive"})}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(P.createdAt).toLocaleDateString()}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.lastLoginAt?new Date(P.lastLoginAt).toLocaleDateString():"Never"}),s("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:c("div",{className:"flex justify-end space-x-2",children:[s("button",{onClick:()=>X(P),className:"text-gray-400 hover:text-gray-600",title:"View Details",children:s(Zt,{className:"w-4 h-4"})}),M&&c(Ye,{children:[s("button",{onClick:()=>W(P),className:"text-blue-400 hover:text-blue-600",title:"Edit User",children:s(xt,{className:"w-4 h-4"})}),s("button",{onClick:()=>{E(P),N(!0)},className:"text-red-400 hover:text-red-600",title:"Delete User",children:s(Et,{className:"w-4 h-4"})})]})]})})]},P.id))})]})}),t.length===0&&!n&&c("div",{className:"text-center py-12",children:[s(ct,{className:"mx-auto h-12 w-12 text-gray-400"}),s("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users found"}),s("p",{className:"mt-1 text-sm text-gray-500",children:i.search||i.role||i.isActive!==null?"Try adjusting your filters.":"Get started by creating a new user."})]})]}),a.totalPages>1&&s(un,{currentPage:a.page,totalPages:a.totalPages,onPageChange:Y})]}),B==="roles"&&s(hp,{}),f&&s(ui,{isOpen:f,onClose:()=>g(!1),mode:"create"}),b&&S&&s(ui,{isOpen:b,onClose:()=>h(!1),mode:"edit",user:S}),v&&S&&s(vp,{isOpen:v,onClose:()=>x(!1),user:S}),y&&S&&s(dn,{isOpen:y,onClose:()=>N(!1),onConfirm:R,title:"Delete User",message:`Are you sure you want to delete ${S.name}? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger"})]})},yp=()=>{const{user:e}=Ne();return c("div",{className:"space-y-6",children:[c("div",{children:[s("h1",{className:"text-2xl font-bold text-secondary-900",children:"Profile"}),s("p",{className:"text-secondary-600",children:"Manage your account settings"})]}),c("div",{className:"card",children:[s("div",{className:"card-header",children:s("h2",{className:"card-title",children:"User Information"})}),s("div",{className:"card-content",children:c("div",{className:"space-y-4",children:[c("div",{children:[s("label",{className:"block text-sm font-medium text-secondary-700",children:"Name"}),s("p",{className:"text-secondary-900",children:e==null?void 0:e.name})]}),c("div",{children:[s("label",{className:"block text-sm font-medium text-secondary-700",children:"Email"}),s("p",{className:"text-secondary-900",children:e==null?void 0:e.email})]}),c("div",{children:[s("label",{className:"block text-sm font-medium text-secondary-700",children:"Role"}),s("p",{className:"text-secondary-900",children:e==null?void 0:e.role})]})]})})]})]})};function Wa(e,t){return Wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Wa(e,t)}function Ws(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Wa(e,t)}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},F.apply(null,arguments)}function Vt(e){"@babel/helpers - typeof";return Vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(e)}function xp(e,t){if(Vt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Vt(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wp(e){var t=xp(e,"string");return Vt(t)=="symbol"?t:t+""}function Np(e,t,r){return(t=wp(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pi(Object(r),!0).forEach(function(a){Np(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pi(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ue(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var fi=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ba=function(){return Math.random().toString(36).substring(7).split("").join(".")},gi={INIT:"@@redux/INIT"+ba(),REPLACE:"@@redux/REPLACE"+ba(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ba()}};function Sp(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Hs(e,t,r){var a;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ue(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ue(1));return r(Hs)(e,t)}if(typeof e!="function")throw new Error(ue(2));var i=e,n=t,o=[],l=o,d=!1;function u(){l===o&&(l=o.slice())}function p(){if(d)throw new Error(ue(3));return n}function m(h){if(typeof h!="function")throw new Error(ue(4));if(d)throw new Error(ue(5));var v=!0;return u(),l.push(h),function(){if(v){if(d)throw new Error(ue(6));v=!1,u();var y=l.indexOf(h);l.splice(y,1),o=null}}}function f(h){if(!Sp(h))throw new Error(ue(7));if(typeof h.type>"u")throw new Error(ue(8));if(d)throw new Error(ue(9));try{d=!0,n=i(n,h)}finally{d=!1}for(var v=o=l,x=0;x<v.length;x++){var y=v[x];y()}return h}function g(h){if(typeof h!="function")throw new Error(ue(10));i=h,f({type:gi.REPLACE})}function b(){var h,v=m;return h={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(ue(11));function N(){y.next&&y.next(p())}N();var S=v(N);return{unsubscribe:S}}},h[fi]=function(){return this},h}return f({type:gi.INIT}),a={dispatch:f,subscribe:m,getState:p,replaceReducer:g},a[fi]=b,a}function hi(e,t){return function(){return t(e.apply(this,arguments))}}function vi(e,t){if(typeof e=="function")return hi(e,t);if(typeof e!="object"||e===null)throw new Error(ue(16));var r={};for(var a in e){var i=e[a];typeof i=="function"&&(r[a]=hi(i,t))}return r}function qs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return a}:t.length===1?t[0]:t.reduce(function(a,i){return function(){return a(i.apply(void 0,arguments))}})}function Dp(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(a){return function(){var i=a.apply(void 0,arguments),n=function(){throw new Error(ue(15))},o={getState:i.getState,dispatch:function(){return n.apply(void 0,arguments)}},l=t.map(function(d){return d(o)});return n=qs.apply(void 0,l)(i.dispatch),mi(mi({},i),{},{dispatch:n})}}}var Vs=V.createContext(null);function Ep(e){e()}var zs=Ep,Cp=function(t){return zs=t},Pp=function(){return zs};function Ip(){var e=Pp(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var i=t;i;)i.callback(),i=i.next})},get:function(){for(var i=[],n=t;n;)i.push(n),n=n.next;return i},subscribe:function(i){var n=!0,o=r={callback:i,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!n||t===null||(n=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var bi={notify:function(){},get:function(){return[]}};function _s(e,t){var r,a=bi;function i(m){return d(),a.subscribe(m)}function n(){a.notify()}function o(){p.onStateChange&&p.onStateChange()}function l(){return!!r}function d(){r||(r=t?t.addNestedSub(o):e.subscribe(o),a=Ip())}function u(){r&&(r(),r=void 0,a.clear(),a=bi)}var p={addNestedSub:i,notifyNestedSubs:n,handleChangeWrapper:o,isSubscribed:l,trySubscribe:d,tryUnsubscribe:u,getListeners:function(){return a}};return p}var Js=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect;function Tp(e){var t=e.store,r=e.context,a=e.children,i=w.useMemo(function(){var l=_s(t);return{store:t,subscription:l}},[t]),n=w.useMemo(function(){return t.getState()},[t]);Js(function(){var l=i.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),n!==t.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[i,n]);var o=r||Vs;return V.createElement(o.Provider,{value:i},a)}function Ir(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Ks={exports:{}},H={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ne=typeof Symbol=="function"&&Symbol.for,mn=ne?Symbol.for("react.element"):60103,fn=ne?Symbol.for("react.portal"):60106,Jr=ne?Symbol.for("react.fragment"):60107,Kr=ne?Symbol.for("react.strict_mode"):60108,Yr=ne?Symbol.for("react.profiler"):60114,Xr=ne?Symbol.for("react.provider"):60109,Zr=ne?Symbol.for("react.context"):60110,gn=ne?Symbol.for("react.async_mode"):60111,Qr=ne?Symbol.for("react.concurrent_mode"):60111,ea=ne?Symbol.for("react.forward_ref"):60112,ta=ne?Symbol.for("react.suspense"):60113,Ap=ne?Symbol.for("react.suspense_list"):60120,ra=ne?Symbol.for("react.memo"):60115,aa=ne?Symbol.for("react.lazy"):60116,Rp=ne?Symbol.for("react.block"):60121,Op=ne?Symbol.for("react.fundamental"):60117,kp=ne?Symbol.for("react.responder"):60118,Bp=ne?Symbol.for("react.scope"):60119;function be(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case mn:switch(e=e.type,e){case gn:case Qr:case Jr:case Yr:case Kr:case ta:return e;default:switch(e=e&&e.$$typeof,e){case Zr:case ea:case aa:case ra:case Xr:return e;default:return t}}case fn:return t}}}function Ys(e){return be(e)===Qr}H.AsyncMode=gn;H.ConcurrentMode=Qr;H.ContextConsumer=Zr;H.ContextProvider=Xr;H.Element=mn;H.ForwardRef=ea;H.Fragment=Jr;H.Lazy=aa;H.Memo=ra;H.Portal=fn;H.Profiler=Yr;H.StrictMode=Kr;H.Suspense=ta;H.isAsyncMode=function(e){return Ys(e)||be(e)===gn};H.isConcurrentMode=Ys;H.isContextConsumer=function(e){return be(e)===Zr};H.isContextProvider=function(e){return be(e)===Xr};H.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===mn};H.isForwardRef=function(e){return be(e)===ea};H.isFragment=function(e){return be(e)===Jr};H.isLazy=function(e){return be(e)===aa};H.isMemo=function(e){return be(e)===ra};H.isPortal=function(e){return be(e)===fn};H.isProfiler=function(e){return be(e)===Yr};H.isStrictMode=function(e){return be(e)===Kr};H.isSuspense=function(e){return be(e)===ta};H.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Jr||e===Qr||e===Yr||e===Kr||e===ta||e===Ap||typeof e=="object"&&e!==null&&(e.$$typeof===aa||e.$$typeof===ra||e.$$typeof===Xr||e.$$typeof===Zr||e.$$typeof===ea||e.$$typeof===Op||e.$$typeof===kp||e.$$typeof===Bp||e.$$typeof===Rp)};H.typeOf=be;Ks.exports=H;var Lp=Ks.exports,hn=Lp,jp={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Mp={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Fp={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Xs={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},vn={};vn[hn.ForwardRef]=Fp;vn[hn.Memo]=Xs;function yi(e){return hn.isMemo(e)?Xs:vn[e.$$typeof]||jp}var $p=Object.defineProperty,Up=Object.getOwnPropertyNames,xi=Object.getOwnPropertySymbols,Gp=Object.getOwnPropertyDescriptor,Wp=Object.getPrototypeOf,wi=Object.prototype;function Zs(e,t,r){if(typeof t!="string"){if(wi){var a=Wp(t);a&&a!==wi&&Zs(e,a,r)}var i=Up(t);xi&&(i=i.concat(xi(t)));for(var n=yi(e),o=yi(t),l=0;l<i.length;++l){var d=i[l];if(!Mp[d]&&!(r&&r[d])&&!(o&&o[d])&&!(n&&n[d])){var u=Gp(t,d);try{$p(e,d,u)}catch{}}}}return e}var Hp=Zs;const Ni=ts(Hp);var Qs={exports:{}},z={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=60103,ia=60106,ar=60107,nr=60108,ir=60114,sr=60109,or=60110,lr=60112,cr=60113,bn=60120,dr=60115,ur=60116,eo=60121,to=60122,ro=60117,ao=60129,no=60131;if(typeof Symbol=="function"&&Symbol.for){var ie=Symbol.for;na=ie("react.element"),ia=ie("react.portal"),ar=ie("react.fragment"),nr=ie("react.strict_mode"),ir=ie("react.profiler"),sr=ie("react.provider"),or=ie("react.context"),lr=ie("react.forward_ref"),cr=ie("react.suspense"),bn=ie("react.suspense_list"),dr=ie("react.memo"),ur=ie("react.lazy"),eo=ie("react.block"),to=ie("react.server.block"),ro=ie("react.fundamental"),ao=ie("react.debug_trace_mode"),no=ie("react.legacy_hidden")}function Ie(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case na:switch(e=e.type,e){case ar:case ir:case nr:case cr:case bn:return e;default:switch(e=e&&e.$$typeof,e){case or:case lr:case ur:case dr:case sr:return e;default:return t}}case ia:return t}}}var qp=sr,Vp=na,zp=lr,_p=ar,Jp=ur,Kp=dr,Yp=ia,Xp=ir,Zp=nr,Qp=cr;z.ContextConsumer=or;z.ContextProvider=qp;z.Element=Vp;z.ForwardRef=zp;z.Fragment=_p;z.Lazy=Jp;z.Memo=Kp;z.Portal=Yp;z.Profiler=Xp;z.StrictMode=Zp;z.Suspense=Qp;z.isAsyncMode=function(){return!1};z.isConcurrentMode=function(){return!1};z.isContextConsumer=function(e){return Ie(e)===or};z.isContextProvider=function(e){return Ie(e)===sr};z.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===na};z.isForwardRef=function(e){return Ie(e)===lr};z.isFragment=function(e){return Ie(e)===ar};z.isLazy=function(e){return Ie(e)===ur};z.isMemo=function(e){return Ie(e)===dr};z.isPortal=function(e){return Ie(e)===ia};z.isProfiler=function(e){return Ie(e)===ir};z.isStrictMode=function(e){return Ie(e)===nr};z.isSuspense=function(e){return Ie(e)===cr};z.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ar||e===ir||e===ao||e===nr||e===cr||e===bn||e===no||typeof e=="object"&&e!==null&&(e.$$typeof===ur||e.$$typeof===dr||e.$$typeof===sr||e.$$typeof===or||e.$$typeof===lr||e.$$typeof===ro||e.$$typeof===eo||e[0]===to)};z.typeOf=Ie;Qs.exports=z;var em=Qs.exports,tm=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],rm=["reactReduxForwardedRef"],am=[],nm=[null,null];function im(e,t){var r=e[1];return[t.payload,r+1]}function Si(e,t,r){Js(function(){return e.apply(void 0,t)},r)}function sm(e,t,r,a,i,n,o){e.current=a,t.current=i,r.current=!1,n.current&&(n.current=null,o())}function om(e,t,r,a,i,n,o,l,d,u){if(e){var p=!1,m=null,f=function(){if(!p){var h=t.getState(),v,x;try{v=a(h,i.current)}catch(y){x=y,m=y}x||(m=null),v===n.current?o.current||d():(n.current=v,l.current=v,o.current=!0,u({type:"STORE_UPDATED",payload:{error:x}}))}};r.onStateChange=f,r.trySubscribe(),f();var g=function(){if(p=!0,r.tryUnsubscribe(),r.onStateChange=null,m)throw m};return g}}var lm=function(){return[null,0]};function cm(e,t){t===void 0&&(t={});var r=t,a=r.getDisplayName,i=a===void 0?function(N){return"ConnectAdvanced("+N+")"}:a,n=r.methodName,o=n===void 0?"connectAdvanced":n,l=r.renderCountProp,d=l===void 0?void 0:l,u=r.shouldHandleStateChanges,p=u===void 0?!0:u,m=r.storeKey,f=m===void 0?"store":m;r.withRef;var g=r.forwardRef,b=g===void 0?!1:g,h=r.context,v=h===void 0?Vs:h,x=Ir(r,tm),y=v;return function(S){var E=S.displayName||S.name||"Component",C=i(E),k=F({},x,{getDisplayName:i,methodName:o,renderCountProp:d,shouldHandleStateChanges:p,storeKey:f,displayName:C,wrappedComponentName:E,WrappedComponent:S}),B=x.pure;function T(R){return e(R.dispatch,k)}var M=B?w.useMemo:function(R){return R()};function j(R){var W=w.useMemo(function(){var Oe=R.reactReduxForwardedRef,je=Ir(R,rm);return[R.context,Oe,je]},[R]),X=W[0],ce=W[1],G=W[2],P=w.useMemo(function(){return X&&X.Consumer&&em.isContextConsumer(V.createElement(X.Consumer,null))?X:y},[X,y]),K=w.useContext(P),Te=!!R.store&&!!R.store.getState&&!!R.store.dispatch;K&&K.store;var te=Te?R.store:K.store,Be=w.useMemo(function(){return T(te)},[te]),ft=w.useMemo(function(){if(!p)return nm;var Oe=_s(te,Te?null:K.subscription),je=Oe.notifyNestedSubs.bind(Oe);return[Oe,je]},[te,Te,K]),Ae=ft[0],gt=ft[1],Re=w.useMemo(function(){return Te?K:F({},K,{subscription:Ae})},[Te,K,Ae]),ht=w.useReducer(im,am,lm),Rt=ht[0],Ue=Rt[0],Ot=ht[1];if(Ue&&Ue.error)throw Ue.error;var fr=w.useRef(),kt=w.useRef(G),I=w.useRef(),J=w.useRef(!1),Z=M(function(){return I.current&&G===kt.current?I.current:Be(te.getState(),G)},[te,Ue,G]);Si(sm,[kt,fr,J,G,Z,I,gt]),Si(om,[p,te,Ae,Be,kt,fr,J,I,gt,Ot],[te,Ae,Be]);var Le=w.useMemo(function(){return V.createElement(S,F({},Z,{ref:ce}))},[ce,S,Z]),Se=w.useMemo(function(){return p?V.createElement(P.Provider,{value:Re},Le):Le},[P,Le,Re]);return Se}var _=B?V.memo(j):j;if(_.WrappedComponent=S,_.displayName=j.displayName=C,b){var Y=V.forwardRef(function(W,X){return V.createElement(_,F({},W,{reactReduxForwardedRef:X}))});return Y.displayName=C,Y.WrappedComponent=S,Ni(Y,S)}return Ni(_,S)}}function Di(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function ya(e,t){if(Di(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(var i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!Di(e[r[i]],t[r[i]]))return!1;return!0}function dm(e,t){var r={},a=function(o){var l=e[o];typeof l=="function"&&(r[o]=function(){return t(l.apply(void 0,arguments))})};for(var i in e)a(i);return r}function yn(e){return function(r,a){var i=e(r,a);function n(){return i}return n.dependsOnOwnProps=!1,n}}function Ei(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function io(e,t){return function(a,i){i.displayName;var n=function(l,d){return n.dependsOnOwnProps?n.mapToProps(l,d):n.mapToProps(l)};return n.dependsOnOwnProps=!0,n.mapToProps=function(l,d){n.mapToProps=e,n.dependsOnOwnProps=Ei(e);var u=n(l,d);return typeof u=="function"&&(n.mapToProps=u,n.dependsOnOwnProps=Ei(u),u=n(l,d)),u},n}}function um(e){return typeof e=="function"?io(e):void 0}function pm(e){return e?void 0:yn(function(t){return{dispatch:t}})}function mm(e){return e&&typeof e=="object"?yn(function(t){return dm(e,t)}):void 0}const fm=[um,pm,mm];function gm(e){return typeof e=="function"?io(e):void 0}function hm(e){return e?void 0:yn(function(){return{}})}const vm=[gm,hm];function bm(e,t,r){return F({},r,e,t)}function ym(e){return function(r,a){a.displayName;var i=a.pure,n=a.areMergedPropsEqual,o=!1,l;return function(u,p,m){var f=e(u,p,m);return o?(!i||!n(f,l))&&(l=f):(o=!0,l=f),l}}}function xm(e){return typeof e=="function"?ym(e):void 0}function wm(e){return e?void 0:function(){return bm}}const Nm=[xm,wm];var Sm=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Dm(e,t,r,a){return function(n,o){return r(e(n,o),t(a,o),o)}}function Em(e,t,r,a,i){var n=i.areStatesEqual,o=i.areOwnPropsEqual,l=i.areStatePropsEqual,d=!1,u,p,m,f,g;function b(N,S){return u=N,p=S,m=e(u,p),f=t(a,p),g=r(m,f,p),d=!0,g}function h(){return m=e(u,p),t.dependsOnOwnProps&&(f=t(a,p)),g=r(m,f,p),g}function v(){return e.dependsOnOwnProps&&(m=e(u,p)),t.dependsOnOwnProps&&(f=t(a,p)),g=r(m,f,p),g}function x(){var N=e(u,p),S=!l(N,m);return m=N,S&&(g=r(m,f,p)),g}function y(N,S){var E=!o(S,p),C=!n(N,u,S,p);return u=N,p=S,E&&C?h():E?v():C?x():g}return function(S,E){return d?y(S,E):b(S,E)}}function Cm(e,t){var r=t.initMapStateToProps,a=t.initMapDispatchToProps,i=t.initMergeProps,n=Ir(t,Sm),o=r(e,n),l=a(e,n),d=i(e,n),u=n.pure?Em:Dm;return u(o,l,d,e,n)}var Pm=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function xa(e,t,r){for(var a=t.length-1;a>=0;a--){var i=t[a](e);if(i)return i}return function(n,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function Im(e,t){return e===t}function Tm(e){var t=e===void 0?{}:e,r=t.connectHOC,a=r===void 0?cm:r,i=t.mapStateToPropsFactories,n=i===void 0?vm:i,o=t.mapDispatchToPropsFactories,l=o===void 0?fm:o,d=t.mergePropsFactories,u=d===void 0?Nm:d,p=t.selectorFactory,m=p===void 0?Cm:p;return function(g,b,h,v){v===void 0&&(v={});var x=v,y=x.pure,N=y===void 0?!0:y,S=x.areStatesEqual,E=S===void 0?Im:S,C=x.areOwnPropsEqual,k=C===void 0?ya:C,B=x.areStatePropsEqual,T=B===void 0?ya:B,M=x.areMergedPropsEqual,j=M===void 0?ya:M,_=Ir(x,Pm),Y=xa(g,n,"mapStateToProps"),R=xa(b,l,"mapDispatchToProps"),W=xa(h,u,"mergeProps");return a(m,F({methodName:"connect",getDisplayName:function(ce){return"Connect("+ce+")"},shouldHandleStateChanges:!!g,initMapStateToProps:Y,initMapDispatchToProps:R,initMergeProps:W,pure:N,areStatesEqual:E,areOwnPropsEqual:k,areStatePropsEqual:T,areMergedPropsEqual:j},_))}}const so=Tm();Cp(es.unstable_batchedUpdates);function Am(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function oo(e,t){var r=w.useState(function(){return{inputs:t,result:e()}})[0],a=w.useRef(!0),i=w.useRef(r),n=a.current||!!(t&&i.current.inputs&&Am(t,i.current.inputs)),o=n?i.current:{inputs:t,result:e()};return w.useEffect(function(){a.current=!1,i.current=o},[o]),o.result}function Rm(e,t){return oo(function(){return e},t)}var U=oo,L=Rm,Om=!0,wa="Invariant failed";function km(e,t){if(!e){if(Om)throw new Error(wa);var r=typeof t=="function"?t():t,a=r?"".concat(wa,": ").concat(r):wa;throw new Error(a)}}var De=function(t){var r=t.top,a=t.right,i=t.bottom,n=t.left,o=a-n,l=i-r,d={top:r,right:a,bottom:i,left:n,width:o,height:l,x:n,y:r,center:{x:(a+n)/2,y:(i+r)/2}};return d},xn=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Ci=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Bm=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Na={top:0,right:0,bottom:0,left:0},wn=function(t){var r=t.borderBox,a=t.margin,i=a===void 0?Na:a,n=t.border,o=n===void 0?Na:n,l=t.padding,d=l===void 0?Na:l,u=De(xn(r,i)),p=De(Ci(r,o)),m=De(Ci(p,d));return{marginBox:u,borderBox:De(r),paddingBox:p,contentBox:m,margin:i,border:o,padding:d}},ye=function(t){var r=t.slice(0,-2),a=t.slice(-2);if(a!=="px")return 0;var i=Number(r);return isNaN(i)&&km(!1),i},Lm=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Tr=function(t,r){var a=t.borderBox,i=t.border,n=t.margin,o=t.padding,l=Bm(a,r);return wn({borderBox:l,border:i,margin:n,padding:o})},Ar=function(t,r){return r===void 0&&(r=Lm()),Tr(t,r)},lo=function(t,r){var a={top:ye(r.marginTop),right:ye(r.marginRight),bottom:ye(r.marginBottom),left:ye(r.marginLeft)},i={top:ye(r.paddingTop),right:ye(r.paddingRight),bottom:ye(r.paddingBottom),left:ye(r.paddingLeft)},n={top:ye(r.borderTopWidth),right:ye(r.borderRightWidth),bottom:ye(r.borderBottomWidth),left:ye(r.borderLeftWidth)};return wn({borderBox:t,margin:a,padding:i,border:n})},co=function(t){var r=t.getBoundingClientRect(),a=window.getComputedStyle(t);return lo(r,a)},Pi=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function jm(e,t){return!!(e===t||Pi(e)&&Pi(t))}function Mm(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!jm(e[r],t[r]))return!1;return!0}function re(e,t){t===void 0&&(t=Mm);var r,a=[],i,n=!1;function o(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return n&&r===this&&t(l,a)||(i=e.apply(this,l),n=!0,r=this,a=l),i}return o}var Fm=function(t){var r=[],a=null,i=function(){for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];r=l,!a&&(a=requestAnimationFrame(function(){a=null,t.apply(void 0,r)}))};return i.cancel=function(){a&&(cancelAnimationFrame(a),a=null)},i};const zt=Fm;function uo(e,t){}uo.bind(null,"warn");uo.bind(null,"error");function _e(){}function $m(e,t){return F({},e,{},t)}function xe(e,t,r){var a=t.map(function(i){var n=$m(r,i.options);return e.addEventListener(i.eventName,i.fn,n),function(){e.removeEventListener(i.eventName,i.fn,n)}});return function(){a.forEach(function(n){n()})}}var Um="Invariant failed";function Rr(e){this.message=e}Rr.prototype.toString=function(){return this.message};function A(e,t){if(!e)throw new Rr(Um)}var Gm=function(e){Ws(t,e);function t(){for(var a,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return a=e.call.apply(e,[this].concat(n))||this,a.callbacks=null,a.unbind=_e,a.onWindowError=function(l){var d=a.getCallbacks();d.isDragging()&&d.tryAbort();var u=l.error;u instanceof Rr&&l.preventDefault()},a.getCallbacks=function(){if(!a.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return a.callbacks},a.setCallbacks=function(l){a.callbacks=l},a}var r=t.prototype;return r.componentDidMount=function(){this.unbind=xe(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(i){if(i instanceof Rr){this.setState({});return}throw i},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(V.Component),Wm=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Or=function(t){return t+1},Hm=function(t){return`
  You have lifted an item in position `+Or(t.source.index)+`
`},po=function(t,r){var a=t.droppableId===r.droppableId,i=Or(t.index),n=Or(r.index);return a?`
      You have moved the item from position `+i+`
      to position `+n+`
    `:`
    You have moved the item from position `+i+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+n+`
  `},mo=function(t,r,a){var i=r.droppableId===a.droppableId;return i?`
      The item `+t+`
      has been combined with `+a.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+a.draggableId+`
      in list `+a.droppableId+`
    `},qm=function(t){var r=t.destination;if(r)return po(t.source,r);var a=t.combine;return a?mo(t.draggableId,t.source,a):"You are over an area that cannot be dropped on"},Ii=function(t){return`
  The item has returned to its starting position
  of `+Or(t.index)+`
`},Vm=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Ii(t.source)+`
    `;var r=t.destination,a=t.combine;return r?`
      You have dropped the item.
      `+po(t.source,r)+`
    `:a?`
      You have dropped the item.
      `+mo(t.draggableId,t.source,a)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Ii(t.source)+`
  `},Dr={dragHandleUsageInstructions:Wm,onDragStart:Hm,onDragUpdate:qm,onDragEnd:Vm},ae={x:0,y:0},se=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},fe=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},Je=function(t,r){return t.x===r.x&&t.y===r.y},It=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},mt=function(t,r,a){var i;return a===void 0&&(a=0),i={},i[t]=r,i[t==="x"?"y":"x"]=a,i},_t=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},Ti=function(t,r){return Math.min.apply(Math,r.map(function(a){return _t(t,a)}))},fo=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},zm=function(e,t){var r=De({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},pr=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Ai=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},_m={top:0,right:0,bottom:0,left:0},Jm=function(t,r){return r?pr(t,r.scroll.diff.displacement):t},Km=function(t,r,a){if(a&&a.increasedBy){var i;return F({},t,(i={},i[r.end]=t[r.end]+a.increasedBy[r.line],i))}return t},Ym=function(t,r){return r&&r.shouldClipSubject?zm(r.pageMarginBox,t):De(t)},Nt=function(e){var t=e.page,r=e.withPlaceholder,a=e.axis,i=e.frame,n=Jm(t.marginBox,i),o=Km(n,a,r),l=Ym(o,i);return{page:t,withPlaceholder:r,active:l}},Nn=function(e,t){e.frame||A(!1);var r=e.frame,a=fe(t,r.scroll.initial),i=It(a),n=F({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:a,displacement:i},max:r.scroll.max}}),o=Nt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:n}),l=F({},e,{frame:n,subject:o});return l};function kr(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function Sn(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function rt(e,t){if(e.find)return e.find(t);var r=Sn(e,t);if(r!==-1)return e[r]}function go(e){return Array.prototype.slice.call(e)}var ho=re(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),vo=re(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),sa=re(function(e){return kr(e)}),Xm=re(function(e){return kr(e)}),Tt=re(function(e,t){var r=Xm(t).filter(function(a){return e===a.descriptor.droppableId}).sort(function(a,i){return a.descriptor.index-i.descriptor.index});return r});function Dn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function oa(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var la=re(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),Zm=function(e){var t=e.isMovingForward,r=e.draggable,a=e.destination,i=e.insideDestination,n=e.previousImpact;if(!a.isCombineEnabled)return null;var o=Dn(n);if(!o)return null;function l(h){var v={type:"COMBINE",combine:{draggableId:h,droppableId:a.descriptor.id}};return F({},n,{at:v})}var d=n.displaced.all,u=d.length?d[0]:null;if(t)return u?l(u):null;var p=la(r,i);if(!u){if(!p.length)return null;var m=p[p.length-1];return l(m.descriptor.id)}var f=Sn(p,function(h){return h.descriptor.id===u});f===-1&&A(!1);var g=f-1;if(g<0)return null;var b=p[g];return l(b.descriptor.id)},At=function(e,t){return e.descriptor.droppableId===t.descriptor.id},bo={point:ae,value:0},Jt={invisible:{},visible:{},all:[]},Qm={displaced:Jt,displacedBy:bo,at:null},we=function(e,t){return function(r){return e<=r&&r<=t}},yo=function(e){var t=we(e.top,e.bottom),r=we(e.left,e.right);return function(a){var i=t(a.top)&&t(a.bottom)&&r(a.left)&&r(a.right);if(i)return!0;var n=t(a.top)||t(a.bottom),o=r(a.left)||r(a.right),l=n&&o;if(l)return!0;var d=a.top<e.top&&a.bottom>e.bottom,u=a.left<e.left&&a.right>e.right,p=d&&u;if(p)return!0;var m=d&&o||u&&n;return m}},ef=function(e){var t=we(e.top,e.bottom),r=we(e.left,e.right);return function(a){var i=t(a.top)&&t(a.bottom)&&r(a.left)&&r(a.right);return i}},En={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},xo={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},tf=function(e){return function(t){var r=we(t.top,t.bottom),a=we(t.left,t.right);return function(i){return e===En?r(i.top)&&r(i.bottom):a(i.left)&&a(i.right)}}},rf=function(t,r){var a=r.frame?r.frame.scroll.diff.displacement:ae;return pr(t,a)},af=function(t,r,a){return r.subject.active?a(r.subject.active)(t):!1},nf=function(t,r,a){return a(r)(t)},Cn=function(t){var r=t.target,a=t.destination,i=t.viewport,n=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,l=n?rf(r,a):r;return af(l,a,o)&&nf(l,i,o)},sf=function(t){return Cn(F({},t,{isVisibleThroughFrameFn:yo}))},wo=function(t){return Cn(F({},t,{isVisibleThroughFrameFn:ef}))},of=function(t){return Cn(F({},t,{isVisibleThroughFrameFn:tf(t.destination.axis)}))},lf=function(t,r,a){if(typeof a=="boolean")return a;if(!r)return!0;var i=r.invisible,n=r.visible;if(i[t])return!1;var o=n[t];return o?o.shouldAnimate:!0};function cf(e,t){var r=e.page.marginBox,a={top:t.point.y,right:0,bottom:0,left:t.point.x};return De(xn(r,a))}function Kt(e){var t=e.afterDragging,r=e.destination,a=e.displacedBy,i=e.viewport,n=e.forceShouldAnimate,o=e.last;return t.reduce(function(d,u){var p=cf(u,a),m=u.descriptor.id;d.all.push(m);var f=sf({target:p,destination:r,viewport:i,withDroppableDisplacement:!0});if(!f)return d.invisible[u.descriptor.id]=!0,d;var g=lf(m,o,n),b={draggableId:m,shouldAnimate:g};return d.visible[m]=b,d},{all:[],visible:{},invisible:{}})}function df(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Ri(e){var t=e.insideDestination,r=e.inHomeList,a=e.displacedBy,i=e.destination,n=df(t,{inHomeList:r});return{displaced:Jt,displacedBy:a,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:n}}}}function Br(e){var t=e.draggable,r=e.insideDestination,a=e.destination,i=e.viewport,n=e.displacedBy,o=e.last,l=e.index,d=e.forceShouldAnimate,u=At(t,a);if(l==null)return Ri({insideDestination:r,inHomeList:u,displacedBy:n,destination:a});var p=rt(r,function(h){return h.descriptor.index===l});if(!p)return Ri({insideDestination:r,inHomeList:u,displacedBy:n,destination:a});var m=la(t,r),f=r.indexOf(p),g=m.slice(f),b=Kt({afterDragging:g,destination:a,displacedBy:n,last:o,viewport:i.frame,forceShouldAnimate:d});return{displaced:b,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:l}}}}function Ze(e,t){return!!t.effected[e]}var uf=function(e){var t=e.isMovingForward,r=e.destination,a=e.draggables,i=e.combine,n=e.afterCritical;if(!r.isCombineEnabled)return null;var o=i.draggableId,l=a[o],d=l.descriptor.index,u=Ze(o,n);return u?t?d:d-1:t?d+1:d},pf=function(e){var t=e.isMovingForward,r=e.isInHomeList,a=e.insideDestination,i=e.location;if(!a.length)return null;var n=i.index,o=t?n+1:n-1,l=a[0].descriptor.index,d=a[a.length-1].descriptor.index,u=r?d:d+1;return o<l||o>u?null:o},mf=function(e){var t=e.isMovingForward,r=e.isInHomeList,a=e.draggable,i=e.draggables,n=e.destination,o=e.insideDestination,l=e.previousImpact,d=e.viewport,u=e.afterCritical,p=l.at;if(p||A(!1),p.type==="REORDER"){var m=pf({isMovingForward:t,isInHomeList:r,location:p.destination,insideDestination:o});return m==null?null:Br({draggable:a,insideDestination:o,destination:n,viewport:d,last:l.displaced,displacedBy:l.displacedBy,index:m})}var f=uf({isMovingForward:t,destination:n,displaced:l.displaced,draggables:i,combine:p.combine,afterCritical:u});return f==null?null:Br({draggable:a,insideDestination:o,destination:n,viewport:d,last:l.displaced,displacedBy:l.displacedBy,index:f})},ff=function(e){var t=e.displaced,r=e.afterCritical,a=e.combineWith,i=e.displacedBy,n=!!(t.visible[a]||t.invisible[a]);return Ze(a,r)?n?ae:It(i.point):n?i.point:ae},gf=function(e){var t=e.afterCritical,r=e.impact,a=e.draggables,i=oa(r);i||A(!1);var n=i.draggableId,o=a[n].page.borderBox.center,l=ff({displaced:r.displaced,afterCritical:t,combineWith:n,displacedBy:r.displacedBy});return se(o,l)},No=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},hf=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},Pn=function(t,r,a){return r[t.crossAxisStart]+a.margin[t.crossAxisStart]+a.borderBox[t.crossAxisSize]/2},Oi=function(t){var r=t.axis,a=t.moveRelativeTo,i=t.isMoving;return mt(r.line,a.marginBox[r.end]+No(r,i),Pn(r,a.marginBox,i))},ki=function(t){var r=t.axis,a=t.moveRelativeTo,i=t.isMoving;return mt(r.line,a.marginBox[r.start]-hf(r,i),Pn(r,a.marginBox,i))},vf=function(t){var r=t.axis,a=t.moveInto,i=t.isMoving;return mt(r.line,a.contentBox[r.start]+No(r,i),Pn(r,a.contentBox,i))},bf=function(e){var t=e.impact,r=e.draggable,a=e.draggables,i=e.droppable,n=e.afterCritical,o=Tt(i.descriptor.id,a),l=r.page,d=i.axis;if(!o.length)return vf({axis:d,moveInto:i.page,isMoving:l});var u=t.displaced,p=t.displacedBy,m=u.all[0];if(m){var f=a[m];if(Ze(m,n))return ki({axis:d,moveRelativeTo:f.page,isMoving:l});var g=Tr(f.page,p.point);return ki({axis:d,moveRelativeTo:g,isMoving:l})}var b=o[o.length-1];if(b.descriptor.id===r.descriptor.id)return l.borderBox.center;if(Ze(b.descriptor.id,n)){var h=Tr(b.page,It(n.displacedBy.point));return Oi({axis:d,moveRelativeTo:h,isMoving:l})}return Oi({axis:d,moveRelativeTo:b.page,isMoving:l})},Ha=function(e,t){var r=e.frame;return r?se(t,r.scroll.diff.displacement):t},yf=function(t){var r=t.impact,a=t.draggable,i=t.droppable,n=t.draggables,o=t.afterCritical,l=a.page.borderBox.center,d=r.at;return!i||!d?l:d.type==="REORDER"?bf({impact:r,draggable:a,draggables:n,droppable:i,afterCritical:o}):gf({impact:r,draggables:n,afterCritical:o})},ca=function(e){var t=yf(e),r=e.droppable,a=r?Ha(r,t):t;return a},So=function(e,t){var r=fe(t,e.scroll.initial),a=It(r),i=De({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),n={frame:i,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:a}}};return n};function Bi(e,t){return e.map(function(r){return t[r]})}function xf(e,t){for(var r=0;r<t.length;r++){var a=t[r].visible[e];if(a)return a}return null}var wf=function(e){var t=e.impact,r=e.viewport,a=e.destination,i=e.draggables,n=e.maxScrollChange,o=So(r,se(r.scroll.current,n)),l=a.frame?Nn(a,se(a.frame.scroll.current,n)):a,d=t.displaced,u=Kt({afterDragging:Bi(d.all,i),destination:a,displacedBy:t.displacedBy,viewport:o.frame,last:d,forceShouldAnimate:!1}),p=Kt({afterDragging:Bi(d.all,i),destination:l,displacedBy:t.displacedBy,viewport:r.frame,last:d,forceShouldAnimate:!1}),m={},f={},g=[d,u,p];d.all.forEach(function(h){var v=xf(h,g);if(v){f[h]=v;return}m[h]=!0});var b=F({},t,{displaced:{all:d.all,invisible:m,visible:f}});return b},Nf=function(e,t){return se(e.scroll.diff.displacement,t)},In=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,a=e.viewport,i=Nf(a,t),n=fe(i,r.page.borderBox.center);return se(r.client.borderBox.center,n)},Do=function(e){var t=e.draggable,r=e.destination,a=e.newPageBorderBoxCenter,i=e.viewport,n=e.withDroppableDisplacement,o=e.onlyOnMainAxis,l=o===void 0?!1:o,d=fe(a,t.page.borderBox.center),u=pr(t.page.borderBox,d),p={target:u,destination:r,withDroppableDisplacement:n,viewport:i};return l?of(p):wo(p)},Sf=function(e){var t=e.isMovingForward,r=e.draggable,a=e.destination,i=e.draggables,n=e.previousImpact,o=e.viewport,l=e.previousPageBorderBoxCenter,d=e.previousClientSelection,u=e.afterCritical;if(!a.isEnabled)return null;var p=Tt(a.descriptor.id,i),m=At(r,a),f=Zm({isMovingForward:t,draggable:r,destination:a,insideDestination:p,previousImpact:n})||mf({isMovingForward:t,isInHomeList:m,draggable:r,draggables:i,destination:a,insideDestination:p,previousImpact:n,viewport:o,afterCritical:u});if(!f)return null;var g=ca({impact:f,draggable:r,droppable:a,draggables:i,afterCritical:u}),b=Do({draggable:r,destination:a,newPageBorderBoxCenter:g,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(b){var h=In({pageBorderBoxCenter:g,draggable:r,viewport:o});return{clientSelection:h,impact:f,scrollJumpRequest:null}}var v=fe(g,l),x=wf({impact:f,viewport:o,destination:a,draggables:i,maxScrollChange:v});return{clientSelection:d,impact:x,scrollJumpRequest:v}},le=function(t){var r=t.subject.active;return r||A(!1),r},Df=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,a=e.source,i=e.droppables,n=e.viewport,o=a.subject.active;if(!o)return null;var l=a.axis,d=we(o[l.start],o[l.end]),u=sa(i).filter(function(m){return m!==a}).filter(function(m){return m.isEnabled}).filter(function(m){return!!m.subject.active}).filter(function(m){return yo(n.frame)(le(m))}).filter(function(m){var f=le(m);return t?o[l.crossAxisEnd]<f[l.crossAxisEnd]:f[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(m){var f=le(m),g=we(f[l.start],f[l.end]);return d(f[l.start])||d(f[l.end])||g(o[l.start])||g(o[l.end])}).sort(function(m,f){var g=le(m)[l.crossAxisStart],b=le(f)[l.crossAxisStart];return t?g-b:b-g}).filter(function(m,f,g){return le(m)[l.crossAxisStart]===le(g[0])[l.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var p=u.filter(function(m){var f=we(le(m)[l.start],le(m)[l.end]);return f(r[l.line])});return p.length===1?p[0]:p.length>1?p.sort(function(m,f){return le(m)[l.start]-le(f)[l.start]})[0]:u.sort(function(m,f){var g=Ti(r,Ai(le(m))),b=Ti(r,Ai(le(f)));return g!==b?g-b:le(m)[l.start]-le(f)[l.start]})[0]},Li=function(t,r){var a=t.page.borderBox.center;return Ze(t.descriptor.id,r)?fe(a,r.displacedBy.point):a},Ef=function(t,r){var a=t.page.borderBox;return Ze(t.descriptor.id,r)?pr(a,It(r.displacedBy.point)):a},Cf=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,a=e.destination,i=e.insideDestination,n=e.afterCritical,o=i.filter(function(l){return wo({target:Ef(l,n),destination:a,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,d){var u=_t(t,Ha(a,Li(l,n))),p=_t(t,Ha(a,Li(d,n)));return u<p?-1:p<u?1:l.descriptor.index-d.descriptor.index});return o[0]||null},mr=re(function(t,r){var a=r[t.line];return{value:a,point:mt(t.line,a)}}),Pf=function(t,r,a){var i=t.axis;if(t.descriptor.mode==="virtual")return mt(i.line,r[i.line]);var n=t.subject.page.contentBox[i.size],o=Tt(t.descriptor.id,a),l=o.reduce(function(p,m){return p+m.client.marginBox[i.size]},0),d=l+r[i.line],u=d-n;return u<=0?null:mt(i.line,u)},Eo=function(t,r){return F({},t,{scroll:F({},t.scroll,{max:r})})},Co=function(t,r,a){var i=t.frame;At(r,t)&&A(!1),t.subject.withPlaceholder&&A(!1);var n=mr(t.axis,r.displaceBy).point,o=Pf(t,n,a),l={placeholderSize:n,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!i){var d=Nt({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return F({},t,{subject:d})}var u=o?se(i.scroll.max,o):i.scroll.max,p=Eo(i,u),m=Nt({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:p});return F({},t,{subject:m,frame:p})},If=function(t){var r=t.subject.withPlaceholder;r||A(!1);var a=t.frame;if(!a){var i=Nt({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return F({},t,{subject:i})}var n=r.oldFrameMaxScroll;n||A(!1);var o=Eo(a,n),l=Nt({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return F({},t,{subject:l,frame:o})},Tf=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,a=e.insideDestination,i=e.draggable,n=e.draggables,o=e.destination,l=e.viewport,d=e.afterCritical;if(!r){if(a.length)return null;var u={displaced:Jt,displacedBy:bo,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},p=ca({impact:u,draggable:i,droppable:o,draggables:n,afterCritical:d}),m=At(i,o)?o:Co(o,i,n),f=Do({draggable:i,destination:m,newPageBorderBoxCenter:p,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return f?u:null}var g=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],b=function(){var v=r.descriptor.index;return r.descriptor.id===i.descriptor.id||g?v:v+1}(),h=mr(o.axis,i.displaceBy);return Br({draggable:i,insideDestination:a,destination:o,viewport:l,displacedBy:h,last:Jt,index:b})},Af=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,a=e.draggable,i=e.isOver,n=e.draggables,o=e.droppables,l=e.viewport,d=e.afterCritical,u=Df({isMovingForward:t,pageBorderBoxCenter:r,source:i,droppables:o,viewport:l});if(!u)return null;var p=Tt(u.descriptor.id,n),m=Cf({pageBorderBoxCenter:r,viewport:l,destination:u,insideDestination:p,afterCritical:d}),f=Tf({previousPageBorderBoxCenter:r,destination:u,draggable:a,draggables:n,moveRelativeTo:m,insideDestination:p,viewport:l,afterCritical:d});if(!f)return null;var g=ca({impact:f,draggable:a,droppable:u,draggables:n,afterCritical:d}),b=In({pageBorderBoxCenter:g,draggable:a,viewport:l});return{clientSelection:b,impact:f,scrollJumpRequest:null}},ge=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Rf=function(t,r){var a=ge(t);return a?r[a]:null},Of=function(e){var t=e.state,r=e.type,a=Rf(t.impact,t.dimensions.droppables),i=!!a,n=t.dimensions.droppables[t.critical.droppable.id],o=a||n,l=o.axis.direction,d=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(d&&!i)return null;var u=r==="MOVE_DOWN"||r==="MOVE_RIGHT",p=t.dimensions.draggables[t.critical.draggable.id],m=t.current.page.borderBoxCenter,f=t.dimensions,g=f.draggables,b=f.droppables;return d?Sf({isMovingForward:u,previousPageBorderBoxCenter:m,draggable:p,destination:o,draggables:g,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Af({isMovingForward:u,previousPageBorderBoxCenter:m,draggable:p,isOver:o,draggables:g,droppables:b,viewport:t.viewport,afterCritical:t.afterCritical})};function it(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Po(e){var t=we(e.top,e.bottom),r=we(e.left,e.right);return function(i){return t(i.y)&&r(i.x)}}function kf(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Bf(e){var t=e.pageBorderBox,r=e.draggable,a=e.candidates,i=r.page.borderBox.center,n=a.map(function(o){var l=o.axis,d=mt(o.axis.line,t.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:_t(i,d)}}).sort(function(o,l){return l.distance-o.distance});return n[0]?n[0].id:null}function Lf(e){var t=e.pageBorderBox,r=e.draggable,a=e.droppables,i=sa(a).filter(function(n){if(!n.isEnabled)return!1;var o=n.subject.active;if(!o||!kf(t,o))return!1;if(Po(o)(t.center))return!0;var l=n.axis,d=o.center[l.crossAxisLine],u=t[l.crossAxisStart],p=t[l.crossAxisEnd],m=we(o[l.crossAxisStart],o[l.crossAxisEnd]),f=m(u),g=m(p);return!f&&!g?!0:f?u<d:p>d});return i.length?i.length===1?i[0].descriptor.id:Bf({pageBorderBox:t,draggable:r,candidates:i}):null}var Io=function(t,r){return De(pr(t,r))},jf=function(e,t){var r=e.frame;return r?Io(t,r.scroll.diff.value):t};function To(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function Mf(e){var t=e.draggable,r=e.closest,a=e.inHomeList;return r?a&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var Ff=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,a=e.destination,i=e.insideDestination,n=e.last,o=e.viewport,l=e.afterCritical,d=a.axis,u=mr(a.axis,r.displaceBy),p=u.value,m=t[d.start],f=t[d.end],g=la(r,i),b=rt(g,function(v){var x=v.descriptor.id,y=v.page.borderBox.center[d.line],N=Ze(x,l),S=To({displaced:n,id:x});return N?S?f<=y:m<y-p:S?f<=y+p:m<y}),h=Mf({draggable:r,closest:b,inHomeList:At(r,a)});return Br({draggable:r,insideDestination:i,destination:a,viewport:o,last:n,displacedBy:u,index:h})},$f=4,Uf=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,a=e.previousImpact,i=e.destination,n=e.insideDestination,o=e.afterCritical;if(!i.isCombineEnabled)return null;var l=i.axis,d=mr(i.axis,t.displaceBy),u=d.value,p=r[l.start],m=r[l.end],f=la(t,n),g=rt(f,function(h){var v=h.descriptor.id,x=h.page.borderBox,y=x[l.size],N=y/$f,S=Ze(v,o),E=To({displaced:a.displaced,id:v});return S?E?m>x[l.start]+N&&m<x[l.end]-N:p>x[l.start]-u+N&&p<x[l.end]-u-N:E?m>x[l.start]+u+N&&m<x[l.end]+u-N:p>x[l.start]+N&&p<x[l.end]-N});if(!g)return null;var b={displacedBy:d,displaced:a.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:i.descriptor.id}}};return b},Ao=function(e){var t=e.pageOffset,r=e.draggable,a=e.draggables,i=e.droppables,n=e.previousImpact,o=e.viewport,l=e.afterCritical,d=Io(r.page.borderBox,t),u=Lf({pageBorderBox:d,draggable:r,droppables:i});if(!u)return Qm;var p=i[u],m=Tt(p.descriptor.id,a),f=jf(p,d);return Uf({pageBorderBoxWithDroppableScroll:f,draggable:r,previousImpact:n,destination:p,insideDestination:m,afterCritical:l})||Ff({pageBorderBoxWithDroppableScroll:f,draggable:r,destination:p,insideDestination:m,last:n.displaced,viewport:o,afterCritical:l})},Tn=function(e,t){var r;return F({},e,(r={},r[t.descriptor.id]=t,r))},Gf=function(t){var r=t.previousImpact,a=t.impact,i=t.droppables,n=ge(r),o=ge(a);if(!n||n===o)return i;var l=i[n];if(!l.subject.withPlaceholder)return i;var d=If(l);return Tn(i,d)},Wf=function(e){var t=e.draggable,r=e.draggables,a=e.droppables,i=e.previousImpact,n=e.impact,o=Gf({previousImpact:i,impact:n,droppables:a}),l=ge(n);if(!l)return o;var d=a[l];if(At(t,d)||d.subject.withPlaceholder)return o;var u=Co(d,t,r);return Tn(o,u)},Ut=function(e){var t=e.state,r=e.clientSelection,a=e.dimensions,i=e.viewport,n=e.impact,o=e.scrollJumpRequest,l=i||t.viewport,d=a||t.dimensions,u=r||t.current.client.selection,p=fe(u,t.initial.client.selection),m={offset:p,selection:u,borderBoxCenter:se(t.initial.client.borderBoxCenter,p)},f={selection:se(m.selection,l.scroll.current),borderBoxCenter:se(m.borderBoxCenter,l.scroll.current),offset:se(m.offset,l.scroll.diff.value)},g={client:m,page:f};if(t.phase==="COLLECTING")return F({phase:"COLLECTING"},t,{dimensions:d,viewport:l,current:g});var b=d.draggables[t.critical.draggable.id],h=n||Ao({pageOffset:f.offset,draggable:b,draggables:d.draggables,droppables:d.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),v=Wf({draggable:b,impact:h,previousImpact:t.impact,draggables:d.draggables,droppables:d.droppables}),x=F({},t,{current:g,dimensions:{draggables:d.draggables,droppables:v},impact:h,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return x};function Hf(e,t){return e.map(function(r){return t[r]})}var Ro=function(e){var t=e.impact,r=e.viewport,a=e.draggables,i=e.destination,n=e.forceShouldAnimate,o=t.displaced,l=Hf(o.all,a),d=Kt({afterDragging:l,destination:i,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:n,last:o});return F({},t,{displaced:d})},Oo=function(e){var t=e.impact,r=e.draggable,a=e.droppable,i=e.draggables,n=e.viewport,o=e.afterCritical,l=ca({impact:t,draggable:r,draggables:i,droppable:a,afterCritical:o});return In({pageBorderBoxCenter:l,draggable:r,viewport:n})},ko=function(e){var t=e.state,r=e.dimensions,a=e.viewport;t.movementMode!=="SNAP"&&A(!1);var i=t.impact,n=a||t.viewport,o=r||t.dimensions,l=o.draggables,d=o.droppables,u=l[t.critical.draggable.id],p=ge(i);p||A(!1);var m=d[p],f=Ro({impact:i,viewport:n,destination:m,draggables:l}),g=Oo({impact:f,draggable:u,droppable:m,draggables:l,viewport:n,afterCritical:t.afterCritical});return Ut({impact:f,clientSelection:g,state:t,dimensions:o,viewport:n})},qf=function(e){return{index:e.index,droppableId:e.droppableId}},Bo=function(e){var t=e.draggable,r=e.home,a=e.draggables,i=e.viewport,n=mr(r.axis,t.displaceBy),o=Tt(r.descriptor.id,a),l=o.indexOf(t);l===-1&&A(!1);var d=o.slice(l+1),u=d.reduce(function(g,b){return g[b.descriptor.id]=!0,g},{}),p={inVirtualList:r.descriptor.mode==="virtual",displacedBy:n,effected:u},m=Kt({afterDragging:d,destination:r,displacedBy:n,last:null,viewport:i.frame,forceShouldAnimate:!1}),f={displaced:m,displacedBy:n,at:{type:"REORDER",destination:qf(t.descriptor)}};return{impact:f,afterCritical:p}},Vf=function(e,t){return{draggables:e.draggables,droppables:Tn(e.droppables,t)}},zf=function(e){var t=e.draggable,r=e.offset,a=e.initialWindowScroll,i=Tr(t.client,r),n=Ar(i,a),o=F({},t,{placeholder:F({},t.placeholder,{client:i}),client:i,page:n});return o},_f=function(e){var t=e.frame;return t||A(!1),t},Jf=function(e){var t=e.additions,r=e.updatedDroppables,a=e.viewport,i=a.scroll.diff.value;return t.map(function(n){var o=n.descriptor.droppableId,l=r[o],d=_f(l),u=d.scroll.diff.value,p=se(i,u),m=zf({draggable:n,offset:p,initialWindowScroll:a.scroll.initial});return m})},Kf=function(e){var t=e.state,r=e.published,a=r.modified.map(function(N){var S=t.dimensions.droppables[N.droppableId],E=Nn(S,N.scroll);return E}),i=F({},t.dimensions.droppables,{},ho(a)),n=vo(Jf({additions:r.additions,updatedDroppables:i,viewport:t.viewport})),o=F({},t.dimensions.draggables,{},n);r.removals.forEach(function(N){delete o[N]});var l={droppables:i,draggables:o},d=ge(t.impact),u=d?l.droppables[d]:null,p=l.draggables[t.critical.draggable.id],m=l.droppables[t.critical.droppable.id],f=Bo({draggable:p,home:m,draggables:o,viewport:t.viewport}),g=f.impact,b=f.afterCritical,h=u&&u.isCombineEnabled?t.impact:g,v=Ao({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:h,viewport:t.viewport,afterCritical:b}),x=F({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:g,dimensions:l,afterCritical:b,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return x;var y=F({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return y},qa=function(t){return t.movementMode==="SNAP"},Sa=function(t,r,a){var i=Vf(t.dimensions,r);return!qa(t)||a?Ut({state:t,dimensions:i}):ko({state:t,dimensions:i})};function Da(e){return e.isDragging&&e.movementMode==="SNAP"?F({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var ji={phase:"IDLE",completed:null,shouldFlush:!1},Yf=function(e,t){if(e===void 0&&(e=ji),t.type==="FLUSH")return F({},ji,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&A(!1);var r=t.payload,a=r.critical,i=r.clientSelection,n=r.viewport,o=r.dimensions,l=r.movementMode,d=o.draggables[a.draggable.id],u=o.droppables[a.droppable.id],p={selection:i,borderBoxCenter:d.client.borderBox.center,offset:ae},m={client:p,page:{selection:se(p.selection,n.scroll.initial),borderBoxCenter:se(p.selection,n.scroll.initial),offset:se(p.selection,n.scroll.diff.value)}},f=sa(o.droppables).every(function(Ot){return!Ot.isFixedOnPage}),g=Bo({draggable:d,home:u,draggables:o.draggables,viewport:n}),b=g.impact,h=g.afterCritical,v={phase:"DRAGGING",isDragging:!0,critical:a,movementMode:l,dimensions:o,initial:m,current:m,isWindowScrollAllowed:f,impact:b,afterCritical:h,onLiftImpact:b,viewport:n,scrollJumpRequest:null,forceShouldAnimate:null};return v}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&A(!1);var x=F({phase:"COLLECTING"},e,{phase:"COLLECTING"});return x}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||A(!1),Kf({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;it(e)||A(!1);var y=t.payload.client;return Je(y,e.current.client.selection)?e:Ut({state:e,clientSelection:y,impact:qa(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Da(e);it(e)||A(!1);var N=t.payload,S=N.id,E=N.newScroll,C=e.dimensions.droppables[S];if(!C)return e;var k=Nn(C,E);return Sa(e,k,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;it(e)||A(!1);var B=t.payload,T=B.id,M=B.isEnabled,j=e.dimensions.droppables[T];j||A(!1),j.isEnabled===M&&A(!1);var _=F({},j,{isEnabled:M});return Sa(e,_,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;it(e)||A(!1);var Y=t.payload,R=Y.id,W=Y.isCombineEnabled,X=e.dimensions.droppables[R];X||A(!1),X.isCombineEnabled===W&&A(!1);var ce=F({},X,{isCombineEnabled:W});return Sa(e,ce,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;it(e)||A(!1),e.isWindowScrollAllowed||A(!1);var G=t.payload.newScroll;if(Je(e.viewport.scroll.current,G))return Da(e);var P=So(e.viewport,G);return qa(e)?ko({state:e,viewport:P}):Ut({state:e,viewport:P})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!it(e))return e;var K=t.payload.maxScroll;if(Je(K,e.viewport.scroll.max))return e;var Te=F({},e.viewport,{scroll:F({},e.viewport.scroll,{max:K})});return F({phase:"DRAGGING"},e,{viewport:Te})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&A(!1);var te=Of({state:e,type:t.type});return te?Ut({state:e,impact:te.impact,clientSelection:te.clientSelection,scrollJumpRequest:te.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var Be=t.payload.reason;e.phase!=="COLLECTING"&&A(!1);var ft=F({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:Be});return ft}if(t.type==="DROP_ANIMATE"){var Ae=t.payload,gt=Ae.completed,Re=Ae.dropDuration,ht=Ae.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||A(!1);var Rt={phase:"DROP_ANIMATING",completed:gt,dropDuration:Re,newHomeClientOffset:ht,dimensions:e.dimensions};return Rt}if(t.type==="DROP_COMPLETE"){var Ue=t.payload.completed;return{phase:"IDLE",completed:Ue,shouldFlush:!1}}return e},Xf=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},Zf=function(t){return{type:"LIFT",payload:t}},Qf=function(t){return{type:"INITIAL_PUBLISH",payload:t}},eg=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},tg=function(){return{type:"COLLECTION_STARTING",payload:null}},rg=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},ag=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},ng=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Lo=function(t){return{type:"MOVE",payload:t}},ig=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},sg=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},og=function(){return{type:"MOVE_UP",payload:null}},lg=function(){return{type:"MOVE_DOWN",payload:null}},cg=function(){return{type:"MOVE_RIGHT",payload:null}},dg=function(){return{type:"MOVE_LEFT",payload:null}},An=function(){return{type:"FLUSH",payload:null}},ug=function(t){return{type:"DROP_ANIMATE",payload:t}},Rn=function(t){return{type:"DROP_COMPLETE",payload:t}},jo=function(t){return{type:"DROP",payload:t}},pg=function(t){return{type:"DROP_PENDING",payload:t}},Mo=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},mg=function(e){return function(t){var r=t.getState,a=t.dispatch;return function(i){return function(n){if(n.type!=="LIFT"){i(n);return}var o=n.payload,l=o.id,d=o.clientSelection,u=o.movementMode,p=r();p.phase==="DROP_ANIMATING"&&a(Rn({completed:p.completed})),r().phase!=="IDLE"&&A(!1),a(An()),a(Xf({draggableId:l,movementMode:u}));var m={shouldPublishImmediately:u==="SNAP"},f={draggableId:l,scrollOptions:m},g=e.startPublishing(f),b=g.critical,h=g.dimensions,v=g.viewport;a(Qf({critical:b,dimensions:h,clientSelection:d,movementMode:u,viewport:v}))}}}},fg=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},On={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Yt={opacity:{drop:0,combining:.7},scale:{drop:.75}},kn={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},at=kn.outOfTheWay+"s "+On.outOfTheWay,Gt={fluid:"opacity "+at,snap:"transform "+at+", opacity "+at,drop:function(t){var r=t+"s "+On.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+at,placeholder:"height "+at+", width "+at+", margin "+at},Mi=function(t){return Je(t,ae)?null:"translate("+t.x+"px, "+t.y+"px)"},Va={moveTo:Mi,drop:function(t,r){var a=Mi(t);return a?r?a+" scale("+Yt.scale.drop+")":a:null}},za=kn.minDropTime,Fo=kn.maxDropTime,gg=Fo-za,Fi=1500,hg=.6,vg=function(e){var t=e.current,r=e.destination,a=e.reason,i=_t(t,r);if(i<=0)return za;if(i>=Fi)return Fo;var n=i/Fi,o=za+gg*n,l=a==="CANCEL"?o*hg:o;return Number(l.toFixed(2))},bg=function(e){var t=e.impact,r=e.draggable,a=e.dimensions,i=e.viewport,n=e.afterCritical,o=a.draggables,l=a.droppables,d=ge(t),u=d?l[d]:null,p=l[r.descriptor.droppableId],m=Oo({impact:t,draggable:r,draggables:o,afterCritical:n,droppable:u||p,viewport:i}),f=fe(m,r.client.borderBox.center);return f},yg=function(e){var t=e.draggables,r=e.reason,a=e.lastImpact,i=e.home,n=e.viewport,o=e.onLiftImpact;if(!a.at||r!=="DROP"){var l=Ro({draggables:t,impact:o,destination:i,viewport:n,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(a.at.type==="REORDER")return{impact:a,didDropInsideDroppable:!0};var d=F({},a,{displaced:Jt});return{impact:d,didDropInsideDroppable:!0}},xg=function(e){var t=e.getState,r=e.dispatch;return function(a){return function(i){if(i.type!=="DROP"){a(i);return}var n=t(),o=i.payload.reason;if(n.phase==="COLLECTING"){r(pg({reason:o}));return}if(n.phase!=="IDLE"){var l=n.phase==="DROP_PENDING"&&n.isWaiting;l&&A(!1),n.phase==="DRAGGING"||n.phase==="DROP_PENDING"||A(!1);var d=n.critical,u=n.dimensions,p=u.draggables[n.critical.draggable.id],m=yg({reason:o,lastImpact:n.impact,afterCritical:n.afterCritical,onLiftImpact:n.onLiftImpact,home:n.dimensions.droppables[n.critical.droppable.id],viewport:n.viewport,draggables:n.dimensions.draggables}),f=m.impact,g=m.didDropInsideDroppable,b=g?Dn(f):null,h=g?oa(f):null,v={index:d.draggable.index,droppableId:d.droppable.id},x={draggableId:p.descriptor.id,type:p.descriptor.type,source:v,reason:o,mode:n.movementMode,destination:b,combine:h},y=bg({impact:f,draggable:p,dimensions:u,viewport:n.viewport,afterCritical:n.afterCritical}),N={critical:n.critical,afterCritical:n.afterCritical,result:x,impact:f},S=!Je(n.current.client.offset,y)||!!x.combine;if(!S){r(Rn({completed:N}));return}var E=vg({current:n.current.client.offset,destination:y,reason:o}),C={newHomeClientOffset:y,dropDuration:E,completed:N};r(ug(C))}}}},$o=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function wg(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function Ng(e){var t=e.onWindowScroll;function r(){t($o())}var a=zt(r),i=wg(a),n=_e;function o(){return n!==_e}function l(){o()&&A(!1),n=xe(window,[i])}function d(){o()||A(!1),a.cancel(),n(),n=_e}return{start:l,stop:d,isActive:o}}var Sg=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Dg=function(e){var t=Ng({onWindowScroll:function(a){e.dispatch(ig({newScroll:a}))}});return function(r){return function(a){!t.isActive()&&a.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Sg(a)&&t.stop(),r(a)}}},Eg=function(e){var t=!1,r=!1,a=setTimeout(function(){r=!0}),i=function(o){t||r||(t=!0,e(o),clearTimeout(a))};return i.wasCalled=function(){return t},i},Cg=function(){var e=[],t=function(n){var o=Sn(e,function(u){return u.timerId===n});o===-1&&A(!1);var l=e.splice(o,1),d=l[0];d.callback()},r=function(n){var o=setTimeout(function(){return t(o)}),l={timerId:o,callback:n};e.push(l)},a=function(){if(e.length){var n=[].concat(e);e.length=0,n.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:a}},Pg=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},Ig=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},Tg=function(t,r){if(t===r)return!0;var a=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,i=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return a&&i},Lt=function(t,r){r()},hr=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Ea=function(t,r,a,i){if(!t){a(i(r));return}var n=Eg(a),o={announce:n};t(r,o),n.wasCalled()||a(i(r))},Ag=function(e,t){var r=Cg(),a=null,i=function(f,g){a&&A(!1),Lt("onBeforeCapture",function(){var b=e().onBeforeCapture;if(b){var h={draggableId:f,mode:g};b(h)}})},n=function(f,g){a&&A(!1),Lt("onBeforeDragStart",function(){var b=e().onBeforeDragStart;b&&b(hr(f,g))})},o=function(f,g){a&&A(!1);var b=hr(f,g);a={mode:g,lastCritical:f,lastLocation:b.source,lastCombine:null},r.add(function(){Lt("onDragStart",function(){return Ea(e().onDragStart,b,t,Dr.onDragStart)})})},l=function(f,g){var b=Dn(g),h=oa(g);a||A(!1);var v=!Tg(f,a.lastCritical);v&&(a.lastCritical=f);var x=!Pg(a.lastLocation,b);x&&(a.lastLocation=b);var y=!Ig(a.lastCombine,h);if(y&&(a.lastCombine=h),!(!v&&!x&&!y)){var N=F({},hr(f,a.mode),{combine:h,destination:b});r.add(function(){Lt("onDragUpdate",function(){return Ea(e().onDragUpdate,N,t,Dr.onDragUpdate)})})}},d=function(){a||A(!1),r.flush()},u=function(f){a||A(!1),a=null,Lt("onDragEnd",function(){return Ea(e().onDragEnd,f,t,Dr.onDragEnd)})},p=function(){if(a){var f=F({},hr(a.lastCritical,a.mode),{combine:null,destination:null,reason:"CANCEL"});u(f)}};return{beforeCapture:i,beforeStart:n,start:o,update:l,flush:d,drop:u,abort:p}},Rg=function(e,t){var r=Ag(e,t);return function(a){return function(i){return function(n){if(n.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(n.payload.draggableId,n.payload.movementMode);return}if(n.type==="INITIAL_PUBLISH"){var o=n.payload.critical;r.beforeStart(o,n.payload.movementMode),i(n),r.start(o,n.payload.movementMode);return}if(n.type==="DROP_COMPLETE"){var l=n.payload.completed.result;r.flush(),i(n),r.drop(l);return}if(i(n),n.type==="FLUSH"){r.abort();return}var d=a.getState();d.phase==="DRAGGING"&&r.update(d.critical,d.impact)}}}},Og=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var a=e.getState();a.phase!=="DROP_ANIMATING"&&A(!1),e.dispatch(Rn({completed:a.completed}))}}},kg=function(e){var t=null,r=null;function a(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(i){return function(n){if((n.type==="FLUSH"||n.type==="DROP_COMPLETE"||n.type==="DROP_ANIMATION_FINISHED")&&a(),i(n),n.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var d=e.getState();d.phase==="DROP_ANIMATING"&&e.dispatch(Mo())}};r=requestAnimationFrame(function(){r=null,t=xe(window,[o])})}}}},Bg=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},Lg=function(e){var t=!1;return function(){return function(r){return function(a){if(a.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(a.payload.critical.draggable.id),r(a),e.tryRestoreFocusRecorded();return}if(r(a),!!t){if(a.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(a.type==="DROP_COMPLETE"){t=!1;var i=a.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},jg=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Mg=function(e){return function(t){return function(r){return function(a){if(jg(a)){e.stop(),r(a);return}if(a.type==="INITIAL_PUBLISH"){r(a);var i=t.getState();i.phase!=="DRAGGING"&&A(!1),e.start(i);return}r(a),e.scroll(t.getState())}}}},Fg=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var a=e.getState();a.phase==="DROP_PENDING"&&(a.isWaiting||e.dispatch(jo({reason:a.reason})))}}}},$g=qs,Ug=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,a=e.styleMarshal,i=e.getResponders,n=e.announce,o=e.autoScroller;return Hs(Yf,$g(Dp(fg(a),Bg(t),mg(t),xg,Og,kg,Fg,Mg(o),Dg,Lg(r),Rg(i,n))))},Ca=function(){return{additions:{},removals:{},modified:{}}};function Gg(e){var t=e.registry,r=e.callbacks,a=Ca(),i=null,n=function(){i||(r.collectionStarting(),i=requestAnimationFrame(function(){i=null;var p=a,m=p.additions,f=p.removals,g=p.modified,b=Object.keys(m).map(function(x){return t.draggable.getById(x).getDimension(ae)}).sort(function(x,y){return x.descriptor.index-y.descriptor.index}),h=Object.keys(g).map(function(x){var y=t.droppable.getById(x),N=y.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:N}}),v={additions:b,removals:Object.keys(f),modified:h};a=Ca(),r.publish(v)}))},o=function(p){var m=p.descriptor.id;a.additions[m]=p,a.modified[p.descriptor.droppableId]=!0,a.removals[m]&&delete a.removals[m],n()},l=function(p){var m=p.descriptor;a.removals[m.id]=!0,a.modified[m.droppableId]=!0,a.additions[m.id]&&delete a.additions[m.id],n()},d=function(){i&&(cancelAnimationFrame(i),i=null,a=Ca())};return{add:o,remove:l,stop:d}}var Uo=function(e){var t=e.scrollHeight,r=e.scrollWidth,a=e.height,i=e.width,n=fe({x:r,y:t},{x:i,y:a}),o={x:Math.max(0,n.x),y:Math.max(0,n.y)};return o},Go=function(){var e=document.documentElement;return e||A(!1),e},Wo=function(){var e=Go(),t=Uo({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},Wg=function(){var e=$o(),t=Wo(),r=e.y,a=e.x,i=Go(),n=i.clientWidth,o=i.clientHeight,l=a+n,d=r+o,u=De({top:r,left:a,right:l,bottom:d}),p={frame:u,scroll:{initial:e,current:e,max:t,diff:{value:ae,displacement:ae}}};return p},Hg=function(e){var t=e.critical,r=e.scrollOptions,a=e.registry,i=Wg(),n=i.scroll.current,o=t.droppable,l=a.droppable.getAllByType(o.type).map(function(m){return m.callbacks.getDimensionAndWatchScroll(n,r)}),d=a.draggable.getAllByType(t.draggable.type).map(function(m){return m.getDimension(n)}),u={draggables:vo(d),droppables:ho(l)},p={dimensions:u,critical:t,viewport:i};return p};function $i(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var a=e.droppable.getById(r.descriptor.droppableId);return a.descriptor.mode==="virtual"}var qg=function(e,t){var r=null,a=Gg({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(g,b){e.droppable.exists(g)||A(!1),r&&t.updateDroppableIsEnabled({id:g,isEnabled:b})},n=function(g,b){r&&(e.droppable.exists(g)||A(!1),t.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:b}))},o=function(g,b){r&&(e.droppable.exists(g)||A(!1),t.updateDroppableScroll({id:g,newScroll:b}))},l=function(g,b){r&&e.droppable.getById(g).callbacks.scroll(b)},d=function(){if(r){a.stop();var g=r.critical.droppable;e.droppable.getAllByType(g.type).forEach(function(b){return b.callbacks.dragStopped()}),r.unsubscribe(),r=null}},u=function(g){r||A(!1);var b=r.critical.draggable;g.type==="ADDITION"&&$i(e,b,g.value)&&a.add(g.value),g.type==="REMOVAL"&&$i(e,b,g.value)&&a.remove(g.value)},p=function(g){r&&A(!1);var b=e.draggable.getById(g.draggableId),h=e.droppable.getById(b.descriptor.droppableId),v={draggable:b.descriptor,droppable:h.descriptor},x=e.subscribe(u);return r={critical:v,unsubscribe:x},Hg({critical:v,registry:e,scrollOptions:g.scrollOptions})},m={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:n,scrollDroppable:l,updateDroppableScroll:o,startPublishing:p,stopPublishing:d};return m},Ho=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},Vg=function(e){window.scrollBy(e.x,e.y)},zg=re(function(e){return sa(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),_g=function(t,r){var a=rt(zg(r),function(i){return i.frame||A(!1),Po(i.frame.pageMarginBox)(t)});return a},Jg=function(e){var t=e.center,r=e.destination,a=e.droppables;if(r){var i=a[r];return i.frame?i:null}var n=_g(t,a);return n},Ke={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Kg=function(e,t){var r=e[t.size]*Ke.startFromPercentage,a=e[t.size]*Ke.maxScrollAtPercentage,i={startScrollingFrom:r,maxScrollValueAt:a};return i},qo=function(e){var t=e.startOfRange,r=e.endOfRange,a=e.current,i=r-t;if(i===0)return 0;var n=a-t,o=n/i;return o},Bn=1,Yg=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Ke.maxPixelScroll;if(e===t.startScrollingFrom)return Bn;var r=qo({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=1-r,i=Ke.maxPixelScroll*Ke.ease(a);return Math.ceil(i)},Ui=Ke.durationDampening.accelerateAt,Gi=Ke.durationDampening.stopDampeningAt,Xg=function(e,t){var r=t,a=Gi,i=Date.now(),n=i-r;if(n>=Gi)return e;if(n<Ui)return Bn;var o=qo({startOfRange:Ui,endOfRange:a,current:n}),l=e*Ke.ease(o);return Math.ceil(l)},Wi=function(e){var t=e.distanceToEdge,r=e.thresholds,a=e.dragStartTime,i=e.shouldUseTimeDampening,n=Yg(t,r);return n===0?0:i?Math.max(Xg(n,a),Bn):n},Hi=function(e){var t=e.container,r=e.distanceToEdges,a=e.dragStartTime,i=e.axis,n=e.shouldUseTimeDampening,o=Kg(t,i),l=r[i.end]<r[i.start];return l?Wi({distanceToEdge:r[i.end],thresholds:o,dragStartTime:a,shouldUseTimeDampening:n}):-1*Wi({distanceToEdge:r[i.start],thresholds:o,dragStartTime:a,shouldUseTimeDampening:n})},Zg=function(e){var t=e.container,r=e.subject,a=e.proposedScroll,i=r.height>t.height,n=r.width>t.width;return!n&&!i?a:n&&i?null:{x:n?0:a.x,y:i?0:a.y}},Qg=fo(function(e){return e===0?0:e}),Vo=function(e){var t=e.dragStartTime,r=e.container,a=e.subject,i=e.center,n=e.shouldUseTimeDampening,o={top:i.y-r.top,right:r.right-i.x,bottom:r.bottom-i.y,left:i.x-r.left},l=Hi({container:r,distanceToEdges:o,dragStartTime:t,axis:En,shouldUseTimeDampening:n}),d=Hi({container:r,distanceToEdges:o,dragStartTime:t,axis:xo,shouldUseTimeDampening:n}),u=Qg({x:d,y:l});if(Je(u,ae))return null;var p=Zg({container:r,subject:a,proposedScroll:u});return p?Je(p,ae)?null:p:null},eh=fo(function(e){return e===0?0:e>0?1:-1}),Ln=function(){var e=function(r,a){return r<0?r:r>a?r-a:0};return function(t){var r=t.current,a=t.max,i=t.change,n=se(r,i),o={x:e(n.x,a.x),y:e(n.y,a.y)};return Je(o,ae)?null:o}}(),zo=function(t){var r=t.max,a=t.current,i=t.change,n={x:Math.max(a.x,r.x),y:Math.max(a.y,r.y)},o=eh(i),l=Ln({max:n,current:a,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},jn=function(t,r){return zo({current:t.scroll.current,max:t.scroll.max,change:r})},th=function(t,r){if(!jn(t,r))return null;var a=t.scroll.max,i=t.scroll.current;return Ln({current:i,max:a,change:r})},Mn=function(t,r){var a=t.frame;return a?zo({current:a.scroll.current,max:a.scroll.max,change:r}):!1},rh=function(t,r){var a=t.frame;return!a||!Mn(t,r)?null:Ln({current:a.scroll.current,max:a.scroll.max,change:r})},ah=function(e){var t=e.viewport,r=e.subject,a=e.center,i=e.dragStartTime,n=e.shouldUseTimeDampening,o=Vo({dragStartTime:i,container:t.frame,subject:r,center:a,shouldUseTimeDampening:n});return o&&jn(t,o)?o:null},nh=function(e){var t=e.droppable,r=e.subject,a=e.center,i=e.dragStartTime,n=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var l=Vo({dragStartTime:i,container:o.pageMarginBox,subject:r,center:a,shouldUseTimeDampening:n});return l&&Mn(t,l)?l:null},qi=function(e){var t=e.state,r=e.dragStartTime,a=e.shouldUseTimeDampening,i=e.scrollWindow,n=e.scrollDroppable,o=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id],d=l.page.marginBox;if(t.isWindowScrollAllowed){var u=t.viewport,p=ah({dragStartTime:r,viewport:u,subject:d,center:o,shouldUseTimeDampening:a});if(p){i(p);return}}var m=Jg({center:o,destination:ge(t.impact),droppables:t.dimensions.droppables});if(m){var f=nh({dragStartTime:r,droppable:m,subject:d,center:o,shouldUseTimeDampening:a});f&&n(m.descriptor.id,f)}},ih=function(e){var t=e.scrollWindow,r=e.scrollDroppable,a=zt(t),i=zt(r),n=null,o=function(p){n||A(!1);var m=n,f=m.shouldUseTimeDampening,g=m.dragStartTime;qi({state:p,scrollWindow:a,scrollDroppable:i,dragStartTime:g,shouldUseTimeDampening:f})},l=function(p){n&&A(!1);var m=Date.now(),f=!1,g=function(){f=!0};qi({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g}),n={dragStartTime:m,shouldUseTimeDampening:f},f&&o(p)},d=function(){n&&(a.cancel(),i.cancel(),n=null)};return{start:l,stop:d,scroll:o}},sh=function(e){var t=e.move,r=e.scrollDroppable,a=e.scrollWindow,i=function(u,p){var m=se(u.current.client.selection,p);t({client:m})},n=function(u,p){if(!Mn(u,p))return p;var m=rh(u,p);if(!m)return r(u.descriptor.id,p),null;var f=fe(p,m);r(u.descriptor.id,f);var g=fe(p,f);return g},o=function(u,p,m){if(!u||!jn(p,m))return m;var f=th(p,m);if(!f)return a(m),null;var g=fe(m,f);a(g);var b=fe(m,g);return b},l=function(u){var p=u.scrollJumpRequest;if(p){var m=ge(u.impact);m||A(!1);var f=n(u.dimensions.droppables[m],p);if(f){var g=u.viewport,b=o(u.isWindowScrollAllowed,g,f);b&&i(u,b)}}};return l},oh=function(e){var t=e.scrollDroppable,r=e.scrollWindow,a=e.move,i=ih({scrollWindow:r,scrollDroppable:t}),n=sh({move:a,scrollWindow:r,scrollDroppable:t}),o=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&n(u)}},l={scroll:o,start:i.start,stop:i.stop};return l},St="data-rbd",Dt=function(){var e=St+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),_a=function(){var e=St+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),lh=function(){var e=St+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Vi={contextId:St+"-scroll-container-context-id"},ch=function(t){return function(r){return"["+r+'="'+t+'"]'}},jt=function(t,r){return t.map(function(a){var i=a.styles[r];return i?a.selector+" { "+i+" }":""}).join(" ")},dh="pointer-events: none;",uh=function(e){var t=ch(e),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Dt.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:dh,dropAnimating:l}}}(),a=function(){var l=`
      transition: `+Gt.outOfTheWay+`;
    `;return{selector:t(_a.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),i={selector:t(lh.contextId),styles:{always:"overflow-anchor: none;"}},n={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[a,r,i,n];return{always:jt(o,"always"),resting:jt(o,"resting"),dragging:jt(o,"dragging"),dropAnimating:jt(o,"dropAnimating"),userCancel:jt(o,"userCancel")}},he=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,Pa=function(){var t=document.querySelector("head");return t||A(!1),t},zi=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function ph(e,t){var r=U(function(){return uh(e)},[e]),a=w.useRef(null),i=w.useRef(null),n=L(re(function(m){var f=i.current;f||A(!1),f.textContent=m}),[]),o=L(function(m){var f=a.current;f||A(!1),f.textContent=m},[]);he(function(){!a.current&&!i.current||A(!1);var m=zi(t),f=zi(t);return a.current=m,i.current=f,m.setAttribute(St+"-always",e),f.setAttribute(St+"-dynamic",e),Pa().appendChild(m),Pa().appendChild(f),o(r.always),n(r.resting),function(){var g=function(h){var v=h.current;v||A(!1),Pa().removeChild(v),h.current=null};g(a),g(i)}},[t,o,n,r.always,r.resting,e]);var l=L(function(){return n(r.dragging)},[n,r.dragging]),d=L(function(m){if(m==="DROP"){n(r.dropAnimating);return}n(r.userCancel)},[n,r.dropAnimating,r.userCancel]),u=L(function(){i.current&&n(r.resting)},[n,r.resting]),p=U(function(){return{dragging:l,dropping:d,resting:u}},[l,d,u]);return p}var _o=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function da(e){return e instanceof _o(e).HTMLElement}function mh(e,t){var r="["+Dt.contextId+'="'+e+'"]',a=go(document.querySelectorAll(r));if(!a.length)return null;var i=rt(a,function(n){return n.getAttribute(Dt.draggableId)===t});return!i||!da(i)?null:i}function fh(e){var t=w.useRef({}),r=w.useRef(null),a=w.useRef(null),i=w.useRef(!1),n=L(function(f,g){var b={id:f,focus:g};return t.current[f]=b,function(){var v=t.current,x=v[f];x!==b&&delete v[f]}},[]),o=L(function(f){var g=mh(e,f);g&&g!==document.activeElement&&g.focus()},[e]),l=L(function(f,g){r.current===f&&(r.current=g)},[]),d=L(function(){a.current||i.current&&(a.current=requestAnimationFrame(function(){a.current=null;var f=r.current;f&&o(f)}))},[o]),u=L(function(f){r.current=null;var g=document.activeElement;g&&g.getAttribute(Dt.draggableId)===f&&(r.current=f)},[]);he(function(){return i.current=!0,function(){i.current=!1;var f=a.current;f&&cancelAnimationFrame(f)}},[]);var p=U(function(){return{register:n,tryRecordFocus:u,tryRestoreFocusRecorded:d,tryShiftRecord:l}},[n,u,d,l]);return p}function gh(){var e={draggables:{},droppables:{}},t=[];function r(m){return t.push(m),function(){var g=t.indexOf(m);g!==-1&&t.splice(g,1)}}function a(m){t.length&&t.forEach(function(f){return f(m)})}function i(m){return e.draggables[m]||null}function n(m){var f=i(m);return f||A(!1),f}var o={register:function(f){e.draggables[f.descriptor.id]=f,a({type:"ADDITION",value:f})},update:function(f,g){var b=e.draggables[g.descriptor.id];b&&b.uniqueId===f.uniqueId&&(delete e.draggables[g.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:function(f){var g=f.descriptor.id,b=i(g);b&&f.uniqueId===b.uniqueId&&(delete e.draggables[g],a({type:"REMOVAL",value:f}))},getById:n,findById:i,exists:function(f){return!!i(f)},getAllByType:function(f){return kr(e.draggables).filter(function(g){return g.descriptor.type===f})}};function l(m){return e.droppables[m]||null}function d(m){var f=l(m);return f||A(!1),f}var u={register:function(f){e.droppables[f.descriptor.id]=f},unregister:function(f){var g=l(f.descriptor.id);g&&f.uniqueId===g.uniqueId&&delete e.droppables[f.descriptor.id]},getById:d,findById:l,exists:function(f){return!!l(f)},getAllByType:function(f){return kr(e.droppables).filter(function(g){return g.descriptor.type===f})}};function p(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:u,subscribe:r,clean:p}}function hh(){var e=U(gh,[]);return w.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Fn=V.createContext(null),Lr=function(){var e=document.body;return e||A(!1),e},vh={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},bh=function(t){return"rbd-announcement-"+t};function yh(e){var t=U(function(){return bh(e)},[e]),r=w.useRef(null);w.useEffect(function(){var n=document.createElement("div");return r.current=n,n.id=t,n.setAttribute("aria-live","assertive"),n.setAttribute("aria-atomic","true"),F(n.style,vh),Lr().appendChild(n),function(){setTimeout(function(){var d=Lr();d.contains(n)&&d.removeChild(n),n===r.current&&(r.current=null)})}},[t]);var a=L(function(i){var n=r.current;if(n){n.textContent=i;return}},[]);return a}var xh=0,wh={separator:"::"};function $n(e,t){return t===void 0&&(t=wh),U(function(){return""+e+t.separator+xh++},[t.separator,e])}function Nh(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function Sh(e){var t=e.contextId,r=e.text,a=$n("hidden-text",{separator:"-"}),i=U(function(){return Nh({contextId:t,uniqueId:a})},[a,t]);return w.useEffect(function(){var o=document.createElement("div");return o.id=i,o.textContent=r,o.style.display="none",Lr().appendChild(o),function(){var d=Lr();d.contains(o)&&d.removeChild(o)}},[i,r]),i}var ua=V.createContext(null);function Jo(e){var t=w.useRef(e);return w.useEffect(function(){t.current=e}),t}function Dh(){var e=null;function t(){return!!e}function r(o){return o===e}function a(o){e&&A(!1);var l={abandon:o};return e=l,l}function i(){e||A(!1),e=null}function n(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:r,claim:a,release:i,tryAbandon:n}}var Eh=9,Ch=13,Un=27,Ko=32,Ph=33,Ih=34,Th=35,Ah=36,Rh=37,Oh=38,kh=39,Bh=40,vr,Lh=(vr={},vr[Ch]=!0,vr[Eh]=!0,vr),Yo=function(e){Lh[e.keyCode]&&e.preventDefault()},pa=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=rt(t,function(a){return"on"+a in document});return r||e}(),Xo=0,_i=5;function jh(e,t){return Math.abs(t.x-e.x)>=_i||Math.abs(t.y-e.y)>=_i}var Ji={type:"IDLE"};function Mh(e){var t=e.cancel,r=e.completed,a=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,d=o.clientX,u=o.clientY;if(l===Xo){var p={x:d,y:u},m=a();if(m.type==="DRAGGING"){o.preventDefault(),m.actions.move(p);return}m.type!=="PENDING"&&A(!1);var f=m.point;if(jh(f,p)){o.preventDefault();var g=m.actions.fluidLift(p);i({type:"DRAGGING",actions:g})}}}},{eventName:"mouseup",fn:function(o){var l=a();if(l.type!=="DRAGGING"){t();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){a().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var l=a();if(l.type==="PENDING"){t();return}if(o.keyCode===Un){o.preventDefault(),t();return}Yo(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){a().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=a();if(l.type==="IDLE"&&A(!1),l.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:pa,fn:t}]}function Fh(e){var t=w.useRef(Ji),r=w.useRef(_e),a=U(function(){return{eventName:"mousedown",fn:function(m){if(!m.defaultPrevented&&m.button===Xo&&!(m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)){var f=e.findClosestDraggableId(m);if(f){var g=e.tryGetLock(f,o,{sourceEvent:m});if(g){m.preventDefault();var b={x:m.clientX,y:m.clientY};r.current(),u(g,b)}}}}}},[e]),i=U(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(m){if(!m.defaultPrevented){var f=e.findClosestDraggableId(m);if(f){var g=e.findOptionsForDraggable(f);g&&(g.shouldRespectForcePress||e.canGetLock(f)&&m.preventDefault())}}}}},[e]),n=L(function(){var m={passive:!1,capture:!0};r.current=xe(window,[i,a],m)},[i,a]),o=L(function(){var p=t.current;p.type!=="IDLE"&&(t.current=Ji,r.current(),n())},[n]),l=L(function(){var p=t.current;o(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[o]),d=L(function(){var m={capture:!0,passive:!1},f=Mh({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(b){t.current=b}});r.current=xe(window,f,m)},[l,o]),u=L(function(m,f){t.current.type!=="IDLE"&&A(!1),t.current={type:"PENDING",point:f,actions:m},d()},[d]);he(function(){return n(),function(){r.current()}},[n])}var bt;function $h(){}var Uh=(bt={},bt[Ih]=!0,bt[Ph]=!0,bt[Ah]=!0,bt[Th]=!0,bt);function Gh(e,t){function r(){t(),e.cancel()}function a(){t(),e.drop()}return[{eventName:"keydown",fn:function(n){if(n.keyCode===Un){n.preventDefault(),r();return}if(n.keyCode===Ko){n.preventDefault(),a();return}if(n.keyCode===Bh){n.preventDefault(),e.moveDown();return}if(n.keyCode===Oh){n.preventDefault(),e.moveUp();return}if(n.keyCode===kh){n.preventDefault(),e.moveRight();return}if(n.keyCode===Rh){n.preventDefault(),e.moveLeft();return}if(Uh[n.keyCode]){n.preventDefault();return}Yo(n)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:pa,fn:r}]}function Wh(e){var t=w.useRef($h),r=U(function(){return{eventName:"keydown",fn:function(n){if(n.defaultPrevented||n.keyCode!==Ko)return;var o=e.findClosestDraggableId(n);if(!o)return;var l=e.tryGetLock(o,p,{sourceEvent:n});if(!l)return;n.preventDefault();var d=!0,u=l.snapLift();t.current();function p(){d||A(!1),d=!1,t.current(),a()}t.current=xe(window,Gh(u,p),{capture:!0,passive:!1})}}},[e]),a=L(function(){var n={passive:!1,capture:!0};t.current=xe(window,[r],n)},[r]);he(function(){return a(),function(){t.current()}},[a])}var Ia={type:"IDLE"},Hh=120,qh=.15;function Vh(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(i){i.preventDefault()}},{eventName:"keydown",fn:function(i){if(r().type!=="DRAGGING"){t();return}i.keyCode===Un&&i.preventDefault(),t()}},{eventName:pa,fn:t}]}function zh(e){var t=e.cancel,r=e.completed,a=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(n){var o=a();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var l=n.touches[0],d=l.clientX,u=l.clientY,p={x:d,y:u};n.preventDefault(),o.actions.move(p)}},{eventName:"touchend",fn:function(n){var o=a();if(o.type!=="DRAGGING"){t();return}n.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(n){if(a().type!=="DRAGGING"){t();return}n.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(n){var o=a();o.type==="IDLE"&&A(!1);var l=n.touches[0];if(l){var d=l.force>=qh;if(d){var u=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){u&&t();return}if(u){if(o.hasMoved){n.preventDefault();return}t();return}n.preventDefault()}}}},{eventName:pa,fn:t}]}function _h(e){var t=w.useRef(Ia),r=w.useRef(_e),a=L(function(){return t.current},[]),i=L(function(g){t.current=g},[]),n=U(function(){return{eventName:"touchstart",fn:function(g){if(!g.defaultPrevented){var b=e.findClosestDraggableId(g);if(b){var h=e.tryGetLock(b,l,{sourceEvent:g});if(h){var v=g.touches[0],x=v.clientX,y=v.clientY,N={x,y};r.current(),m(h,N)}}}}}},[e]),o=L(function(){var g={capture:!0,passive:!1};r.current=xe(window,[n],g)},[n]),l=L(function(){var f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),i(Ia),r.current(),o())},[o,i]),d=L(function(){var f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),u=L(function(){var g={capture:!0,passive:!1},b={cancel:d,completed:l,getPhase:a},h=xe(window,zh(b),g),v=xe(window,Vh(b),g);r.current=function(){h(),v()}},[d,a,l]),p=L(function(){var g=a();g.type!=="PENDING"&&A(!1);var b=g.actions.fluidLift(g.point);i({type:"DRAGGING",actions:b,hasMoved:!1})},[a,i]),m=L(function(g,b){a().type!=="IDLE"&&A(!1);var h=setTimeout(p,Hh);i({type:"PENDING",point:b,actions:g,longPressTimerId:h}),u()},[u,a,i,p]);he(function(){return o(),function(){r.current();var b=a();b.type==="PENDING"&&(clearTimeout(b.longPressTimerId),i(Ia))}},[a,o,i]),he(function(){var g=xe(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return g},[])}var Jh={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Zo(e,t){if(t==null)return!1;var r=!!Jh[t.tagName.toLowerCase()];if(r)return!0;var a=t.getAttribute("contenteditable");return a==="true"||a===""?!0:t===e?!1:Zo(e,t.parentElement)}function Kh(e,t){var r=t.target;return da(r)?Zo(e,r):!1}var Yh=function(e){return De(e.getBoundingClientRect()).center};function Xh(e){return e instanceof _o(e).Element}var Zh=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=rt(t,function(a){return a in Element.prototype});return r||e}();function Qo(e,t){return e==null?null:e[Zh](t)?e:Qo(e.parentElement,t)}function Qh(e,t){return e.closest?e.closest(t):Qo(e,t)}function ev(e){return"["+Dt.contextId+'="'+e+'"]'}function tv(e,t){var r=t.target;if(!Xh(r))return null;var a=ev(e),i=Qh(r,a);return!i||!da(i)?null:i}function rv(e,t){var r=tv(e,t);return r?r.getAttribute(Dt.draggableId):null}function av(e,t){var r="["+_a.contextId+'="'+e+'"]',a=go(document.querySelectorAll(r)),i=rt(a,function(n){return n.getAttribute(_a.id)===t});return!i||!da(i)?null:i}function nv(e){e.preventDefault()}function br(e){var t=e.expected,r=e.phase,a=e.isLockActive;return e.shouldWarn,!(!a()||t!==r)}function el(e){var t=e.lockAPI,r=e.store,a=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var n=a.draggable.findById(i);return!(!n||!n.options.isEnabled||!Ho(r.getState(),i))}function iv(e){var t=e.lockAPI,r=e.contextId,a=e.store,i=e.registry,n=e.draggableId,o=e.forceSensorStop,l=e.sourceEvent,d=el({lockAPI:t,store:a,registry:i,draggableId:n});if(!d)return null;var u=i.draggable.getById(n),p=av(r,u.descriptor.id);if(!p||l&&!u.options.canDragInteractiveElements&&Kh(p,l))return null;var m=t.claim(o||_e),f="PRE_DRAG";function g(){return u.options.shouldRespectForcePress}function b(){return t.isActive(m)}function h(C,k){br({expected:C,phase:f,isLockActive:b,shouldWarn:!0})&&a.dispatch(k())}var v=h.bind(null,"DRAGGING");function x(C){function k(){t.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(k(),f!=="PRE_DRAG"&&A(!1)),a.dispatch(Zf(C.liftActionArgs)),f="DRAGGING";function B(T,M){if(M===void 0&&(M={shouldBlockNextClick:!1}),C.cleanup(),M.shouldBlockNextClick){var j=xe(window,[{eventName:"click",fn:nv,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(j)}k(),a.dispatch(jo({reason:T}))}return F({isActive:function(){return br({expected:"DRAGGING",phase:f,isLockActive:b,shouldWarn:!1})},shouldRespectForcePress:g,drop:function(M){return B("DROP",M)},cancel:function(M){return B("CANCEL",M)}},C.actions)}function y(C){var k=zt(function(T){v(function(){return Lo({client:T})})}),B=x({liftActionArgs:{id:n,clientSelection:C,movementMode:"FLUID"},cleanup:function(){return k.cancel()},actions:{move:k}});return F({},B,{move:k})}function N(){var C={moveUp:function(){return v(og)},moveRight:function(){return v(cg)},moveDown:function(){return v(lg)},moveLeft:function(){return v(dg)}};return x({liftActionArgs:{id:n,clientSelection:Yh(p),movementMode:"SNAP"},cleanup:_e,actions:C})}function S(){var C=br({expected:"PRE_DRAG",phase:f,isLockActive:b,shouldWarn:!0});C&&t.release()}var E={isActive:function(){return br({expected:"PRE_DRAG",phase:f,isLockActive:b,shouldWarn:!1})},shouldRespectForcePress:g,fluidLift:y,snapLift:N,abort:S};return E}var sv=[Fh,Wh,_h];function ov(e){var t=e.contextId,r=e.store,a=e.registry,i=e.customSensors,n=e.enableDefaultSensors,o=[].concat(n?sv:[],i||[]),l=w.useState(function(){return Dh()})[0],d=L(function(y,N){y.isDragging&&!N.isDragging&&l.tryAbandon()},[l]);he(function(){var y=r.getState(),N=r.subscribe(function(){var S=r.getState();d(y,S),y=S});return N},[l,r,d]),he(function(){return l.tryAbandon},[l.tryAbandon]);for(var u=L(function(x){return el({lockAPI:l,registry:a,store:r,draggableId:x})},[l,a,r]),p=L(function(x,y,N){return iv({lockAPI:l,registry:a,contextId:t,store:r,draggableId:x,forceSensorStop:y,sourceEvent:N&&N.sourceEvent?N.sourceEvent:null})},[t,l,a,r]),m=L(function(x){return rv(t,x)},[t]),f=L(function(x){var y=a.draggable.findById(x);return y?y.options:null},[a.draggable]),g=L(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(An()))},[l,r]),b=L(l.isClaimed,[l]),h=U(function(){return{canGetLock:u,tryGetLock:p,findClosestDraggableId:m,findOptionsForDraggable:f,tryReleaseLock:g,isLockClaimed:b}},[u,p,m,f,g,b]),v=0;v<o.length;v++)o[v](h)}var lv=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Mt(e){return e.current||A(!1),e.current}function cv(e){var t=e.contextId,r=e.setCallbacks,a=e.sensors,i=e.nonce,n=e.dragHandleUsageInstructions,o=w.useRef(null),l=Jo(e),d=L(function(){return lv(l.current)},[l]),u=yh(t),p=Sh({contextId:t,text:n}),m=ph(t,i),f=L(function(T){Mt(o).dispatch(T)},[]),g=U(function(){return vi({publishWhileDragging:eg,updateDroppableScroll:rg,updateDroppableIsEnabled:ag,updateDroppableIsCombineEnabled:ng,collectionStarting:tg},f)},[f]),b=hh(),h=U(function(){return qg(b,g)},[b,g]),v=U(function(){return oh(F({scrollWindow:Vg,scrollDroppable:h.scrollDroppable},vi({move:Lo},f)))},[h.scrollDroppable,f]),x=fh(t),y=U(function(){return Ug({announce:u,autoScroller:v,dimensionMarshal:h,focusMarshal:x,getResponders:d,styleMarshal:m})},[u,v,h,x,d,m]);o.current=y;var N=L(function(){var T=Mt(o),M=T.getState();M.phase!=="IDLE"&&T.dispatch(An())},[]),S=L(function(){var T=Mt(o).getState();return T.isDragging||T.phase==="DROP_ANIMATING"},[]),E=U(function(){return{isDragging:S,tryAbort:N}},[S,N]);r(E);var C=L(function(T){return Ho(Mt(o).getState(),T)},[]),k=L(function(){return it(Mt(o).getState())},[]),B=U(function(){return{marshal:h,focus:x,contextId:t,canLift:C,isMovementAllowed:k,dragHandleUsageInstructionsId:p,registry:b}},[t,h,p,x,C,k,b]);return ov({contextId:t,store:y,registry:b,customSensors:a,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(function(){return N},[N]),V.createElement(ua.Provider,{value:B},V.createElement(Tp,{context:Fn,store:y},e.children))}var dv=0;function uv(){return U(function(){return""+dv++},[])}function pv(e){var t=uv(),r=e.dragHandleUsageInstructions||Dr.dragHandleUsageInstructions;return V.createElement(Gm,null,function(a){return V.createElement(cv,{nonce:e.nonce,contextId:t,setCallbacks:a,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var tl=function(t){return function(r){return t===r}},mv=tl("scroll"),fv=tl("auto"),Ki=function(t,r){return r(t.overflowX)||r(t.overflowY)},gv=function(t){var r=window.getComputedStyle(t),a={overflowX:r.overflowX,overflowY:r.overflowY};return Ki(a,mv)||Ki(a,fv)},hv=function(){return!1},vv=function e(t){return t==null?null:t===document.body?hv()?t:null:t===document.documentElement?null:gv(t)?t:e(t.parentElement)},Ja=function(e){return{x:e.scrollLeft,y:e.scrollTop}},bv=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},yv=function(e){var t=vv(e),r=bv(e);return{closestScrollable:t,isFixedOnPage:r}},xv=function(e){var t=e.descriptor,r=e.isEnabled,a=e.isCombineEnabled,i=e.isFixedOnPage,n=e.direction,o=e.client,l=e.page,d=e.closest,u=function(){if(!d)return null;var g=d.scrollSize,b=d.client,h=Uo({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:b.paddingBox.height,width:b.paddingBox.width});return{pageMarginBox:d.page.marginBox,frameClient:b,scrollSize:g,shouldClipSubject:d.shouldClipSubject,scroll:{initial:d.scroll,current:d.scroll,max:h,diff:{value:ae,displacement:ae}}}}(),p=n==="vertical"?En:xo,m=Nt({page:l,withPlaceholder:null,axis:p,frame:u}),f={descriptor:t,isCombineEnabled:a,isFixedOnPage:i,axis:p,isEnabled:r,client:o,page:l,frame:u,subject:m};return f},wv=function(t,r){var a=co(t);if(!r||t!==r)return a;var i=a.paddingBox.top-r.scrollTop,n=a.paddingBox.left-r.scrollLeft,o=i+r.scrollHeight,l=n+r.scrollWidth,d={top:i,right:l,bottom:o,left:n},u=xn(d,a.border),p=wn({borderBox:u,margin:a.margin,border:a.border,padding:a.padding});return p},Nv=function(e){var t=e.ref,r=e.descriptor,a=e.env,i=e.windowScroll,n=e.direction,o=e.isDropDisabled,l=e.isCombineEnabled,d=e.shouldClipSubject,u=a.closestScrollable,p=wv(t,u),m=Ar(p,i),f=function(){if(!u)return null;var b=co(u),h={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:b,page:Ar(b,i),scroll:Ja(u),scrollSize:h,shouldClipSubject:d}}(),g=xv({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:a.isFixedOnPage,direction:n,client:p,page:m,closest:f});return g},Sv={passive:!1},Dv={passive:!0},Yi=function(e){return e.shouldPublishImmediately?Sv:Dv};function jr(e){var t=w.useContext(e);return t||A(!1),t}var yr=function(t){return t&&t.env.closestScrollable||null};function Ev(e){var t=w.useRef(null),r=jr(ua),a=$n("droppable"),i=r.registry,n=r.marshal,o=Jo(e),l=U(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),d=w.useRef(l),u=U(function(){return re(function(S,E){t.current||A(!1);var C={x:S,y:E};n.updateDroppableScroll(l.id,C)})},[l.id,n]),p=L(function(){var S=t.current;return!S||!S.env.closestScrollable?ae:Ja(S.env.closestScrollable)},[]),m=L(function(){var S=p();u(S.x,S.y)},[p,u]),f=U(function(){return zt(m)},[m]),g=L(function(){var S=t.current,E=yr(S);S&&E||A(!1);var C=S.scrollOptions;if(C.shouldPublishImmediately){m();return}f()},[f,m]),b=L(function(S,E){t.current&&A(!1);var C=o.current,k=C.getDroppableRef();k||A(!1);var B=yv(k),T={ref:k,descriptor:l,env:B,scrollOptions:E};t.current=T;var M=Nv({ref:k,descriptor:l,env:B,windowScroll:S,direction:C.direction,isDropDisabled:C.isDropDisabled,isCombineEnabled:C.isCombineEnabled,shouldClipSubject:!C.ignoreContainerClipping}),j=B.closestScrollable;return j&&(j.setAttribute(Vi.contextId,r.contextId),j.addEventListener("scroll",g,Yi(T.scrollOptions))),M},[r.contextId,l,g,o]),h=L(function(){var S=t.current,E=yr(S);return S&&E||A(!1),Ja(E)},[]),v=L(function(){var S=t.current;S||A(!1);var E=yr(S);t.current=null,E&&(f.cancel(),E.removeAttribute(Vi.contextId),E.removeEventListener("scroll",g,Yi(S.scrollOptions)))},[g,f]),x=L(function(S){var E=t.current;E||A(!1);var C=yr(E);C||A(!1),C.scrollTop+=S.y,C.scrollLeft+=S.x},[]),y=U(function(){return{getDimensionAndWatchScroll:b,getScrollWhileDragging:h,dragStopped:v,scroll:x}},[v,b,h,x]),N=U(function(){return{uniqueId:a,descriptor:l,callbacks:y}},[y,l,a]);he(function(){return d.current=N.descriptor,i.droppable.register(N),function(){t.current&&v(),i.droppable.unregister(N)}},[y,l,v,N,n,i.droppable]),he(function(){t.current&&n.updateDroppableIsEnabled(d.current.id,!e.isDropDisabled)},[e.isDropDisabled,n]),he(function(){t.current&&n.updateDroppableIsCombineEnabled(d.current.id,e.isCombineEnabled)},[e.isCombineEnabled,n])}function Ta(){}var Xi={width:0,height:0,margin:_m},Cv=function(t){var r=t.isAnimatingOpenOnMount,a=t.placeholder,i=t.animate;return r||i==="close"?Xi:{height:a.client.borderBox.height,width:a.client.borderBox.width,margin:a.client.margin}},Pv=function(t){var r=t.isAnimatingOpenOnMount,a=t.placeholder,i=t.animate,n=Cv({isAnimatingOpenOnMount:r,placeholder:a,animate:i});return{display:a.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?Gt.placeholder:null}};function Iv(e){var t=w.useRef(null),r=L(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),a=e.animate,i=e.onTransitionEnd,n=e.onClose,o=e.contextId,l=w.useState(e.animate==="open"),d=l[0],u=l[1];w.useEffect(function(){return d?a!=="open"?(r(),u(!1),Ta):t.current?Ta:(t.current=setTimeout(function(){t.current=null,u(!1)}),r):Ta},[a,d,r]);var p=L(function(f){f.propertyName==="height"&&(i(),a==="close"&&n())},[a,n,i]),m=Pv({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return V.createElement(e.placeholder.tagName,{style:m,"data-rbd-placeholder-context-id":o,onTransitionEnd:p,ref:e.innerRef})}var Tv=V.memo(Iv),Gn=V.createContext(null),Av=function(e){Ws(t,e);function t(){for(var a,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return a=e.call.apply(e,[this].concat(n))||this,a.state={isVisible:!!a.props.on,data:a.props.on,animate:a.props.shouldAnimate&&a.props.on?"open":"none"},a.onClose=function(){a.state.animate==="close"&&a.setState({isVisible:!1})},a}t.getDerivedStateFromProps=function(i,n){return i.shouldAnimate?i.on?{isVisible:!0,data:i.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!i.on,data:i.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var i={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(i)},t}(V.PureComponent),Zi={dragging:5e3,dropAnimating:4500},Rv=function(t,r){return r?Gt.drop(r.duration):t?Gt.snap:Gt.fluid},Ov=function(t,r){return t?r?Yt.opacity.drop:Yt.opacity.combining:null},kv=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function Bv(e){var t=e.dimension,r=t.client,a=e.offset,i=e.combineWith,n=e.dropping,o=!!i,l=kv(e),d=!!n,u=d?Va.drop(a,o):Va.moveTo(a),p={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Rv(l,n),transform:u,opacity:Ov(o,d),zIndex:d?Zi.dropAnimating:Zi.dragging,pointerEvents:"none"};return p}function Lv(e){return{transform:Va.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function jv(e){return e.type==="DRAGGING"?Bv(e):Lv(e)}function Mv(e,t,r){r===void 0&&(r=ae);var a=window.getComputedStyle(t),i=t.getBoundingClientRect(),n=lo(i,a),o=Ar(n,r),l={client:n,tagName:t.tagName.toLowerCase(),display:a.display},d={x:n.marginBox.width,y:n.marginBox.height},u={descriptor:e,placeholder:l,displaceBy:d,client:n,page:o};return u}function Fv(e){var t=$n("draggable"),r=e.descriptor,a=e.registry,i=e.getDraggableRef,n=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,d=U(function(){return{canDragInteractiveElements:n,shouldRespectForcePress:o,isEnabled:l}},[n,l,o]),u=L(function(g){var b=i();return b||A(!1),Mv(r,b,g)},[r,i]),p=U(function(){return{uniqueId:t,descriptor:r,options:d,getDimension:u}},[r,u,d,t]),m=w.useRef(p),f=w.useRef(!0);he(function(){return a.draggable.register(m.current),function(){return a.draggable.unregister(m.current)}},[a.draggable]),he(function(){if(f.current){f.current=!1;return}var g=m.current;m.current=p,a.draggable.update(p,g)},[p,a.draggable])}function $v(e){e.preventDefault()}function Uv(e){var t=w.useRef(null),r=L(function(T){t.current=T},[]),a=L(function(){return t.current},[]),i=jr(ua),n=i.contextId,o=i.dragHandleUsageInstructionsId,l=i.registry,d=jr(Gn),u=d.type,p=d.droppableId,m=U(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:p}},[e.draggableId,e.index,u,p]),f=e.children,g=e.draggableId,b=e.isEnabled,h=e.shouldRespectForcePress,v=e.canDragInteractiveElements,x=e.isClone,y=e.mapped,N=e.dropAnimationFinished;if(!x){var S=U(function(){return{descriptor:m,registry:l,getDraggableRef:a,canDragInteractiveElements:v,shouldRespectForcePress:h,isEnabled:b}},[m,l,a,v,h,b]);Fv(S)}var E=U(function(){return b?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":g,"data-rbd-drag-handle-context-id":n,draggable:!1,onDragStart:$v}:null},[n,o,g,b]),C=L(function(T){y.type==="DRAGGING"&&y.dropping&&T.propertyName==="transform"&&N()},[N,y]),k=U(function(){var T=jv(y),M=y.type==="DRAGGING"&&y.dropping?C:null,j={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":n,"data-rbd-draggable-id":g,style:T,onTransitionEnd:M},dragHandleProps:E};return j},[n,E,g,y,C,r]),B=U(function(){return{draggableId:m.id,type:m.type,source:{index:m.index,droppableId:m.droppableId}}},[m.droppableId,m.id,m.index,m.type]);return f(k,y.snapshot,B)}var rl=function(e,t){return e===t},al=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},Gv=function(t){return t.combine?t.combine.draggableId:null},Wv=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function Hv(){var e=re(function(i,n){return{x:i,y:n}}),t=re(function(i,n,o,l,d){return{isDragging:!0,isClone:n,isDropAnimating:!!d,dropAnimation:d,mode:i,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=re(function(i,n,o,l,d,u,p){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:d,combineWith:u,mode:n,offset:i,dimension:o,forceShouldAnimate:p,snapshot:t(n,l,d,u,null)}}}),a=function(n,o){if(n.isDragging){if(n.critical.draggable.id!==o.draggableId)return null;var l=n.current.client.offset,d=n.dimensions.draggables[o.draggableId],u=ge(n.impact),p=Wv(n.impact),m=n.forceShouldAnimate;return r(e(l.x,l.y),n.movementMode,d,o.isClone,u,p,m)}if(n.phase==="DROP_ANIMATING"){var f=n.completed;if(f.result.draggableId!==o.draggableId)return null;var g=o.isClone,b=n.dimensions.draggables[o.draggableId],h=f.result,v=h.mode,x=al(h),y=Gv(h),N=n.dropDuration,S={duration:N,curve:On.drop,moveTo:n.newHomeClientOffset,opacity:y?Yt.opacity.drop:null,scale:y?Yt.scale.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:b,dropping:S,draggingOver:x,combineWith:y,mode:v,forceShouldAnimate:null,snapshot:t(v,g,x,y,S)}}}return null};return a}function nl(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var qv={mapped:{type:"SECONDARY",offset:ae,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:nl(null)}};function Vv(){var e=re(function(o,l){return{x:o,y:l}}),t=re(nl),r=re(function(o,l,d){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:d,snapshot:t(l)}}}),a=function(l){return l?r(ae,l,!0):null},i=function(l,d,u,p){var m=u.displaced.visible[l],f=!!(p.inVirtualList&&p.effected[l]),g=oa(u),b=g&&g.draggableId===l?d:null;if(!m){if(!f)return a(b);if(u.displaced.invisible[l])return null;var h=It(p.displacedBy.point),v=e(h.x,h.y);return r(v,b,!0)}if(f)return a(b);var x=u.displacedBy.point,y=e(x.x,x.y);return r(y,b,m.shouldAnimate)},n=function(l,d){if(l.isDragging)return l.critical.draggable.id===d.draggableId?null:i(d.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var u=l.completed;return u.result.draggableId===d.draggableId?null:i(d.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return n}var zv=function(){var t=Hv(),r=Vv(),a=function(n,o){return t(n,o)||r(n,o)||qv};return a},_v={dropAnimationFinished:Mo},Jv=so(zv,_v,null,{context:Fn,pure:!0,areStatePropsEqual:rl})(Uv);function il(e){var t=jr(Gn),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:V.createElement(Jv,e)}function Kv(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,a=!!e.shouldRespectForcePress;return V.createElement(il,F({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:a}))}function Yv(e){var t=w.useContext(ua);t||A(!1);var r=t.contextId,a=t.isMovementAllowed,i=w.useRef(null),n=w.useRef(null),o=e.children,l=e.droppableId,d=e.type,u=e.mode,p=e.direction,m=e.ignoreContainerClipping,f=e.isDropDisabled,g=e.isCombineEnabled,b=e.snapshot,h=e.useClone,v=e.updateViewportMaxScroll,x=e.getContainerForClone,y=L(function(){return i.current},[]),N=L(function(j){i.current=j},[]);L(function(){return n.current},[]);var S=L(function(j){n.current=j},[]),E=L(function(){a()&&v({maxScroll:Wo()})},[a,v]);Ev({droppableId:l,type:d,mode:u,direction:p,isDropDisabled:f,isCombineEnabled:g,ignoreContainerClipping:m,getDroppableRef:y});var C=V.createElement(Av,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(j){var _=j.onClose,Y=j.data,R=j.animate;return V.createElement(Tv,{placeholder:Y,onClose:_,innerRef:S,animate:R,contextId:r,onTransitionEnd:E})}),k=U(function(){return{innerRef:N,placeholder:C,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,C,N]),B=h?h.dragging.draggableId:null,T=U(function(){return{droppableId:l,type:d,isUsingCloneFor:B}},[l,B,d]);function M(){if(!h)return null;var j=h.dragging,_=h.render,Y=V.createElement(il,{draggableId:j.draggableId,index:j.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(R,W){return _(R,W,j)});return ol.createPortal(Y,x())}return V.createElement(Gn.Provider,{value:T},o(k,b),M())}var Aa=function(t,r){return t===r.droppable.type},Qi=function(t,r){return r.draggables[t.draggable.id]},Xv=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=F({},t,{shouldAnimatePlaceholder:!1}),a=re(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),i=re(function(o,l,d,u,p,m){var f=p.descriptor.id,g=p.descriptor.droppableId===o;if(g){var b=m?{render:m,dragging:a(p.descriptor)}:null,h={isDraggingOver:d,draggingOverWith:d?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:h,useClone:b}}if(!l)return r;if(!u)return t;var v={isDraggingOver:d,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}}),n=function(l,d){var u=d.droppableId,p=d.type,m=!d.isDropDisabled,f=d.renderClone;if(l.isDragging){var g=l.critical;if(!Aa(p,g))return r;var b=Qi(g,l.dimensions),h=ge(l.impact)===u;return i(u,m,h,h,b,f)}if(l.phase==="DROP_ANIMATING"){var v=l.completed;if(!Aa(p,v.critical))return r;var x=Qi(v.critical,l.dimensions);return i(u,m,al(v.result)===u,ge(v.impact)===u,x,f)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var y=l.completed;if(!Aa(p,y.critical))return r;var N=ge(y.impact)===u,S=!!(y.impact.at&&y.impact.at.type==="COMBINE"),E=y.critical.droppable.id===u;return N?S?t:r:E?t:r}return r};return n},Zv={updateViewportMaxScroll:sg};function Qv(){return document.body||A(!1),document.body}var eb={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Qv},sl=so(Xv,Zv,null,{context:Fn,pure:!0,areStatePropsEqual:rl})(Yv);sl.defaultProps=eb;const tb=async(e,t,r)=>{try{const a={status:t};r!==void 0&&(a.position=r),await q.put(`/api/kanban/tasks/${e}/status`,a)}catch(a){throw console.error("Failed to update task status:",a),a}},rb=async(e,t,r)=>{try{await q.put(`/api/kanban/tasks/${e}/position`,{status:t,position:r})}catch(a){throw console.error("Failed to update task position:",a),a}},ab=async e=>{try{return(await q.get(`/api/kanban/projects/${e}/progress`)).data.data}catch(t){throw console.error("Failed to fetch project progress:",t),t}},nb=async e=>{try{return(await q.get(`/api/kanban/tasks/${e}/progress`)).data.data}catch(t){throw console.error("Failed to fetch task progress:",t),t}},ib=e=>{switch(e){case"URGENT":return"bg-red-100 text-red-800 border-red-200";case"HIGH":return"bg-orange-100 text-orange-800 border-orange-200";case"MEDIUM":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"LOW":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},sb=e=>{if(!e)return"";const t=new Date(e),r=new Date,a=t.getTime()-r.getTime(),i=Math.ceil(a/(1e3*60*60*24));return i<0?`Overdue by ${Math.abs(i)} days`:i===0?"Due today":i===1?"Due tomorrow":`Due in ${i} days`},ob=e=>{switch(e){case"TODO":return"To Do";case"IN_PROGRESS":return"In Progress";case"IN_REVIEW":return"In Review";case"DONE":return"Done";default:return e}},lb=({projectId:e,onTaskUpdate:t})=>{const[r,a]=w.useState(null),[i,n]=w.useState(!0),[o,l]=w.useState(!1),[d,u]=w.useState(null);w.useEffect(()=>{p()},[e]);const p=async()=>{var h;try{n(!0);const v=await fetch(`/api/kanban/projects/${e}/kanban`,{headers:{Authorization:`Bearer ${(h=JSON.parse(localStorage.getItem("auth-storage")||"{}").state)==null?void 0:h.token}`}});if(v.ok){const x=await v.json();a(x.data)}else O.error("Failed to load Kanban board")}catch(v){console.error("Failed to load Kanban board:",v),O.error("Failed to load Kanban board")}finally{n(!1)}},m=async h=>{if(!h.destination||!r)return;const{source:v,destination:x,draggableId:y}=h,N=v.droppableId,S=x.droppableId;if(N===S){const E=r.columns[N],C=Array.from(E),[k]=C.splice(v.index,1);C.splice(x.index,0,k),C.forEach((B,T)=>{B.position=T}),a({...r,columns:{...r.columns,[N]:C}});try{await rb(y,S,x.index)}catch{O.error("Failed to update task position"),p()}}else{const E=r.columns[N],C=r.columns[S],[k]=E.splice(v.index,1);k.status=S,k.position=x.index,C.splice(x.index,0,k),E.forEach((B,T)=>{B.position=T}),C.forEach((B,T)=>{B.position=T}),a({...r,columns:{...r.columns,[N]:E,[S]:C}});try{await tb(y,S,x.index),O.success("Task moved successfully"),t==null||t()}catch{O.error("Failed to update task status"),p()}}},f=h=>{u(h),l(!0)},g=()=>{p(),t==null||t()};return i?s("div",{className:"flex items-center justify-center h-64",children:s(tt,{})}):r?c("div",{className:"h-full",children:[s(pv,{onDragEnd:m,children:s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 h-full",children:["TODO","IN_PROGRESS","IN_REVIEW","DONE"].map(h=>c("div",{className:"bg-gray-50 rounded-lg p-4",children:[c("div",{className:"flex items-center justify-between mb-4",children:[s("h3",{className:"font-semibold text-gray-700",children:ob(h)}),s("span",{className:"bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-sm",children:r.columns[h].length})]}),s(sl,{droppableId:h,children:(v,x)=>c("div",{ref:v.innerRef,...v.droppableProps,className:`min-h-[200px] transition-colors ${x.isDraggingOver?"bg-blue-50":""}`,children:[r.columns[h].map((y,N)=>s(Kv,{draggableId:y.id,index:N,children:(S,E)=>c("div",{ref:S.innerRef,...S.draggableProps,...S.dragHandleProps,className:`mb-3 p-3 bg-white rounded-lg shadow-sm border cursor-pointer hover:shadow-md transition-shadow ${E.isDragging?"shadow-lg":""}`,onClick:()=>f(y),children:[c("div",{className:"flex items-start justify-between mb-2",children:[s("h4",{className:"font-medium text-gray-900 text-sm line-clamp-2",children:y.title}),s(Al,{className:"w-4 h-4 text-gray-400"})]}),s("p",{className:"text-gray-600 text-xs line-clamp-2 mb-3",children:y.description}),c("div",{className:"flex items-center justify-between",children:[s("div",{className:"flex items-center space-x-2",children:y.assignee&&c("div",{className:"flex items-center space-x-1",children:[s(Ce,{className:"w-3 h-3 text-gray-400"}),s("span",{className:"text-xs text-gray-600",children:y.assignee.name})]})}),s("div",{className:"flex items-center space-x-1",children:s("span",{className:`px-2 py-1 rounded-full text-xs border ${ib(y.priority)}`,children:y.priority})})]}),y.dueDate&&c("div",{className:"flex items-center space-x-1 mt-2",children:[s(pe,{className:"w-3 h-3 text-gray-400"}),s("span",{className:"text-xs text-gray-600",children:sb(y.dueDate)})]}),y.dueDate&&new Date(y.dueDate)<new Date&&c("div",{className:"flex items-center space-x-1 mt-1",children:[s(os,{className:"w-3 h-3 text-red-400"}),s("span",{className:"text-xs text-red-600",children:"Overdue"})]})]})},y.id)),v.placeholder]})})]},h))})}),d&&s(pn,{isOpen:o,onClose:()=>{l(!1),u(null)},task:d,onTaskUpdate:g})]}):s("div",{className:"text-center text-gray-500 py-8",children:"Failed to load Kanban board"})},cb=({projectId:e,taskId:t,onProgressUpdate:r})=>{var h;const[a,i]=w.useState(null),[n,o]=w.useState(null),[l,d]=w.useState(!0),[u,p]=w.useState("project");w.useEffect(()=>{t?(p("task"),f()):(p("project"),m())},[e,t]);const m=async()=>{try{d(!0);const v=await ab(e);i(v)}catch(v){console.error("Failed to load project progress:",v),O.error("Failed to load project progress")}finally{d(!1)}},f=async()=>{if(t)try{d(!0);const v=await nb(t);o(v)}catch(v){console.error("Failed to load task progress:",v),O.error("Failed to load task progress")}finally{d(!1)}},g=v=>v>=80?"text-green-600":v>=60?"text-blue-600":v>=40?"text-yellow-600":"text-red-600",b=v=>v>=80?"bg-green-500":v>=60?"bg-blue-500":v>=40?"bg-yellow-500":"bg-red-500";return l?s("div",{className:"flex items-center justify-center h-32",children:s("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):c("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[c("div",{className:"flex space-x-4 mb-6",children:[s("button",{onClick:()=>p("project"),className:`px-4 py-2 rounded-md font-medium transition-colors ${u==="project"?"bg-primary-100 text-primary-700":"text-gray-600 hover:text-gray-900"}`,children:"Project Progress"}),t&&s("button",{onClick:()=>p("task"),className:`px-4 py-2 rounded-md font-medium transition-colors ${u==="task"?"bg-primary-100 text-primary-700":"text-gray-600 hover:text-gray-900"}`,children:"Task Progress"})]}),u==="project"&&a&&c("div",{className:"space-y-6",children:[c("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6",children:[c("div",{className:"flex items-center justify-between mb-4",children:[s("h3",{className:"text-lg font-semibold text-gray-900",children:"Overall Progress"}),c("div",{className:`text-2xl font-bold ${g(a.progressPercentage)}`,children:[a.progressPercentage,"%"]})]}),s("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:s("div",{className:`h-3 rounded-full transition-all duration-500 ${b(a.progressPercentage)}`,style:{width:`${a.progressPercentage}%`}})}),c("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[c("span",{children:[a.completedTasks," of ",a.totalTasks," tasks completed"]}),s(ns,{className:"w-4 h-4"})]})]}),c("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[s("div",{className:"text-2xl font-bold text-gray-600",children:a.taskCounts.TODO||0}),s("div",{className:"text-sm text-gray-500",children:"To Do"})]}),c("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[s("div",{className:"text-2xl font-bold text-blue-600",children:a.taskCounts.IN_PROGRESS||0}),s("div",{className:"text-sm text-blue-500",children:"In Progress"})]}),c("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[s("div",{className:"text-2xl font-bold text-purple-600",children:a.taskCounts.IN_REVIEW||0}),s("div",{className:"text-sm text-purple-500",children:"In Review"})]}),c("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[s("div",{className:"text-2xl font-bold text-green-600",children:a.taskCounts.DONE||0}),s("div",{className:"text-sm text-green-500",children:"Done"})]})]}),c("div",{children:[s("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),c("div",{className:"space-y-3",children:[a.recentActivity.map((v,x)=>c("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[s("div",{className:"flex-shrink-0",children:s(dt,{className:"w-5 h-5 text-green-500"})}),c("div",{className:"flex-1 min-w-0",children:[s("p",{className:"text-sm font-medium text-gray-900 truncate",children:v.title}),c("p",{className:"text-xs text-gray-500",children:["Moved to ",v.status,"  ",new Date(v.updated_at).toLocaleDateString()]})]})]},x)),a.recentActivity.length===0&&s("div",{className:"text-center text-gray-500 py-4",children:"No recent activity"})]})]})]}),u==="task"&&n&&c("div",{className:"space-y-6",children:[c("div",{className:"bg-gray-50 rounded-lg p-4",children:[s("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n.task.title}),s("p",{className:"text-gray-600 mb-4",children:n.task.description}),c("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c("div",{className:"text-center",children:[s("div",{className:"text-sm text-gray-500",children:"Status"}),s("div",{className:"font-medium text-gray-900",children:n.task.status})]}),c("div",{className:"text-center",children:[s("div",{className:"text-sm text-gray-500",children:"Priority"}),s("div",{className:"font-medium text-gray-900",children:n.task.priority})]}),c("div",{className:"text-center",children:[s("div",{className:"text-sm text-gray-500",children:"Assignee"}),s("div",{className:"font-medium text-gray-900",children:((h=n.task.assignee)==null?void 0:h.name)||"Unassigned"})]}),c("div",{className:"text-center",children:[s("div",{className:"text-sm text-gray-500",children:"Time Spent"}),c("div",{className:"font-medium text-gray-900",children:[n.timeTracking.totalHours,"h"]})]})]})]}),c("div",{children:[s("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Time Tracking"}),c("div",{className:"space-y-3",children:[n.timeTracking.entries.map((v,x)=>c("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c("div",{className:"flex items-center space-x-3",children:[s(ve,{className:"w-4 h-4 text-gray-400"}),c("div",{children:[s("p",{className:"text-sm font-medium text-gray-900",children:v.user_name}),c("p",{className:"text-xs text-gray-500",children:[new Date(v.start_time).toLocaleString()," -",v.end_time?new Date(v.end_time).toLocaleString():"Ongoing"]})]})]}),s("div",{className:"text-sm text-gray-600",children:v.description&&s("p",{className:"text-xs text-gray-500",children:v.description})})]},x)),n.timeTracking.entries.length===0&&s("div",{className:"text-center text-gray-500 py-4",children:"No time entries recorded"})]})]}),n.task.dueDate&&s("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c("div",{className:"flex items-center space-x-2",children:[s(pe,{className:"w-5 h-5 text-yellow-600"}),c("div",{children:[s("p",{className:"text-sm font-medium text-yellow-800",children:"Due Date"}),s("p",{className:"text-sm text-yellow-700",children:new Date(n.task.dueDate).toLocaleDateString()})]})]})})]})]})},db=()=>{const{projectId:e}=Xa(),t=Ka(),[r,a]=w.useState(null),[i,n]=w.useState(!0),[o,l]=w.useState("kanban"),[d,u]=w.useState(!1),[p,m]=w.useState(null);w.useEffect(()=>{e&&f()},[e]);const f=async()=>{var h;try{n(!0);const v=await fetch(`/api/projects/${e}`,{headers:{Authorization:`Bearer ${(h=JSON.parse(localStorage.getItem("auth-storage")||"{}").state)==null?void 0:h.token}`}});if(v.ok){const x=await v.json();a(x.data.project)}else O.error("Failed to load project"),t("/projects")}catch(v){console.error("Failed to load project:",v),O.error("Failed to load project"),t("/projects")}finally{n(!1)}},g=()=>{O.success("Task updated successfully")},b=()=>{m(null),u(!0)};return i?s("div",{className:"flex items-center justify-center h-64",children:s(tt,{})}):r?c("div",{className:"min-h-screen bg-gray-50",children:[s("div",{className:"bg-white shadow-sm border-b",children:s("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c("div",{className:"flex items-center justify-between h-16",children:[c("div",{className:"flex items-center space-x-4",children:[s("button",{onClick:()=>t("/projects"),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:s(Rl,{className:"w-5 h-5"})}),c("div",{children:[s("h1",{className:"text-xl font-semibold text-gray-900",children:r.name}),s("p",{className:"text-sm text-gray-500",children:r.description})]})]}),c("div",{className:"flex items-center space-x-4",children:[c("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[c("button",{onClick:()=>l("kanban"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${o==="kanban"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s(Ol,{className:"w-4 h-4 inline mr-1"}),"Kanban"]}),c("button",{onClick:()=>l("progress"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${o==="progress"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s(lt,{className:"w-4 h-4 inline mr-1"}),"Progress"]})]}),c("button",{onClick:b,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 flex items-center space-x-2",children:[s(ut,{className:"w-4 h-4"}),s("span",{children:"Create Task"})]})]})]})})}),s("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o==="kanban"?s("div",{className:"space-y-6",children:c("div",{className:"bg-white rounded-lg shadow-sm border",children:[c("div",{className:"p-6 border-b border-gray-200",children:[s("h2",{className:"text-lg font-semibold text-gray-900",children:"Kanban Board"}),s("p",{className:"text-sm text-gray-500 mt-1",children:"Drag and drop tasks to update their status"})]}),s("div",{className:"p-6",children:s(lb,{projectId:e,onTaskUpdate:g})})]})}):s("div",{className:"space-y-6",children:s(cb,{projectId:e,onProgressUpdate:g})})}),s(pn,{isOpen:d,onClose:()=>{u(!1),m(null)},task:p,onTaskUpdate:g,projectId:e})]}):s("div",{className:"text-center text-gray-500 py-8",children:"Project not found"})},ub=()=>s("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50",children:c("div",{className:"text-center",children:[s("h1",{className:"text-6xl font-bold text-secondary-900",children:"404"}),s("h2",{className:"text-2xl font-semibold text-secondary-700 mt-4",children:"Page Not Found"}),s("p",{className:"text-secondary-600 mt-2",children:"The page you're looking for doesn't exist."}),s(Ya,{to:"/dashboard",className:"btn-primary mt-6",children:"Go to Dashboard"})]})});function pb(){const{isAuthenticated:e,isLoading:t}=Ne();return t?s("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:c("div",{className:"text-center",children:[s("div",{className:"flex justify-center mb-6",children:s("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-r from-primary-600 to-purple-600 shadow-xl",children:s("span",{className:"text-2xl font-bold text-white",children:"PM"})})}),s(tt,{size:"lg",text:"Loading your dashboard..."})]})}):c(cl,{children:[s(de,{path:"/login",element:e?s(gr,{to:"/dashboard",replace:!0}):s(Gu,{})}),s(de,{path:"/register",element:e?s(gr,{to:"/dashboard",replace:!0}):s(Wu,{})}),c(de,{path:"/",element:e?s(Uu,{}):s(gr,{to:"/login",replace:!0}),children:[s(de,{index:!0,element:s(gr,{to:"/dashboard",replace:!0})}),s(de,{path:"dashboard",element:s(zu,{})}),s(de,{path:"projects",element:s(Yu,{})}),s(de,{path:"projects/:projectId",element:s(Qu,{})}),s(de,{path:"projects/:projectId/kanban",element:s(db,{})}),s(de,{path:"tasks",element:s(cp,{})}),s(de,{path:"tasks/:taskId",element:s(dp,{})}),s(de,{path:"time-tracking",element:s(fp,{})}),s(de,{path:"users",element:s(bp,{})}),s(de,{path:"profile",element:s(yp,{})})]}),s(de,{path:"*",element:s(ub,{})})]})}Oa.createRoot(document.getElementById("root")).render(s(V.StrictMode,{children:s(dl,{children:s(pb,{})})}));
//# sourceMappingURL=index-44a97c69.js.map
